this.AMP=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=55)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t,n){"use strict";var r=n(46),o=n.n(r),a=n(30),i=n.n(a),c=n(28),l=n.n(c),s=n(34),u=n.n(s),p=n(20),d=n.n(p),m=n(4),f=n.n(m),b=n(0),g=n(47),h=n.n(g),y=n(18),v=n.n(y),O=n(10),j=n(48),k=n.n(j),w=(n(27),n(66),n(49)),_=n(1),E=n(5),S=n(11),x=n(7),C=n(33),P=(n(40),n(22)),I=n(6),A=n(24),B=n(13),T=(n(9),n(23));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var D=[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{content:{type:"string",source:"text",selector:"code"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes;return Object(b.createElement)("pre",null,Object(b.createElement)("code",null,t.content))},migrate:T.a}];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{align:{type:"string"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},caption:{type:"string",source:"html",selector:"figcaption"},href:{type:"string",source:"attribute",selector:"figure > a",attribute:"href"},rel:{type:"string",source:"attribute",selector:"figure > a",attribute:"rel"},linkClass:{type:"string",source:"attribute",selector:"figure > a",attribute:"class"},id:{type:"number"},width:{type:"number"},height:{type:"number"},linkDestination:{type:"string",default:"none"},linkTarget:{type:"string",source:"attribute",selector:"figure > a",attribute:"target"},rotationAngle:{type:"number",default:0},ampAnimationType:{source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in"},ampAnimationDelay:{source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-delay",default:0},ampAnimationDuration:{source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-duration",default:0},ampAnimationAfter:{source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-after"},anchor:{type:"string",source:"attribute",attribute:"id",selector:"amp-story-grid-layer .amp-story-block-wrapper, amp-story-cta-layer"},positionTop:{default:0,type:"number"},positionLeft:{default:5,type:"number"},ampShowImageCaption:{type:"boolean",default:!1},sizeSlug:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t,n=e.attributes,r=n.url,o=n.alt,a=n.caption,i=n.align,c=n.href,l=n.rel,s=n.linkClass,u=n.width,p=n.height,d=n.id,m=n.linkTarget,g=n.sizeSlug,h=v()((t={},f()(t,"align".concat(i),i),f()(t,"size-".concat(g),g),f()(t,"is-resized",u||p),t)),y=Object(b.createElement)("img",{src:r,alt:o,className:d?"wp-image-".concat(d):null,width:u,height:p}),O=Object(b.createElement)(b.Fragment,null,c?Object(b.createElement)("a",{className:s,href:c,target:m,rel:l},y):y,!x.RichText.isEmpty(a)&&Object(b.createElement)(x.RichText.Content,{tagName:"figcaption",value:a}));return"left"===i||"right"===i||"center"===i?Object(b.createElement)("div",null,Object(b.createElement)("figure",{className:h},O)):Object(b.createElement)("figure",{className:h},O)},migrate:T.a}];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G={"core/code":D,"core/embed":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{url:{type:"string"},caption:{type:"string",source:"html",selector:"figcaption"},type:{type:"string"},providerNameSlug:{type:"string"},allowResponsive:{type:"boolean",default:!0}},{deprecated:{default:"1.2.0"}}),save:function(e){var t,n=e.attributes,r=n.url,o=n.caption,a=n.type,i=n.providerNameSlug;if(!r)return null;var c=v()("wp-block-embed",(t={},f()(t,"is-type-".concat(a),a),f()(t,"is-provider-".concat(i),i),t));return Object(b.createElement)("figure",{className:c},Object(b.createElement)("div",{className:"wp-block-embed__wrapper"},"\n".concat(r,"\n")),!x.RichText.isEmpty(o)&&Object(b.createElement)(x.RichText.Content,{tagName:"figcaption",value:o}))},migrate:T.a}],"core/html":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{content:{type:"string",source:"html"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes;return Object(b.createElement)(b.RawHTML,null,t.content)},migrate:T.a}],"core/image":M,"core/list":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{ordered:{type:"boolean",default:!1},values:{type:"string",source:"html",selector:"ol,ul",multiline:"li",default:""}},{deprecated:{default:"1.2.0"}}),supports:{className:!1},save:function(e){var t=e.attributes,n=t.ordered,r=t.values,o=n?"ol":"ul";return Object(b.createElement)(x.RichText.Content,{tagName:o,value:r,multiline:"li"})},migrate:T.a}],"core/preformatted":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{content:{type:"string",source:"html",selector:"pre",default:""}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes.content;return Object(b.createElement)(x.RichText.Content,{tagName:"pre",value:t})},migrate:T.a}],"core/pullquote":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{value:{type:"string",source:"html",selector:"blockquote",multiline:"p"},citation:{type:"string",source:"html",selector:"cite",default:""},mainColor:{type:"string"},customMainColor:{type:"string"},textColor:{type:"string"},customTextColor:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t,n,r=e.attributes,o=r.mainColor,a=r.customMainColor,i=r.textColor,c=r.customTextColor,l=r.value,s=r.citation,u=r.className;if(Object(O.includes)(u,"is-style-solid-color"))(t=Object(x.getColorClassName)("background-color",o))||(n={backgroundColor:a});else if(a)n={borderColor:a};else if(o){var p=Object(O.get)(Object(E.select)("core/block-editor").getSettings(),["colors"],[]);n={borderColor:Object(x.getColorObjectByAttributeValues)(p,o).color}}var d=Object(x.getColorClassName)("color",i),m=i||c?v()("has-text-color",f()({},d,d)):void 0,g=d?void 0:{color:c};return Object(b.createElement)("figure",{className:t,style:n},Object(b.createElement)("blockquote",{className:m,style:g},Object(b.createElement)(x.RichText.Content,{value:l,multiline:!0}),!x.RichText.isEmpty(s)&&Object(b.createElement)(x.RichText.Content,{tagName:"cite",value:s})))},migrate:T.a}],"core/quote":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{value:{type:"string",source:"html",selector:"blockquote",multiline:"p",default:""},citation:{type:"string",source:"html",selector:"cite",default:""},align:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes,n=t.align,r=t.value,o=t.citation;return Object(b.createElement)("blockquote",{style:{textAlign:n||null}},Object(b.createElement)(x.RichText.Content,{multiline:!0,value:r}),!x.RichText.isEmpty(o)&&Object(b.createElement)(x.RichText.Content,{tagName:"cite",value:o}))},migrate:T.a}],"core/table":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{hasFixedLayout:{type:"boolean",default:!1},backgroundColor:{type:"string"},head:{type:"array",default:[],source:"query",selector:"thead tr",query:{cells:{type:"array",default:[],source:"query",selector:"td,th",query:{content:{type:"string",source:"html"},tag:{type:"string",default:"td",source:"tag"},scope:{type:"string",source:"attribute",attribute:"scope"}}}}},body:{type:"array",default:[],source:"query",selector:"tbody tr",query:{cells:{type:"array",default:[],source:"query",selector:"td,th",query:{content:{type:"string",source:"html"},tag:{type:"string",default:"td",source:"tag"},scope:{type:"string",source:"attribute",attribute:"scope"}}}}},foot:{type:"array",default:[],source:"query",selector:"tfoot tr",query:{cells:{type:"array",default:[],source:"query",selector:"td,th",query:{content:{type:"string",source:"html"},tag:{type:"string",default:"td",source:"tag"},scope:{type:"string",source:"attribute",attribute:"scope"}}}}}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes,n=t.hasFixedLayout,r=t.head,o=t.body,a=t.foot,i=t.backgroundColor;if(!r.length&&!o.length&&!a.length)return null;var c=Object(x.getColorClassName)("background-color",i),l=v()(c,{"has-fixed-layout":n,"has-background":Boolean(c)}),s=function(e){var t=e.type,n=e.rows;if(!n.length)return null;var r="t".concat(t);return Object(b.createElement)(r,null,n.map((function(e,t){var n=e.cells;return Object(b.createElement)("tr",{key:t},n.map((function(e,t){var n=e.content,r=e.tag,o=e.scope;return Object(b.createElement)(x.RichText.Content,{tagName:r,value:n,key:t,scope:"th"===r?o:void 0})})))})))};return Object(b.createElement)("figure",null,Object(b.createElement)("table",{className:l},Object(b.createElement)(s,{type:"head",rows:r}),Object(b.createElement)(s,{type:"body",rows:o}),Object(b.createElement)(s,{type:"foot",rows:a})))},migrate:T.a}],"core/verse":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{content:{type:"string",source:"html",selector:"pre",default:""},textAlign:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes,n=t.textAlign,r=t.content;return Object(b.createElement)(x.RichText.Content,{tagName:"pre",style:{textAlign:n},value:r})},migrate:T.a}],"core/video":[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{autoplay:{type:"boolean",source:"attribute",selector:"video",attribute:"autoplay"},caption:{type:"string",source:"html",selector:"figcaption"},controls:{type:"boolean",source:"attribute",selector:"video",attribute:"controls",default:!0},id:{type:"number"},loop:{type:"boolean",source:"attribute",selector:"video",attribute:"loop"},muted:{type:"boolean",source:"attribute",selector:"video",attribute:"muted"},poster:{type:"string",source:"attribute",selector:"video",attribute:"poster"},preload:{type:"string",source:"attribute",selector:"video",attribute:"preload",default:"metadata"},src:{type:"string",source:"attribute",selector:"video",attribute:"src"},playsInline:{type:"boolean",source:"attribute",selector:"video",attribute:"playsinline"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes,n=t.autoplay,r=t.caption,o=t.controls,a=t.loop,i=t.muted,c=t.poster,l=t.preload,s=t.src,u=t.playsInline;return Object(b.createElement)("figure",null,s&&Object(b.createElement)("video",{autoPlay:n,controls:o,loop:a,muted:i,poster:c,preload:"metadata"!==l?l:void 0,src:s,playsInline:u}),!x.RichText.isEmpty(r)&&Object(b.createElement)(x.RichText.Content,{tagName:"figcaption",value:r}))},migrate:T.a}]};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={"1.2.0":function(e,t,n){var r={},o=Y({},e);if(o.id=n.anchor||st(),n.rotationAngle){var a=o.style?o.style:{};a=Y({},a,{transform:"rotate(".concat(parseInt(n.rotationAngle),"deg)")}),r.style=a}return n.ampFontFamily&&(r["data-font-family"]=n.ampFontFamily),Y({},o,{},r)}},X=n(26),J=n.n(X);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te={"1.2.0":function(e,t,n){var r=n.ampAnimationType,o=n.ampAnimationDelay,a=n.ampAnimationDuration,i=n.ampAnimationAfter,c=n.positionTop,l=n.positionLeft,s=n.width,u=n.height,p={};void 0!==c&&void 0!==l&&(p=ee({},p,{position:"absolute",top:"".concat(c||0,"%"),left:"".concat(l||0,"%")})),void 0!==s&&void 0!==u&&(p=ee({},p,{width:s?"".concat(ze("x",s),"%"):"0%",height:u?"".concat(ze("y",u),"%"):"0%"}));var d={};return r&&(d["animate-in"]=r,o&&(d["animate-in-delay"]=parseInt(o)+"ms"),a&&(d["animate-in-duration"]=parseInt(a)+"ms"),i&&(d["animate-in-after"]=i)),Object(b.createElement)("amp-story-grid-layer",{template:"vertical","data-block-name":t.name},Object(b.createElement)("div",J()({className:"amp-story-block-wrapper",style:p},d),e))}};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={"1.2.0":function(e,t){var n="core/image"===t,r="core/video"===t,o=I.i.includes(t),a=I.h.includes(t)&&!n,i={anchor:{type:"string",source:"attribute",attribute:"id",selector:"amp-story-grid-layer .amp-story-block-wrapper > *, amp-story-cta-layer"},ampAnimationType:{type:"string"},addedAttributes:{type:"number",default:0},ampAnimationAfter:{type:"string"},fontSize:{type:"string"},customFontSize:{type:"number"},ampFontFamily:{type:"string"},textColor:{type:"string"},customTextColor:{type:"string"},backgroundColor:{type:"string"},customBackgroundColor:{type:"string"},opacity:{type:"number",default:100}};return o&&(i.autoFontSize={type:"number",default:36},i.ampFitText={type:"boolean",default:!0}),Se(t)&&(i.positionTop={default:0,type:"number"},i.positionLeft={default:5,type:"number"},a&&(i.height={type:"number",default:Pe(t)},i.width={type:"number",default:250}),i.rotationAngle={type:"number",default:0},i.ampAnimationType={source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in"},i.ampAnimationDelay={source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-delay",default:0},i.ampAnimationDuration={source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-duration",default:0},i.ampAnimationAfter={source:"attribute",selector:".amp-story-block-wrapper",attribute:"animate-in-after"}),n&&(i.ampShowImageCaption={type:"boolean",default:!1}),r&&(i.ampShowCaption={type:"boolean",default:!1},i.autoplay=re({},e.attributes.autoplay,{default:!0}),i.playsInline=re({},e.attributes.playsInline,{default:!1}),i.loop=re({},e.attributes.loop,{default:!0}),i.controls=re({},e.attributes.controls,{default:!1})),Object.keys(i).forEach((function(t){void 0===i[t].default&&void 0!==e.attributes[t]&&void 0!==e.attributes[t].default&&(i[t].default=e.attributes[t].default)})),re({},e,{attributes:re({},e.attributes,{},i),supports:re({},e.supports,{anchor:!1})})}};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){var t=e.tagName;return[{attributes:ie({},{align:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var n=e.attributes,r=n.ampFitText,o=Ve(n),a=Ke(n);if(!r)return Object(b.createElement)(x.RichText.Content,{tagName:t,style:a,className:o,value:"{content}"});var i=t;return Object(b.createElement)(i,{style:a,className:o},Object(b.createElement)("amp-fit-text",{layout:"flex-item",className:"amp-text-content"},"{content}"))},migrate:T.a}]};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"y",(function(){return Se})),n.d(t,"B",(function(){return xe})),n.d(t,"Q",(function(){return Ce})),n.d(t,"o",(function(){return Pe})),n.d(t,"a",(function(){return Ie})),n.d(t,"f",(function(){return Ae})),n.d(t,"i",(function(){return Be})),n.d(t,"b",(function(){return Te})),n.d(t,"h",(function(){return De})),n.d(t,"U",(function(){return Re})),n.d(t,"w",(function(){return Me})),n.d(t,"N",(function(){return Fe})),n.d(t,"s",(function(){return ze})),n.d(t,"t",(function(){return Ue})),n.d(t,"q",(function(){return qe})),n.d(t,"c",(function(){return We})),n.d(t,"n",(function(){return Ve})),n.d(t,"v",(function(){return Ke})),n.d(t,"p",(function(){return Ge})),n.d(t,"E",(function(){return $e})),n.d(t,"F",(function(){return Ye})),n.d(t,"I",(function(){return Qe})),n.d(t,"K",(function(){return Je})),n.d(t,"J",(function(){return Ze})),n.d(t,"D",(function(){return et})),n.d(t,"G",(function(){return tt})),n.d(t,"H",(function(){return nt})),n.d(t,"C",(function(){return ot})),n.d(t,"l",(function(){return at})),n.d(t,"m",(function(){return ct})),n.d(t,"r",(function(){return lt})),n.d(t,"x",(function(){return st})),n.d(t,"T",(function(){return pt})),n.d(t,"u",(function(){return dt})),n.d(t,"A",(function(){return mt})),n.d(t,"j",(function(){return ft})),n.d(t,"R",(function(){return bt})),n.d(t,"M",(function(){return gt})),n.d(t,"L",(function(){return ht})),n.d(t,"d",(function(){return yt})),n.d(t,"e",(function(){return vt})),n.d(t,"g",(function(){return Ot})),n.d(t,"k",(function(){return jt})),n.d(t,"P",(function(){return Et})),n.d(t,"O",(function(){return St})),n.d(t,"S",(function(){return xt})),n.d(t,"z",(function(){return Ct}));var ue=window.ampStoriesFonts,pe=Object(E.select)("core/block-editor"),de=pe.getBlocksByClientId,me=pe.getBlockRootClientId,fe=pe.getBlockOrder,be=pe.getBlock,ge=pe.getClientIdsWithDescendants,he=pe.getSettings,ye=Object(E.select)("amp/story").getAnimatedBlocks,ve=Object(E.dispatch)("amp/story"),Oe=ve.addAnimation,je=ve.changeAnimationType,ke=ve.changeAnimationDuration,we=ve.changeAnimationDelay,_e=Object(E.dispatch)("core").saveMedia,Ee=Object(E.dispatch)("core/block-editor").updateBlockAttributes,Se=function(e){return I.c.includes(e)},xe=function(e){if(e&&void 0!==ue){var t=ue.find((function(t){return t.name===e}));if(t){var n=t.handle,r=t.src;if(n&&r)if(!document.getElementById(n)){var o=document.createElement("link");o.id=n,o.href=r,o.rel="stylesheet",o.type="text/css",o.media="all",o.crossOrigin="anonymous",document.head.appendChild(o)}}}},Ce=function(e){var t=e.name;return I.d.includes(t)?"amp/amp-story-page"!==t?se({},e,{parent:[""]}):e:se({},e,{parent:["amp/amp-story-page"]})},Pe=function(e){switch(e){case"core/quote":case"core/video":case"core/embed":return 200;case"core/pullquote":return 250;case"core/table":return 100;case"amp/amp-story-post-author":case"amp/amp-story-post-date":return 50;case"amp/amp-story-post-title":return 100;default:return 60}},Ie=function(e,t){if(!I.b.includes(t)||"core/template"===t)return e;if(e.attributes.deprecated&&oe[e.attributes.deprecated.default]){var n=oe[e.attributes.deprecated.default];if("function"==typeof n)return n(e,t)}var r="core/image"===t,o="core/video"===t,a="amp/amp-story-cta"===t,i=I.i.includes(t),c=I.h.includes(t)&&!r,l={addedAttributes:{type:"number",default:0},fontSize:{type:"string"},customFontSize:{type:"number"},ampFontFamily:{type:"string"},textColor:{type:"string"},customTextColor:{type:"string"},backgroundColor:{type:"string"},customBackgroundColor:{type:"string"},opacity:{type:"number",default:100}};return i&&(l.autoFontSize={type:"number",default:36},l.ampFitText={type:"boolean",default:!0}),a&&(l.anchor={type:"string",source:"attribute",attribute:"id",selector:"amp-story-cta-layer"}),Se(t)&&(l.anchor={type:"string"},l.positionTop={default:0,type:"number"},l.positionLeft={default:5,type:"number"},c&&(l.height={type:"number",default:Pe(t)},l.width={type:"number",default:250}),l.rotationAngle={type:"number",default:0},l.ampAnimationType={type:"string"},l.ampAnimationDelay={default:0},l.ampAnimationDuration={default:0},l.ampAnimationAfter={type:"string"}),r&&(l.ampShowImageCaption={type:"boolean",default:!1}),o&&(l.ampShowCaption={type:"boolean",default:!1},l.ampAriaLabel={type:"string",default:""},l.autoplay=se({},e.attributes.autoplay,{default:!0}),l.playsInline=se({},e.attributes.playsInline,{default:!1}),l.loop=se({},e.attributes.loop,{default:!0}),l.controls=se({},e.attributes.controls,{default:!1})),Object.keys(l).forEach((function(t){void 0===l[t].default&&void 0!==e.attributes[t]&&void 0!==e.attributes[t].default&&(l[t].default=e.attributes[t].default)})),se({},e,{attributes:se({},e.attributes,{},l),supports:se({},e.supports,{anchor:!1})})},Ae=function(e,t){if(!Se(t))return e;var n=e.deprecated?e.deprecated:[],r=G[t]||void 0;return r?se({},e,{deprecated:n=[].concat(d()(n),d()(r))}):e},Be=function(e,t){if(!Se(t))return e;var n={type:"raw",priority:20,selector:'amp-story-grid-layer[data-block-name="'.concat(t,'"]'),transform:function(e){var n=e.outerHTML,r=Object(S.getBlockAttributes)(t,n);return"amp/amp-story-text"===t&&(r.content||(r.content=e.textContent,r.tagName=e.nodeName,r.ampFitText=!1)),Object(S.createBlock)(t,r)}},r=e.transforms?se({},e.transforms):{},o=r.from?d()(r.from):[];return"core/list"===t&&(o=o.filter((function(e){return"prefix"!==e.type}))),o.push(n),se({},e,{transforms:se({},r,{from:o})})},Te=function(e,t,n){var r={};if(!I.b.includes(t.name))return e;if(n.deprecated&&Q[n.deprecated]){var o=Q[n.deprecated];if("function"==typeof o)return o(e,t,n)}if(n.rotationAngle){var a=e.style?e.style:{};a=se({},a,{transform:"rotate(".concat(parseInt(n.rotationAngle),"deg)")}),r.style=a}return n.ampFontFamily&&(r["data-font-family"]=n.ampFontFamily),se({},e,{},r)},Ne=document.createElement("div"),De=function(e,t,n){return!e.className&&n.includes("is-style-")&&0===n.indexOf("<amp-story-grid-layer")&&(Ne.innerHTML=n,Ne.children[0].children.length&&Ne.children[0].children[0].children.length&&Ne.children[0].children[0].children[0].className.includes("is-style-")&&(e.className=Ne.children[0].children[0].children[0].className)),e},Re=function(e,t,n){if(!e||!Se(t.name))return e;if(n.deprecated&&te[n.deprecated]){var r=te[n.deprecated];if("function"==typeof r)return r(e,t,n)}return e},Me=function(e){return d()(new Set(e.map((function(e){return e.parent})))).map((function(t){return e.filter((function(e){var n=e.parent,r=e.animationType;return n===t&&r})).map((function(e){var t=e.duration,n=e.delay;return(n?parseInt(n):0)+(t?parseInt(t):0)})).reduce((function(e,t){return Math.max(e,t)}),0)})).reduce((function(e,t){return e+t}),0)},Fe=function(){var e=document.querySelector(".editor-block-list__layout"),t=document.querySelector(".editor-block-navigation");if(e&&!document.getElementById("amp-story-editor")){var n=document.createElement("div");n.id="amp-story-editor";var r=document.createElement("div");if(r.id="amp-story-block-navigation",e.parentNode.replaceChild(n,e),!document.getElementById("amp-story-controls")){var o=document.createElement("div");o.id="amp-story-controls",n.appendChild(o),Object(b.render)(Object(b.createElement)(P.v,null),o)}if(n.appendChild(e),n.appendChild(r),Object(b.render)(Object(b.createElement)(P.c,null),r),!document.getElementById("amp-story-editor-carousel")){var a=document.createElement("div");a.id="amp-story-editor-carousel",n.appendChild(a),Object(b.render)(Object(b.createElement)(P.h,null),a)}}if(t){if(!document.getElementById("amp-story-shortcuts")){var i=document.createElement("div");i.id="amp-story-shortcuts",t.parentNode.parentNode.insertBefore(i,t.parentNode.nextSibling),Object(b.render)(Object(b.createElement)(P.s,null),i)}if(!document.getElementById("amp-story-media-inserter")){var c=document.createElement("div");c.id="amp-story-media-inserter",t.parentNode.parentNode.insertBefore(c,t.parentNode.nextSibling),Object(b.render)(Object(b.createElement)(P.k,null),c)}var l=document.createElement("div");l.id="amp-story-inserter";var s=t.parentNode.parentNode.querySelector(".block-editor-inserter").parentNode;s.parentNode.replaceChild(l,s),Object(b.render)(Object(b.createElement)(P.j,{position:"bottom right"}),l)}var u=document.querySelector(".block-editor-writing-flow__click-redirect");u&&u.remove()},Le=Object(_._x)("words","Word count type. Do not translate!","amp"),He=function(e,t,n,r,o){if(!e.offsetHeight||!e.offsetWidth)return!1;for(e.classList.toggle("is-measuring"),r++;r-o>1;){var a=Math.floor((o+r)/2);e.style.fontSize=a+"px";var i=e.offsetHeight,c=e.offsetWidth;i>t||c>n?r=a:o=a}return e.style.fontSize=o+"px",e.classList.toggle("is-measuring"),o},ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!n)if("x"===e)n=I.v;else{if("y"!==e)return 0;n=I.u}return Number((t/n*100).toFixed(2))},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n||("x"===e?n=I.v:"y"===e&&(n=I.u)),Math.round(t/100*n)},qe=function(){var e=Object(B.f)().width,t=Math.max(696,e);return{width:t,height:1/.75*t}},We=function(e,t){var n=t.filter(Boolean);if(!n)return e;if(1===n.length)e.backgroundColor=n[0].color;else{var r=n.map((function(e){return e.color||"transparent"})).join(", ");e.backgroundImage="linear-gradient(to bottom, ".concat(r,")")}return e},Ve=function(e){var t,n=e.className,r=e.ampFitText,o=e.backgroundColor,a=e.textColor,i=e.customBackgroundColor,c=e.customTextColor,l=e.opacity,s=Object(x.getColorClassName)("color",a),u=Object(x.getColorClassName)("background-color",o),p=l&&l<100;return v()(n,(t={"amp-text-content":!r,"has-text-color":a||c,"has-background":o||i},f()(t,s,s),f()(t,u,p?void 0:u),t))},Ke=function(e){var t=e.align,n=e.fontSize,r=e.customFontSize,o=e.ampFitText,a=e.backgroundColor,i=e.textColor,c=e.customBackgroundColor,l=e.customTextColor,s=e.opacity,u=Object(x.getColorClassName)("color",i),p=Object(E.select)("core/block-editor").getSettings(),d=p.colors,m=p.fontSizes,f=n?Object(x.getFontSize)(m,n,r).size:r,b=f&&(f/I.v*100).toFixed(2)+"vw";return{backgroundColor:Object(B.d)(d,Object(x.getColorObjectByAttributeValues)(d,a,c),c,s),color:u?void 0:l,fontSize:o?void 0:b,textAlign:t||void 0}},Ge=function(e){var t=e.attribute,n=e.placeholder,r=e.tagName,o=void 0===r?"p":r,a=e.isEditable,i=void 0!==a&&a;return{supports:{anchor:!0,reusable:!0},attributes:{align:{type:"string"}},save:Object(P.H)({tagName:o}),edit:Object(P.G)({attribute:t,placeholder:n,tagName:o,isEditable:i}),deprecated:ce({tagName:o})}},$e=function(e){var t=be(e);if(t){var n="core/image"===t.name,r="core/video"===t.name;if(n||r){var o=t.attributes;(!o.ampShowImageCaption&&n||!o.ampShowCaption&&r)&&o.caption&&0!==o.caption.length&&Ee(e,{caption:""})}}},Ye=function(e){var t=be(e);if(t&&I.b.includes(t.name)){var n=be(me(e));if(0===t.attributes.positionTop&&n){var r=Object(S.createBlock)(t.name);if(Object(O.every)(r.attributes,(function(e,n){return e===t.attributes[n]}))){var o=n.innerBlocks.map((function(e){return e.attributes.positionTop})).reduce((function(e,t){return Math.max(e,t)}),0);Ee(e,{positionTop:o>75?0:o+10})}}}},Qe=function(e){var t=be(e);if(t&&I.d.includes(t.name)&&"media"===t.attributes.autoAdvanceAfter){var n=de(fe(e));if(!(t.attributes.autoAdvanceAfterMedia&&n.find((function(e){return e.attributes.anchor===t.attributes.autoAdvanceAfterMedia})))){var r=n.find((function(e){var t=e.name;return I.o.includes(t)})),o=r?r.attributes.anchor:"";t.attributes.autoAdvanceAfterMedia!==o&&Ee(e,{autoAdvanceAfterMedia:o})}}},Xe=function(e){var t=e.name,n=e.clientId;switch(t){case"amp/amp-story-text":return document.querySelector("#block-".concat(n," .block-editor-rich-text__editable"));case"amp/amp-story-post-title":case"amp/amp-story-post-author":case"amp/amp-story-post-date":var r=t.replace("/","-");return document.querySelector("#block-".concat(n," .wp-block-").concat(r));default:return null}},Je=function(e){var t=e.name,n=e.clientId,r=e.attributes,o=r.width,a=r.height,i=r.ampFitText,c=r.content,l=r.autoFontSize;if(i)switch(t){case"amp/amp-story-text":var s=Xe(e);if(s&&c.length){var u=He(s,a,o,A.c,A.f);u&&l!==u&&Ee(n,{autoFontSize:u})}break;case"amp/amp-story-post-title":case"amp/amp-story-post-author":case"amp/amp-story-post-date":var p=Xe(e);if(p){var d=He(p,a,o,A.c,A.f);d&&l!==d&&Ee(n,{autoFontSize:d})}}},Ze=function(e){var t=e.name,n=e.clientId,r=e.attributes,o=r.width,a=r.height,i=r.ampFitText,c=r.content;if(!i)switch(t){case"amp/amp-story-text":var l=Xe(e);l&&c.length&&(l.offsetHeight>a&&Ee(n,{height:l.offsetHeight}),l.offsetWidth>o&&Ee(n,{width:l.offsetWidth}));break;case"amp/amp-story-post-title":case"amp/amp-story-post-author":case"amp/amp-story-post-date":var s=Xe(e);s&&(s.classList.toggle("is-measuring"),s.offsetHeight>a&&Ee(n,{height:s.offsetHeight}),s.offsetWidth>o&&Ee(n,{width:s.offsetWidth}),s.classList.toggle("is-measuring"))}},et=function(e){if(e){var t=e.attributes;t.deprecated&&"migrated"===t.deprecated&&Ee(e.clientId,{deprecated:null})}},tt=function(e){var t=be(e);if(t){var n=t.name,r=t.attributes;if("core/image"===n){var o=r.width,a=r.height;if(!o&&!a&&r.id>0){var i=(0,Object(E.select)("core").getMedia)(r.id);if(i&&i.media_details){var c=i.media_details,l=c.height,s=c.width,u=1;(I.v<s||I.u<l)&&(u=Math.max(s/I.v,l/I.u)),Ee(e,{width:Math.round(s/u),height:Math.round(l/u)})}}}}},nt=function(e){var t=be(e);if(t&&"amp/amp-story-text"===t.name){var n=!de(fe(e)).filter((function(t){return t.clientId!==e})).some((function(e){return"h1"===e.attributes.tagName})),r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.fontSize,r=e.customFontSize,o=e.positionTop,a=e.type,i=e.content,c=void 0===i?"":i;if(a&&"auto"!==a)return a;if(o>80)return"p";if("huge"===n||r&&r>40)return t?"h1":"h2";if("large"===n||r&&r>24)return"h2";var l=Object(w.count)(c,Le,{});return 4>=l?t?"h1":"h2":10>=l?"h2":"p"}(t.attributes,n);t.attributes.tagName!==r&&Ee(e,{tagName:r})}},rt=function e(t,n,r){var o,a=t.attributes.ampAnimationAfter;(a&&(o=r.find((function(e){return e.attributes.anchor===a}))),o)&&((ye()[n]||[]).find((function(e){return e.id===o.clientId}))||e(o,n,r));Oe(n,t.clientId,o?o.clientId:void 0)},ot=function(){var e=ye();if(Object(O.isEqual)({},e)){var t=de(ge()),n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value,l=me(c.clientId);if(l){var s=c.attributes,u=s.ampAnimationType,p=s.ampAnimationDuration,d=s.ampAnimationDelay;rt(c,l,t),je(l,c.clientId,u),ke(l,c.clientId,p?parseInt(String(p).replace("ms","")):void 0),we(l,c.clientId,d?parseInt(String(d).replace("ms","")):void 0)}}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}},at=function(e,t,n,r,o,a){return r&&o?Object(_.sprintf)(Object(_.__)("Block %s is the only block, and cannot be moved","amp"),e):a>0&&!o?Object(_.sprintf)(// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position
Object(_.__)("Move %1$s block from position %2$d down to position %3$d","amp"),e,t,n):a>0&&o?Object(_.sprintf)(Object(_.__)("Block %s is at the end of the content and can’t be moved down","amp"),e):a<0&&!r?Object(_.sprintf)(// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position
Object(_.__)("Move %1$s block from position %2$d up to position %3$d","amp"),e,t,n):a<0&&r?Object(_.sprintf)(Object(_.__)("Block %s is at the beginning of the content and can’t be moved up","amp"),e):void 0},it=function(e,t){return de(fe(e)).find((function(e){return e.name===t}))},ct=function(e){return it(e,"amp/amp-story-cta")},lt=function(e){return it(e,"amp/amp-story-page-attachment")},st=function(){return h()().replace(/^\d/,"a")},ut=function(e){var t=document.createElement("video");return t.muted=!0,t.crossOrigin="anonymous",t.preload="metadata",t.currentTime=.5,new Promise((function(n,r){t.addEventListener("error",r),t.addEventListener("canplay",(function(){var e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e.toBlob(n,"image/jpeg")})),t.src=e}))},pt=function(){var e=u()(i.a.mark((function e(t){var n,r,o,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.src,o=he(),a=o.__experimentalMediaUpload,e.next=4,ut(r);case 4:return c=e.sent,e.abrupt("return",new Promise((function(e,t){a({filesList:[c],onFileChange:function(t){var r=l()(t,1)[0],o=r.id,a=r.url;n&&o&&(_e({id:n,featured_media:o}),_e({id:o,meta:{amp_is_poster:!0}})),Object(C.isBlobURL)(a)||e(r)},onError:t})})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(e){var t=e.url;return Object(O.has)(e,["media_details","sizes",I.n,"source_url"])?t=e.media_details.sizes[I.n].source_url:Object(O.has)(e,["media_details","sizes","large","source_url"])&&(t=e.media_details.sizes.large.source_url),t},mt=function(e){var t=be(e);t&&(t.attributes.anchor||Ee(t.clientId,{anchor:st()}))},ft=k()((function(e,t,n){var r="function"==typeof t?t(e):t,o=r.reduce((function(t,n,o){return Math.abs(n-e)<Math.abs(r[t]-e)?o:t}),0),a=Math.abs(r[o]-e);return 0===n||a<n?r[o]:e})),bt=function(e){var t=document.querySelector(e);if(t){var n=document.createRange();n.selectNodeContents(t),n.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}},gt=function(e){if(!e||!e.url)return{mediaUrl:void 0,mediaId:void 0,mediaType:void 0,mediaAlt:void 0,poster:void 0};var t;if(e.media_type)t=e.media_type===I.x?I.x:I.m;else{if(e.type!==I.m&&e.type!==I.x)return{mediaUrl:void 0,mediaId:void 0,mediaType:void 0,mediaAlt:void 0,poster:void 0};t=e.type}var n=e.alt||e.title,r=e.url,o=I.x===t&&e.image&&e.image.src!==e.icon?e.image.src:void 0;return{mediaUrl:r,mediaId:e.id,mediaType:t,mediaAlt:n,poster:o}},ht=function(e){return{autoAdvanceAfter:e.amp_story_auto_advance_after,autoAdvanceAfterDuration:e.amp_story_auto_advance_after_duration}},yt=function(e,t,n){if("core/video"!==t.name||!e.props.children||!n.ampAriaLabel)return e;var r="figure"===e.type,a=Array.isArray(e.props.children)?e.props.children:[e.props.children],i=["amp-video","video"].includes(a[0].type);if(!r||!i)return e;var c=e,l=o()(a),s=l[0],u=l.slice(1),p=Object(b.cloneElement)(s,{"aria-label":n.ampAriaLabel},s.props.children);return b.cloneElement.apply(void 0,[c,{},p].concat(d()(u)))},vt=function(e){var t=document.createElement("textarea");t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},Ot=function(e,t,n){var r=[];return e.forEach((function(e){switch(e.name){case"amp/amp-story-page":return;case"amp/amp-story-page-attachment":case"amp/amp-story-cta":if(it(t,e.name)||n&&"amp/amp-story-cta"===e.name)return;r.push(e);break;default:I.b.includes(e.name)&&r.push(e)}})),r},jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return t.querySelector('[data-block="'.concat(e,'"]'))},kt=function(e){if(!e)return null;var t=e.name,n=e.clientId;return Se(t)?document.querySelector('.amp-page-child-block[data-block="'.concat(n,'"]')):null},wt=function(e,t){if(e<=I.v||t<=I.u){var n=I.v>e?I.v/e:1,r=I.u>t?I.u/t:1;return 1.25*Math.max(n,r)}return 1},_t=function(e,t){var n,r,o,a=kt(e),i=function(e){var t=e.name,n=e.clientId,r="amp/amp-story-cta"===t;return"amp/amp-story-page"===t?document.querySelector('[data-block="'.concat(n,'"]')):r?document.querySelector("amp-story-cta-button-".concat(n)):document.querySelector("#block-".concat(n))}(e),c=me(e.clientId),l=document.querySelector('[data-block="'.concat(c,'"]')),s=i.offsetWidth,u=i.offsetHeight,p=function(e,t){var n=t.getBoundingClientRect(),r=n.left,o=n.top,a=e.getBoundingClientRect();return{top:a.top-o,left:a.left-r}}(a,l),d=p.top,m=p.left;switch(t){case"fly-in-left":case"rotate-in-left":case"whoosh-in-left":n=-(m+s);break;case"fly-in-right":case"rotate-in-right":case"whoosh-in-right":n=I.v+m+s;break;case"fly-in-top":r=-(d+u);break;case"fly-in-bottom":r=I.u+d+u;break;case"drop":r=Math.max(160,d+u);break;case"pan-left":case"pan-right":o=wt(s,u),n=I.v-s*o,r=(I.u-u*o)/2;break;case"pan-down":case"pan-up":n=-s*(o=wt(s,u))/2,r=I.u-u*o;break;default:n=0}return{offsetX:n,offsetY:r,scalingFactor:o}},Et=function(e,t){var n=kt(e);if(n&&t){St(e,t);var r=_t(e,t),o=r.offsetX,a=r.offsetY,i=r.scalingFactor;o&&n.style.setProperty("--animation-offset-x","".concat(o,"px")),a&&n.style.setProperty("--animation-offset-y","".concat(a,"px")),i&&(n.style.setProperty("--animation-scale-start",i),n.style.setProperty("--animation-scale-end",i)),n.classList.add("story-animation-init-".concat(t))}},St=function(e,t){var n=kt(e);n&&t&&(n.classList.remove("story-animation-init-".concat(t)),n.classList.remove("story-animation-".concat(t)),n.style.removeProperty("--animation-offset-x"),n.style.removeProperty("--animation-offset-y"),n.style.removeProperty("--animation-scale-start"),n.style.removeProperty("--animation-scale-end"),n.style.removeProperty("--animation-duration"),n.style.removeProperty("--animation-delay"))},xt=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=kt(e);if(a&&t){var i=I.f[t]||0;a.classList.remove("story-animation-init-".concat(t)),a.style.setProperty("--animation-duration","".concat(n||i,"ms")),a.style.setProperty("--animation-delay","".concat(r||0,"ms")),a.classList.add("story-animation-".concat(t)),a.addEventListener("animationend",o,{once:!0})}else o()},Ct=function(e){var t=be(e);return t&&"amp/amp-story-page"===t.name}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t,n){"use strict";n.d(t,"v",(function(){return i})),n.d(t,"u",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"p",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return y})),n.d(t,"x",(function(){return v})),n.d(t,"r",(function(){return O})),n.d(t,"o",(function(){return j})),n.d(t,"n",(function(){return k})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return _})),n.d(t,"t",(function(){return E})),n.d(t,"s",(function(){return S})),n.d(t,"w",(function(){return x})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return P}));var r=n(20),o=n.n(r),a=n(1),i=328,c=553,l=40,s={default:30,"core/pullquote":180,"core/table":100,"core/code":45},u=["amp/amp-story-page","core/block","core/template"],p=["core/code","core/embed","core/image","core/list","core/preformatted","core/pullquote","core/quote","core/table","core/verse","core/video","amp/amp-story-text","amp/amp-story-post-author","amp/amp-story-post-date","amp/amp-story-post-title","core/html","core/block","core/template"],d=["amp/amp-story-text","amp/amp-story-post-author","amp/amp-story-post-date","amp/amp-story-post-title"],m=["amp/amp-story-text","amp/amp-story-post-author","amp/amp-story-post-date","amp/amp-story-post-title","amp/amp-story-cta","amp/amp-story-page-attachment"],f=["core/code","core/embed","core/image","core/list","core/pullquote","core/quote","core/table","core/video","amp/amp-story-text","amp/amp-story-post-author","amp/amp-story-post-date","amp/amp-story-post-title"],b=[].concat(p,["amp/amp-story-cta","amp/amp-story-page-attachment"]),g=[].concat(u,o()(b)),h=["amp/amp-story-cta","amp/amp-story-page-attachment"],y="image",v="video",O=[y],j=["core/video","core/audio"],k="amp_story_page",w={drop:1600,"fade-in":400,"fly-in-bottom":400,"fly-in-left":400,"fly-in-right":400,"fly-in-top":400,pulse:400,"rotate-in-left":600,"rotate-in-right":600,"twirl-in":1e3,"whoosh-in-left":400,"whoosh-in-right":400,"pan-left":1e3,"pan-right":1e3,"pan-down":1e3,"pan-up":1e3,"zoom-in":1e3,"zoom-out":1e3},_=[{value:"",label:Object(a.__)("None","amp")},{value:"drop",label:Object(a.__)("Drop","amp")},{value:"fade-in",label:Object(a.__)("Fade In","amp")},{value:"fly-in-bottom",label:Object(a.__)("Fly In Bottom","amp")},{value:"fly-in-left",label:Object(a.__)("Fly In Left","amp")},{value:"fly-in-right",label:Object(a.__)("Fly In Right","amp")},{value:"fly-in-top",label:Object(a.__)("Fly In Top","amp")},{value:"pulse",label:Object(a.__)("Pulse","amp")},{value:"rotate-in-left",label:Object(a.__)("Rotate In Left","amp")},{value:"rotate-in-right",label:Object(a.__)("Rotate In Right","amp")},{value:"twirl-in",label:Object(a.__)("Twirl In","amp")},{value:"whoosh-in-left",label:Object(a.__)("Whoosh In Left","amp")},{value:"whoosh-in-right",label:Object(a.__)("Whoosh In Right","amp")},{value:"pan-left",label:Object(a.__)("Pan Left","amp")},{value:"pan-right",label:Object(a.__)("Pan Right","amp")},{value:"pan-down",label:Object(a.__)("Pan Down","amp")},{value:"pan-up",label:Object(a.__)("Pan Up","amp")},{value:"zoom-in",label:Object(a.__)("Zoom In","amp")},{value:"zoom-out",label:Object(a.__)("Zoom Out","amp")}],E=["left","bottomLeft","topLeft"],S=["top","topRight","topLeft"],x=7,C=[-180,-165,-150,-135,-120,-105,-90,-75,-60,-45,-30,-15,0,15,30,45,60,75,90,105,120,135,150,165,180],P=10},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t,n){e.exports=n(58)()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";n.d(t,"i",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"m",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"g",(function(){return k})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return _})),n.d(t,"k",(function(){return E})),n.d(t,"h",(function(){return S})),n.d(t,"j",(function(){return x})),n.d(t,"e",(function(){return P})),n.d(t,"l",(function(){return I}));var r=n(30),o=n.n(r),a=n(34),i=n.n(a),c=n(28),l=n.n(c),s=n(10),u=n(1),p=n(7),d=n(24),m=window.ampStoriesEditorSettings,f=(void 0===m?{}:m).allowedVideoMimeTypes,b=void 0===f?["video/mp4"]:f,g=function(e,t){if(!e||!e.width||!e.height)return!1;var n=t.width,r=t.height;return e.width>=n&&e.height>=r},h=function(){var e=d.e;return{width:e,height:e*(9/16)}},y=function(e,t,n){if(!e)return n?[Object(u.__)("Selecting a featured image is required.","amp")]:[Object(u.__)("Selecting a featured image is recommended for an optimal user experience.","amp")];var r=[];if(["image/png","image/gif","image/jpeg"].includes(e.mime_type)||r.push(
/* translators: 1: .jpg, 2: .png. 3: .gif */
Object(u.sprintf)(Object(u.__)("The featured image must be in %1$s, %2$s, or %3$s format.","amp"),".jpg",".png",".gif")),!g(e.media_details,t)){var o=t.width,a=t.height;r.push(
/* translators: 1: minimum width, 2: minimum height. */
Object(u.sprintf)(Object(u.__)("The featured image should have a size of at least %1$s by %2$s pixels.","amp"),Math.ceil(o),Math.ceil(a)))}return 0===r.length?null:r},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!e)return[];3===(e=e.replace("#","")).length&&(e="".concat(e.charAt(0)).concat(e.charAt(0)).concat(e.charAt(1)).concat(e.charAt(1)).concat(e.charAt(2)).concat(e.charAt(2)));var n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return[n,r,o,(t=Math.min(100,Math.max(0,t)))/100]},O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=t?Object(p.getColorObjectByColorValue)(e,t.color)||Object(p.getColorObjectByAttributeValues)(e,t.slug,t.color||n):{color:n};if(o&&o.color){var a=v(o.color,r),i=l()(a,4),c=i[0],s=i[1],u=i[2],d=i[3];return"rgba(".concat(c,", ").concat(s,", ").concat(u,", ").concat(d,")")}},j=function(e,t){return e&&t?e>t?"landscape":t>e?"portrait":"square":null},k=function(e){var t=Object(s.template)("<p>".concat(e,"</p>"),{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g});return function(e){return t(e)}},w=function(e,t){if(e){var n=Object(s.get)(this,["options","allowedTypes"],null),r=this.get("select");n&&e.get("type")&&!function(e,t){var n=e.get("type"),r=e.get("mime");return!(!t.includes(n)&&!t.includes(r))&&!("video"===n&&!b.includes(r))}(e,n)?(this.secondary.set(d.b,new t({mimeType:e.get("mime")})),r&&r.model&&r.model.set("disabled",!0)):(this.secondary.unset(d.b),r&&r.model&&r.model.set("disabled",!1))}},_=function(e,t){e&&(("video"===Object(s.get)(e,["media_type"],null)||"video"===Object(s.get)(e,["attributes","type"],null))&&x(S(e))?this.secondary.set(d.a,new t({actualVideoMegabytesPerSecond:Math.round(S(e)/d.d),maxVideoMegabytesPerSecond:d.g})):this.secondary.unset(d.a))},E=function(){return Boolean(this.secondary.get(d.b))&&Boolean(this.secondary.get(d.a))},S=function(e){return Object(s.has)(e,["media_details","filesize"])&&Object(s.has)(e,["media_details","length"])?e.media_details.filesize/e.media_details.length:Object(s.has)(e,["attributes","filesizeInBytes"])&&Object(s.has)(e,["attributes","fileLength"])?e.attributes.filesizeInBytes/C(e.attributes.fileLength):null},x=function(e){return e>d.g*d.d},C=function(e){var t=e.split(":");return Object(s.reduce)(t,(function(e,n,r){var o=isNaN(parseInt(n))?0:parseInt(n),a=t.length-1-r;return e+Math.pow(60,a)*o}),0)},P=function(){var e=i()(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window,r=n.fetch,e.next=3,r(t,{method:"head"});case 3:return a=e.sent,e.abrupt("return",Number(a.headers.get("content-length")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.url,n=e.id,r=e.width,o=e.height,a=e.onSelect,i=e.dispatchImage,c={};c.url=t,c.thumbnail_url=t,c.timestamp=Object(s.now)(),n&&(c.attachment_id=n),r&&(c.width=r),o&&(c.height=o),a(c),i(n)}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var r=n(60),o=n(12);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(61);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&e.push(i)}else if("object"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(62),o=n(43),a=n(63);e.exports=function(e){return r(e)||o(e)||a()}},function(e,t){!function(){e.exports=this.wp.keycodes}()},function(e,t,n){"use strict";var r=n(0),o=(n(27),n(9),n(2)),a=n(8),i=n(5),c=n(1),l=n(26),s=n.n(l);var u=function(e){var t=e.value,n=void 0===t?"":t,o=e.options,a=e.onChange,i={value:"",label:Object(c.__)("Immediately","amp")};return Object(r.createElement)(It,{value:n,options:o,defaultOption:i,onChange:function(e){var t=e.value,n=e.block;return a(""===t?void 0:n.clientId)},label:Object(c.__)("Begin after","amp"),id:"amp-stories-animation-order-picker",ariaLabel:function(e){var t=e.value,n=e.blockType;return t?Object(c.sprintf)(Object(c.__)("Begin after: %s","amp"),n.title):Object(c.__)("Begin immediately","amp")},renderToggle:function(e){return Object(r.createElement)(W,s()({},e,{displayIcon:!1,alignIcon:"right"}))},renderOption:function(e){return Object(r.createElement)("span",{className:"components-preview-picker__dropdown-label"},Object(r.createElement)(W,s()({},e,{alignIcon:"right"})))}})},p=n(6),d=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("path",{d:"M15 15H5V5h10v10z"}))};d.defaultProps={width:"20",height:"20",viewBox:"0 0 20 20"};var m=Object(i.withSelect)((function(e,t){var n=t.clientId,r=t.page,o=e("core/block-editor").getBlock,a=e("amp/story").isPlayingAnimation,i=o(n);return{isImageBlock:i&&"core/image"===i.name,isPlayingAnimation:a(r,n)}})),f=Object(i.withDispatch)((function(e,t){var n=t.clientId,r=t.page,o=e("amp/story"),a=o.playAnimation,i=o.stopAnimation;return{onAnimationStart:function(){return a(r,n)},onAnimationStop:function(){return i(r,n)}}})),b=Object(a.compose)(m,f)((function(e){var t=e.animatedBlocks,n=e.onAnimationTypeChange,a=e.onAnimationDurationChange,i=e.onAnimationDelayChange,l=e.onAnimationAfterChange,s=e.animationType,m=e.animationDuration,f=e.animationDelay,b=e.animationAfter,g=e.onAnimationStart,h=e.onAnimationStop,y=e.isPlayingAnimation,v=e.isImageBlock,O=p.f[s]||0,j=p.e.filter((function(e){return!(e.value.startsWith("pan-")&&!v)}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.SelectControl,{label:Object(c.__)("Animation Type","amp"),value:s,options:j,onChange:function(e){n(e),a(p.f[e]||0),i(0)}}),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.RangeControl,{label:Object(c.__)("Duration (ms)","amp"),value:m,onChange:a,min:"0",max:"5000",placeholder:O,initialPosition:O}),Object(r.createElement)(o.RangeControl,{label:Object(c.__)("Delay (ms)","amp"),value:f||0,onChange:i,min:"0",max:"5000"}),Object(r.createElement)(u,{value:b,options:t(),onChange:l}),Object(r.createElement)(o.IconButton,{icon:y?d({width:20,height:20}):"controls-play",className:"is-button is-default",onClick:y?h:g},y?Object(c.__)("Stop Animation","amp"):Object(c.__)("Play Animation","amp"))))})),g=n(3),h=n(14),y=n.n(h),v=n(19),O=n.n(v),j=n(15),k=n.n(j),w=n(16),_=n.n(w),E=n(12),S=n.n(E),x=n(17),C=n.n(x),P=n(4),I=n.n(P),A=n(18),B=n.n(A),T=function(e){var t={srcClientId:null,srcIndex:null,type:null};if(!e.dataTransfer)return t;try{t=Object.assign(t,JSON.parse(e.dataTransfer.getData("text")))}catch(e){return t}return t},N=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"onDrop",(function(e,t){var r=n.props,o=r.block.clientId,a=r.moveBlockToPosition,i=r.getBlockIndex,c=T(e),l=c.srcClientId,s=c.srcIndex,u=c.type;if("block"===u&&l!==o){var p=i(o),d=n.getInsertIndex(t);a(l,s<p?d-1:d)}})),n.state={isDragging:!1},n}return C()(t,e),O()(t,[{key:"getInsertIndex",value:function(e){var t=this.props,n=t.block.clientId,r=t.getBlockIndex;if(void 0!==n){var o=r(n);return"top"===e.y?o:o+1}}},{key:"render",value:function(){var e=this,t=this.props,n=t.block,a=t.getBlockIndex,i=t.isSelected,l=t.onClick,s=t.unMovableBlock,u=n.clientId,p="block-navigation-item-".concat(u);if(s)return Object(r.createElement)("div",{className:"editor-block-navigation__item block-editor-block-navigation__item"},Object(r.createElement)(o.Button,{className:B()("components-button editor-block-navigation__item-button block-editor-block-navigation__item-button",{"is-selected":i}),onClick:l,id:p},Object(r.createElement)(W,{block:n,accessibilityText:i&&Object(c.__)("(selected block)","amp")})));var d={type:"block",srcIndex:a(u),srcClientId:u};return Object(r.createElement)("div",{className:B()("editor-block-navigation__item block-editor-block-navigation__item",{"block-editor-block-navigation__item-is-dragging":this.state.isDragging})},Object(r.createElement)(o.Draggable,{elementId:p,transferData:d,onDragStart:function(){return e.setState({isDragging:!0})},onDragEnd:function(){return e.setState({isDragging:!1})}},(function(t){var a=t.onDraggableStart,s=t.onDraggableEnd;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.DropZone,{className:e.state.isDragging?"is-dragging-block":void 0,onDrop:e.onDrop}),Object(r.createElement)("div",{className:"block-navigation__placeholder"}),Object(r.createElement)(o.Button,{className:B()("components-button editor-block-navigation__item-button block-editor-block-navigation__item-button",{"is-selected":i}),onClick:l,id:p,onDragStart:a,onDragEnd:s,draggable:!0},Object(r.createElement)(W,{block:n,accessibilityText:i&&Object(c.__)("(selected block)","amp")})))})))}}]),t}(r.Component),D=Object(i.withSelect)((function(e,t){var n=t.block.clientId,r=e("core/block-editor"),o=r.getBlockOrder,a=r.getBlockRootClientId,i=(0,r.getBlocksByClientId)(o(a(n))).map((function(e){return e.clientId})).reverse();return{getBlockIndex:function(e){return i.indexOf(e)}}})),R=Object(i.withDispatch)((function(e,t,n){var r=t.block.clientId,o=(0,n.select)("core/block-editor"),a=o.getBlockOrder,i=o.getBlockRootClientId,c=e("core/block-editor").moveBlockToPosition,l=i(r),s=a(l);return{moveBlockToPosition:function(e,t){var n=s.length-1-t;c(e,l,l,n)}}})),M=Object(a.compose)(D,R)(N);n(67);function F(e){var t=e.blocks,n=e.selectedBlockClientId,a=e.selectBlock,i=e.unMovableBlock;return Object(r.createElement)(r.Fragment,null,t.length>0&&Object(r.createElement)(o.DropZoneProvider,null,Object(r.createElement)("ul",{className:"editor-block-navigation__list block-editor-block-navigation__list",role:"list"},t.map((function(e){var t=e.clientId===n;return Object(r.createElement)("li",{key:e.clientId},Object(r.createElement)(M,{block:e,isSelected:t,onClick:function(){return a(e.clientId)}}))})))),i&&Object(r.createElement)("ul",{className:"editor-block-navigation__list block-editor-block-navigation__list editor-block-navigation__list__static",role:"list"},Object(r.createElement)("li",{key:i.clientId},Object(r.createElement)(M,{block:i,isSelected:i.clientId===n,onClick:function(){return a(i.clientId)}}))))}var L=Object(a.compose)(Object(i.withSelect)((function(e){var t=e("amp/story"),n=t.getCurrentPage,r=t.isReordering,o=e("core/block-editor"),a=o.getBlockOrder,i=o.getBlocksByClientId,c=o.getSelectedBlockClientId,l=n()?i(a(n())):[],s=l.find((function(e){var t=e.name;return!Object(g.y)(t)}));return{blocks:l=l.filter((function(e){var t=e.name;return Object(g.y)(t)})).reverse(),unMovableBlock:s,selectedBlockClientId:c(),isReordering:r()}})),Object(i.withDispatch)((function(e,t){var n=t.onSelect,r=void 0===n?function(){}:n;return{selectBlock:function(t){e("core/block-editor").selectBlock(t),r(t)}}})),Object(a.ifCondition)((function(e){return!e.isReordering})))((function(e){var t=e.unMovableBlock,n=e.blocks,a=e.selectBlock,i=e.selectedBlockClientId,l=n.length>0||t;return Object(r.createElement)(o.NavigableMenu,{role:"presentation",className:"block-editor-block-navigation__container"},Object(r.createElement)("p",{className:"block-editor-block-navigation__label"},Object(c.__)("Elements","amp")),l&&Object(r.createElement)(F,{blocks:n,selectedBlockClientId:i,selectBlock:a,unMovableBlock:t}),!l&&Object(r.createElement)("p",{className:"block-editor-block-navigation__paragraph"},Object(c.__)("No elements added to this page yet.","amp")))})),H=n(11),z=n(7),U=function(e){var t=e.clientId,n=e.name,a=e.attributes,i=e.innerBlocks,c=void 0===i?[]:i,l=Object(H.createBlock)(n,a,c);return Object(r.createElement)(o.Disabled,{className:"block-editor-block-preview__content editor-styles-wrapper","aria-hidden":!0},Object(r.createElement)(z.BlockEdit,{name:n,focus:!1,clientId:t,isLocked:!0,insertBlocksAfter:!1,attributes:l.attributes,setAttributes:function(){}}))},q=n(36),W=Object(i.withSelect)((function(e,t){var n=t.block,r=t.label;if(!n)return{content:r,icon:null};var o=e("core/editor").getEditedPostAttribute,a=e("core"),i=a.getAuthors,l=a.getMedia,s=Object(H.getBlockType)(n.name);r=s.title;var u="";switch(n.name){case"core/image":if(n.attributes.url&&(u=n.attributes.url.slice(n.attributes.url.lastIndexOf("/")).slice(1,30)).length>0&&(r=u),n.attributes.id){var p=l(n.attributes.id);p&&(r=p.caption.raw||p.title.raw||r)}break;case"amp/amp-story-text":n.attributes.content.length>0&&(u=n.attributes.content.replace(/<br>/g," ").replace(/<[^<>]+>/g,"").slice(0,30)),r=u.length>0?u:s.title;break;case"amp/amp-story-post-author":var d=i().find((function(e){return e.id===o("author")}));r=d?d.name:Object(c.__)("Post Author","amp");break;case"amp/amp-story-post-date":var m=o("date"),f=Object(q.__experimentalGetSettings)().formats.date,b=m||new Date;r=Object(q.dateI18n)(f,b);break;case"amp/amp-story-post-title":r=o("title")||s.title}return{content:r,icon:s.icon}}))((function(e){var t=e.content,n=e.icon,o=e.displayIcon,a=void 0===o||o,i=e.alignIcon,c=void 0===i?"left":i,l=e.accessibilityText,s=void 0!==l&&l;return Object(r.createElement)(r.Fragment,null,a&&"left"===c&&Object(r.createElement)(z.BlockIcon,{icon:n}),t.length>20?"".concat(t.substr(0,20),"…"):t,s&&Object(r.createElement)("span",{className:"screen-reader-text"},s),a&&"right"===c&&Object(r.createElement)(z.BlockIcon,{icon:n}))})),V=n(21),K=function(e){var t=e.blockClass,n=e.blockElementId,o=e.clientId,a=e.hasOverlay,i=e.isDraggable,c=e.isSelected,l=e.name,s=e.toggleIsEditing,u=e.toggleOverlay,p=e.text,d=e.textStyle,m=e.textWrapperClass,f=e.placeholder;return Object(r.createElement)(dt,{clientId:o,blockName:l,blockElementId:n,isDraggable:i,isMovable:!0},Object(r.createElement)("div",{role:"textbox",tabIndex:"-1",className:B()("is-not-editing","editor-rich-text","block-editor-rich-text",t),onClick:function(){c&&s(!0)},onMouseDown:function(e){1<e.detail&&e.preventDefault()},onKeyDown:function(e){e.stopPropagation(),V.ENTER===e.keyCode&&c&&(u(!1),s(!0))}},a&&Object(r.createElement)("div",{role:"textbox",tabIndex:"-1",className:"amp-overlay",onClick:function(e){u(!1),e.stopPropagation()},onKeyDown:function(e){e.stopPropagation(),V.ENTER===e.keyCode&&c&&(u(!1),s(!0))}}),Object(r.createElement)("div",{role:"textbox",className:m,style:d},p&&p.length?Object(r.createElement)(r.RawHTML,null,p):Object(r.createElement)("span",{className:"amp-text-placeholder"},f))))},G=function(e){var t=e.pages,n=e.currentPage,a=e.onClick;
/* translators: %s: Page number */return Object(r.createElement)("ul",{className:"amp-story-editor-carousel-item-list"},t.map((function(e,t){var i,l=e.clientId===n?"amp-story-editor-carousel-item amp-story-editor-carousel-item--active":"amp-story-editor-carousel-item";return Object(r.createElement)("li",{key:e.clientId,className:l},Object(r.createElement)(o.Tooltip,{text:(i=t+1,Object(c.sprintf)(Object(c.__)("Go to page %s","amp"),i))},Object(r.createElement)(o.Button,{onClick:function(t){t.preventDefault(),a(e.clientId)},disabled:e.clientId===n},Object(r.createElement)("span",{className:"screen-reader-text"},function(e){return Object(c.sprintf)(Object(c.__)("Page %s","amp"),e)}(t+1)))))})))},$=(n(68),50),Y=1,Q=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"translateWrapper",(function(){var e=document.querySelector("#amp-story-controls + .block-editor-block-list__layout");if(e){var t=n.props.currentIndex;n.props.isReordering?e.style.display="none":(e.style.display="",e.style.transform="translateX(calc(50% - ".concat(Y,"px - ").concat((p.v+$)/2,"px - ").concat(t*$,"px - ").concat(t*p.v,"px))"))}})),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.translateWrapper()}},{key:"componentDidUpdate",value:function(){this.translateWrapper()}},{key:"render",value:function(){var e=this.props,t=e.pages,n=e.currentPage,a=e.previousPage,i=e.nextPage,l=e.onChangePage,s=e.isReordering,u=function(e){l(e)};return s?Object(r.createElement)(He,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"amp-story-editor-carousel-navigation"},Object(r.createElement)(o.IconButton,{icon:"arrow-left-alt2",label:Object(c.__)("Previous Page","amp"),onClick:function(e){e.preventDefault(),u(a)},disabled:null===a}),Object(r.createElement)(G,{pages:t,currentPage:n,onClick:u}),Object(r.createElement)(o.IconButton,{icon:"arrow-right-alt2",label:Object(c.__)("Next Page","amp"),onClick:function(e){e.preventDefault(),u(i)},disabled:null===i})))}}]),t}(r.Component),X=Object(a.compose)(Object(i.withSelect)((function(e){var t=e("core/block-editor"),n=t.getBlockOrder,r=t.getBlocksByClientId,o=t.getAdjacentBlockClientId,a=e("amp/story"),i=a.getCurrentPage,c=a.isReordering,l=i(),s=r(n()),u=s.findIndex((function(e){return e.clientId===l}));return{pages:s,currentPage:l,currentIndex:Math.max(0,u),previousPage:i()?o(l,-1):null,nextPage:i()?o(l,1):null,isReordering:c()}})),Object(i.withDispatch)((function(e){var t=e("amp/story").setCurrentPage,n=e("core/block-editor").selectBlock;return{onChangePage:function(e){t(e),n(e)}}})))(Q),J=n(10);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function re(e){return ne(e)}function oe(e){return ne(e,!0)}function ae(e){var t=function(e){var t,n,r,o=e.ownerDocument,a=o.body,i=o&&o.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=i.clientLeft||a.clientLeft||0,top:r-=i.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=re(r),t.top+=oe(r),t}var ie,ce=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),le=/^(top|right|bottom|left)$/,se="currentStyle",ue="runtimeStyle",pe="left",de="px";function me(e,t){for(var n=0;n<e.length;n++)t(e[n])}function fe(e){return"border-box"===ie(e,"boxSizing")}"undefined"!=typeof window&&(ie=window.getComputedStyle?function(e,t,n){var r="",o=e.ownerDocument,a=n||o.defaultView.getComputedStyle(e,null);return a&&(r=a.getPropertyValue(t)||a[t]),r}:function(e,t){var n=e[se]&&e[se][t];if(ce.test(n)&&!le.test(t)){var r=e.style,o=r[pe],a=e[ue][pe];e[ue][pe]=e[se][pe],r[pe]="fontSize"===t?"1em":n||0,n=r.pixelLeft+de,r[pe]=o,e[ue][pe]=a}return""===n?"auto":n});var be=["margin","border","padding"],ge=-1,he=2,ye=1;function ve(e,t,n){var r,o,a,i=0;for(o=0;o<t.length;o++)if(r=t[o])for(a=0;a<n.length;a++){var c=void 0;c="border"===r?"".concat(r+n[a],"Width"):r+n[a],i+=parseFloat(ie(e,c))||0}return i}function Oe(e){return null!=e&&e==e.window}var je={};function ke(e,t,n){if(Oe(e))return"width"===t?je.viewportWidth(e):je.viewportHeight(e);if(9===e.nodeType)return"width"===t?je.docWidth(e):je.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,a=(ie(e),fe(e)),i=0;(null==o||o<=0)&&(o=void 0,(null==(i=ie(e,t))||Number(i)<0)&&(i=e.style[t]||0),i=parseFloat(i)||0),void 0===n&&(n=a?ye:ge);var c=void 0!==o||a,l=o||i;if(n===ge)return c?l-ve(e,["border","padding"],r):i;if(c){var s=n===he?-ve(e,["border"],r):ve(e,["margin"],r);return l+(n===ye?0:s)}return i+ve(e,be.slice(n),r)}me(["Width","Height"],(function(e){je["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],je["viewport".concat(e)](n))},je["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}}));var we={position:"absolute",visibility:"hidden",display:"block"};function _e(e){var t,n=arguments;return 0!==e.offsetWidth?t=ke.apply(void 0,n):function(e,t,n){var r,o={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=o[r])}(e,we,(function(){t=ke.apply(void 0,n)})),t}function Ee(e,t,n){var r=n;if("object"!==Z(t))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):ie(e,t);for(var o in t)t.hasOwnProperty(o)&&Ee(e,o,t[o])}me(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);je["outer".concat(t)]=function(t,n){return t&&_e(t,e,n?0:ye)};var n="width"===e?["Left","Right"]:["Top","Bottom"];je[e]=function(t,r){if(void 0===r)return t&&_e(t,e,ge);if(t){ie(t);return fe(t)&&(r+=ve(t,["padding","border"],n)),Ee(t,e,r)}}}));var Se=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return ae(e);!function(e,t){"static"===Ee(e,"position")&&(e.style.position="relative");var n,r,o=ae(e),a={};for(r in t)t.hasOwnProperty(r)&&(n=parseFloat(Ee(e,r))||0,a[r]=n+t[r]-o[r]);Ee(e,a)}(e,t)},isWindow:Oe,each:me,css:Ee,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var r in e)e.hasOwnProperty(r)&&(t.overflow[r]=e.overflow[r]);return t},scrollLeft:function(e,t){if(Oe(e)){if(void 0===t)return re(e);window.scrollTo(t,oe(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(Oe(e)){if(void 0===t)return oe(e);window.scrollTo(re(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},je);var xe=function(e,t,n){n=n||{},9===t.nodeType&&(t=Se.getWindow(t));var r=n.allowHorizontalScroll,o=n.onlyScrollIfNeeded,a=n.alignWithTop,i=n.alignWithLeft,c=n.offsetTop||0,l=n.offsetLeft||0,s=n.offsetBottom||0,u=n.offsetRight||0;r=void 0===r||r;var p,d,m,f,b,g,h,y,v,O,j=Se.isWindow(t),k=Se.offset(e),w=Se.outerHeight(e),_=Se.outerWidth(e);j?(h=t,O=Se.height(h),v=Se.width(h),y={left:Se.scrollLeft(h),top:Se.scrollTop(h)},b={left:k.left-y.left-l,top:k.top-y.top-c},g={left:k.left+_-(y.left+v)+u,top:k.top+w-(y.top+O)+s},f=y):(p=Se.offset(t),d=t.clientHeight,m=t.clientWidth,f={left:t.scrollLeft,top:t.scrollTop},b={left:k.left-(p.left+(parseFloat(Se.css(t,"borderLeftWidth"))||0))-l,top:k.top-(p.top+(parseFloat(Se.css(t,"borderTopWidth"))||0))-c},g={left:k.left+_-(p.left+m+(parseFloat(Se.css(t,"borderRightWidth"))||0))+u,top:k.top+w-(p.top+d+(parseFloat(Se.css(t,"borderBottomWidth"))||0))+s}),b.top<0||g.top>0?!0===a?Se.scrollTop(t,f.top+b.top):!1===a?Se.scrollTop(t,f.top+g.top):b.top<0?Se.scrollTop(t,f.top+b.top):Se.scrollTop(t,f.top+g.top):o||((a=void 0===a||!!a)?Se.scrollTop(t,f.top+b.top):Se.scrollTop(t,f.top+g.top)),r&&(b.left<0||g.left>0?!0===i?Se.scrollLeft(t,f.left+b.left):!1===i?Se.scrollLeft(t,f.left+g.left):b.left<0?Se.scrollLeft(t,f.left+b.left):Se.scrollLeft(t,f.left+g.left):o||((i=void 0===i||!!i)?Se.scrollLeft(t,f.left+b.left):Se.scrollLeft(t,f.left+g.left)))},Ce=n(37),Pe=n.n(Ce),Ie=n(38),Ae=n(52),Be=(n(69),function(e){return e.stopPropagation()}),Te=function(e){function t(e){var n;y()(this,t),n=k()(this,_()(t).call(this,e));var o=e.autocompleteRef;return n.onChange=n.onChange.bind(S()(n)),n.onKeyDown=n.onKeyDown.bind(S()(n)),n.autocompleteRef=o||Object(r.createRef)(),n.inputRef=Object(r.createRef)(),n.updateSuggestions=Object(J.throttle)(n.updateSuggestions.bind(S()(n)),200),n.suggestionNodes=[],n.state={suggestions:[],showSuggestions:!1,selectedSuggestion:null},n}return C()(t,e),O()(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.state,n=t.showSuggestions,r=t.selectedSuggestion;n&&null!==r&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,xe(this.suggestionNodes[r],this.autocompleteRef.current,{onlyScrollIfNeeded:!0}),this.props.setTimeout((function(){e.scrollingIntoView=!1}),100))}},{key:"componentWillUnmount",value:function(){delete this.suggestionsRequest,this.isStillMounted=!1}},{key:"componentDidMount",value:function(){this.isStillMounted=!0}},{key:"bindSuggestionNode",value:function(e){var t=this;return function(n){t.suggestionNodes[e]=n}}},{key:"fetchPostSuggestions",value:function(e){var t=this,n=this.props.searchablePostTypes||["post"],r=this.suggestionsRequest=Pe()({path:Object(Ie.addQueryArgs)("/wp/v2/search",{search:e,per_page:20,subtype:n.join(",")})}).then((function(e){t.isStillMounted&&t.suggestionsRequest===r&&(t.setState({suggestions:Object(J.map)(e,(function(e){return{id:e.id,title:Object(Ae.decodeEntities)(e.title)||Object(c.__)("(no title)","amp"),postType:e.subtype}})),loading:!1}),Boolean(e.length)?t.props.debouncedSpeak(Object(c.sprintf)(Object(c._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"amp"),e.length),"assertive"):t.props.debouncedSpeak(Object(c.__)("No results.","amp"),"assertive"))})).catch((function(){t.isStillMounted&&t.suggestionsRequest===r&&t.setState({loading:!1})}))}},{key:"updateSuggestions",value:function(e){e.length<2?this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1}):(this.setState({showSuggestions:!0,selectedSuggestion:null,loading:!0}),this.fetchPostSuggestions(e))}},{key:"onChange",value:function(e){var t=e.target.value;this.props.onChange(t),this.updateSuggestions(t)}},{key:"onKeyDown",value:function(e){var t=this.state,n=t.showSuggestions,r=t.selectedSuggestion,o=t.suggestions,a=t.loading;if(n&&o.length&&!a){var i=this.state.suggestions[this.state.selectedSuggestion];switch(e.keyCode){case V.UP:e.stopPropagation(),e.preventDefault();var l=r?r-1:o.length-1;this.setState({selectedSuggestion:l});break;case V.DOWN:e.stopPropagation(),e.preventDefault();var s=null===r||r===o.length-1?0:r+1;this.setState({selectedSuggestion:s});break;case V.TAB:null!==this.state.selectedSuggestion&&(this.selectPost(i),this.props.speak(Object(c.__)("Post selected.","amp")));break;case V.ENTER:null!==this.state.selectedSuggestion&&(e.stopPropagation(),this.selectPost(i));break;case V.ESCAPE:e.stopPropagation(),e.preventDefault(),this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1})}}else switch(e.keyCode){case V.UP:0!==e.target.selectionStart&&(e.stopPropagation(),e.preventDefault(),e.target.setSelectionRange(0,0));break;case V.DOWN:this.props.value.length!==e.target.selectionStart&&(e.stopPropagation(),e.preventDefault(),e.target.setSelectionRange(this.props.value.length,this.props.value.length))}}},{key:"selectPost",value:function(e){this.props.onSelect(e.id,e.postType),this.setState({selectedSuggestion:null,showSuggestions:!1})}},{key:"handleOnClick",value:function(e){this.selectPost(e),this.inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoFocus,a=void 0===n||n,i=t.value,l=void 0===i?"":i,s=t.instanceId,u=t.className,p=t.id,d=void 0===p?"post-selector":p,m=t.placeholder,f=t.labelText,b=this.state,g=b.showSuggestions,h=b.suggestions,y=b.selectedSuggestion,v=b.loading,O="block-editor-post-input-suggestions-".concat(s),j="block-editor-post-input-suggestion-".concat(s);return Object(r.createElement)("div",{className:B()("editor-post-input block-editor-post-input",u)},f&&Object(r.createElement)("label",{htmlFor:d},f),Object(r.createElement)("input",{id:d,type:"text","aria-label":Object(c.__)("Post search","amp"),required:!0,value:l,onChange:this.onChange,onInput:Be,onClick:Be,placeholder:m||Object(c.__)("Type to search","amp"),onKeyDown:this.onKeyDown,role:"combobox","aria-expanded":g,"aria-autocomplete":"list","aria-owns":O,"aria-activedescendant":null!==y?"".concat(j,"-").concat(y):void 0,ref:this.inputRef,autoFocus:a}),v&&Object(r.createElement)(o.Spinner,null),g&&Boolean(h.length)&&Object(r.createElement)(o.Popover,{position:"bottom",noArrow:!0,focusOnMount:!1},Object(r.createElement)("div",{className:B()("editor-post-input__suggestions","block-editor-post-input__suggestions","".concat(u,"__suggestions")),id:O,ref:this.autocompleteRef,role:"listbox"},h.map((function(t,n){return Object(r.createElement)("button",{key:t.id,role:"option",tabIndex:"-1",id:"".concat(j,"-").concat(n),ref:e.bindSuggestionNode(n),className:B()("editor-post-input__suggestion block-editor-post-input__suggestion",{"is-selected":n===y}),onClick:function(){return e.handleOnClick(t)},"aria-selected":n===y},t.title)})))))}}]),t}(r.Component),Ne=Object(a.compose)(a.withSafeTimeout,o.withSpokenMessages,a.withInstanceId)(Te),De=function(e){var t={srcRootClientId:null,srcClientId:null,srcIndex:null,type:null};if(!e.dataTransfer)return t;try{t=Object.assign(t,JSON.parse(e.dataTransfer.getData("text")))}catch(e){return t}return t},Re=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"onDrop",(function(e,t){var r=n.props,o=r.page.clientId,a=r.movePageToPosition,i=r.index,c=De(e),l=c.srcClientId,s=c.srcIndex,u=c.type;if("block"===u&&l!==o){var p=n.getInsertIndex(t);a(l,s<i?p-1:p)}})),n.state={isDragging:!1},n}return C()(t,e),O()(t,[{key:"getInsertIndex",value:function(e){var t=this.props.index;if(void 0!==t)return"right"===e.x?t+1:t}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,a=t.index,i=n.clientId,c="reorder-page-".concat(i),l={type:"block",srcIndex:a,srcClientId:i};return Object(r.createElement)("div",{className:"amp-story-reorderer-item"},Object(r.createElement)(o.Draggable,{elementId:c,transferData:l,onDragStart:function(){return e.setState({isDragging:!0})},onDragEnd:function(){return e.setState({isDragging:!1})}},(function(t){var a=t.onDraggableStart,i=t.onDraggableEnd;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.DropZone,{className:e.state.isDragging?"is-dragging-page":void 0,onDrop:e.onDrop}),Object(r.createElement)("div",{className:"amp-story-reorderer-item-page",id:c},Object(r.createElement)("div",{className:"amp-story-page-preview",onDragStart:a,onDragEnd:i,draggable:!0},Object(r.createElement)(U,n))))})))}}]),t}(r.Component),Me=Object(i.withSelect)((function(e,t){var n=t.page.clientId;return{index:(0,e("amp/story").getBlockIndex)(n)}})),Fe=Object(i.withDispatch)((function(e){return{movePageToPosition:e("amp/story").movePageToPosition}})),Le=Object(a.compose)(Me,Fe)(Re),He=(n(70),Object(i.withSelect)((function(e){return{pages:(0,e("core/block-editor").getBlocksByClientId)((0,e("amp/story").getBlockOrder)())}}))((function(e){var t=e.pages;return Object(r.createElement)(o.DropZoneProvider,null,Object(r.createElement)("div",{className:"amp-story-reorderer"},t.map((function(e){return Object(r.createElement)(Le,{key:"page-".concat(e.clientId),page:e})}))))}))),ze=(n(71),function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("path",{d:"M14 0h10v2H14V0zm0 7h10v2H14V7zm0 7h10v2H14v-2zm-2 1l-5 4v-3.069C3.06 15.436 0 12.072 0 8c0-4.411 3.589-8 8-8h3v2H8C4.691 2 2 4.691 2 8c0 2.967 2.167 5.431 5 5.91V11l5 4z",fill:"#555D66"}))});ze.defaultProps={width:"24",height:"19",viewBox:"0 0 24 19",xmlns:"http://www.w3.org/2000/svg"};var Ue=Object(a.compose)(Object(i.withSelect)((function(e){var t=e("amp/story").isReordering,n=e("core/block-editor").getBlockOrder;return{isReordering:t(),blockOrder:n()}})),Object(i.withDispatch)((function(e,t){var n=t.blockOrder,r=e("core/block-editor").clearSelectedBlock,o=e("amp/story"),a=o.startReordering,i=o.saveOrder,c=o.resetOrder;return{startReordering:function(){r(),a(n)},saveOrder:i,resetOrder:function(){return c(n)}}})))((function(e){var t=e.isReordering,n=e.startReordering,a=e.saveOrder,i=e.resetOrder;return t?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.IconButton,{className:"amp-story-controls-reorder-cancel",onClick:i,icon:"no-alt"},Object(c.__)("Cancel","amp")),Object(r.createElement)(o.Button,{className:"amp-story-controls-reorder-save",onClick:a,isLarge:!0,isPrimary:!0},Object(c.__)("Save Changes","amp"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ft,null),Object(r.createElement)(o.IconButton,{className:"amp-story-controls-reorder",icon:ze({width:24,height:19}),label:Object(c.__)("Reorder Pages","amp"),onClick:n}))})),qe=Object(i.withSelect)((function(e){var t=e("amp/story").getCurrentPage,n=e("core/block-editor"),r=n.canInsertBlockType,o=n.getBlockListSettings;return{isReordering:(0,e("amp/story").isReordering)(),canInsertBlockType:function(e){var n=o(t());return r(e,t())&&n&&n.allowedBlocks.includes(e)},showInserter:"visual"===e("core/edit-post").getEditorMode()&&e("core/editor").getEditorSettings().richEditingEnabled}})),We=Object(i.withDispatch)((function(e,t,n){var r=n.select,o=r("amp/story").getCurrentPage,a=r("core/block-editor").getBlockOrder,i=e("core/block-editor").insertBlock;return{insertBlock:function(e){var t=o(),n=a(t).length,r=Object(H.createBlock)(e,{});i(r,n,t)}}})),Ve=Object(a.compose)(qe,We,Object(a.ifCondition)((function(e){return!e.isReordering})))((function(e){var t=e.insertBlock,n=e.canInsertBlockType,a=e.showInserter;return["amp/amp-story-text","amp/amp-story-cta"].map((function(e){if(!n(e))return null;var i=Object(H.getBlockType)(e);return Object(r.createElement)(o.IconButton,{key:e,icon:Object(r.createElement)(z.BlockIcon,{icon:i.icon}),onClick:function(){return t(e)},label:i.title,labelPosition:"bottom",disabled:!a})}))})),Ke='div[data-amp-selected="parent"] .editor-inner-blocks',Ge=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"onDrop",(function(e){var t,r,o,a,i=n.props,c=i.srcBlockName,l=i.updateBlockAttributes,s=i.srcClientId,u="amp/amp-story-cta"===c;if(u){r="amp-story-cta-button-".concat(s),o="clone-amp-story-cta-button-".concat(s);var d="#block-".concat(s," .editor-block-list__block-edit");a=document.querySelector(d)}else r="block-".concat(s),o="clone-block-".concat(s),a=document.querySelector(Ke);var m=document.getElementById(r),f=document.getElementById(o);if(m&&f&&a){u||(f.parentNode.style.visibility="hidden",f.parentNode.style.transform="none");var b=f.getBoundingClientRect(),h=a.getBoundingClientRect(),y=u?"btnPositionLeft":"positionLeft",v=u?"btnPositionTop":"positionTop",O=p.u;u&&(O=p.u/5),l(s,(t={},I()(t,y,Object(g.s)("x",b.left-h.left)),I()(t,v,Object(g.s)("y",b.top-h.top,O)),t))}else e.preventDefault()})),n}return C()(t,e),O()(t,[{key:"render",value:function(){return Object(r.createElement)(o.DropZone,{className:"editor-block-drop-zone",onDrop:this.onDrop})}}]),t}(r.Component),$e=Object(i.withDispatch)((function(e){var t=e("core/block-editor").updateBlockAttributes;return{updateBlockAttributes:function(){t.apply(void 0,arguments)}}}))(Ge),Ye=n(20),Qe=n.n(Ye),Xe=window,Je=Xe.Image,Ze=Xe.navigator,et="components-draggable__clone",tt=function(){return/Chrome/i.test(Ze.userAgent)},nt=function(){return Qe()(document.getElementById("editor").querySelectorAll("iframe")).length>0},rt=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"onDragEnd",(function(e){var t=n.props.onDragEnd,r=void 0===t?J.noop:t;e&&e.preventDefault(),n.resetDragState(),n.props.setTimeout(r)})),I()(S()(n),"onDragOver",(function(e){var t=parseInt(n.cloneWrapper.style.top)+e.clientY-n.cursorTop;"amp/amp-story-cta"===n.props.blockName?n.cloneWrapper.style.top=t>=0?"".concat(t,"px"):"0px":n.cloneWrapper.style.top="".concat(t,"px"),n.cloneWrapper.style.left="".concat(parseInt(n.cloneWrapper.style.left)+e.clientX-n.cursorLeft,"px"),n.cursorLeft=e.clientX,n.cursorTop=e.clientY})),I()(S()(n),"onDrop",(function(){n.onDragEnd(null)})),I()(S()(n),"onDragStart",(function(e){var t=n.props,r=t.blockName,o=t.elementId,a=t.transferData,i=t.onDragStart,c=void 0===i?J.noop:i,l="amp/amp-story-cta"===r,s=l?document.getElementById(o):document.getElementById(o).parentNode;if(s)if(s.closest('div[data-type="amp/amp-story-page"]')){var u=new Je;u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(u,0,0),e.dataTransfer.setData("text",JSON.stringify(a));var d=s.parentNode;n.cloneWrapper=document.createElement("div"),n.cloneWrapper.classList.add(et),n.cloneWrapper.style.width="".concat(s.clientWidth,"px"),n.cloneWrapper.style.height="".concat(s.clientHeight,"px");var m=s.cloneNode(!0);n.cloneWrapper.style.transform=m.style.transform;var f=l?p.u/5:p.u;n.cloneWrapper.style.top="".concat(Object(g.t)("y",parseInt(m.style.top),f),"px"),n.cloneWrapper.style.left="".concat(Object(g.t)("x",parseInt(m.style.left),p.v),"px"),m.id="clone-".concat(o),m.style.top=0,m.style.left=0,m.style.transform="none",Qe()(m.querySelectorAll("iframe")).forEach((function(e){return e.parentNode.removeChild(e)})),n.cloneWrapper.appendChild(m),d.appendChild(n.cloneWrapper),n.cursorLeft=e.clientX,n.cursorTop=e.clientY,document.body.classList.add("is-dragging-components-draggable"),document.addEventListener("dragover",n.onDragOver),tt()&&nt()&&(n.isChromeAndHasIframes=!0,document.addEventListener("drop",n.onDrop)),n.props.setTimeout(c)}else e.preventDefault();else e.preventDefault()})),I()(S()(n),"resetDragState",(function(){document.removeEventListener("dragover",n.onDragOver),n.cloneWrapper&&n.cloneWrapper.parentNode&&(n.cloneWrapper.parentNode.removeChild(n.cloneWrapper),n.cloneWrapper=null),n.isChromeAndHasIframes&&(n.isChromeAndHasIframes=!1,document.removeEventListener("drop",n.onDrop)),document.body.classList.remove("is-dragging-components-draggable")})),n.isChromeAndHasIframes=!1,n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){document.querySelectorAll('.block-editor-block-list__block[data-type="core/image"] img').forEach((function(e){e.setAttribute("draggable","false")}))}},{key:"componentWillUnmount",value:function(){this.resetDragState()}},{key:"render",value:function(){return(0,this.props.children)({onDraggableStart:this.onDragStart,onDraggableEnd:this.onDragEnd})}}]),t}(r.Component),ot=Object(a.withSafeTimeout)(rt),at=Object(i.withSelect)((function(e,t){var n=t.clientId,r=e("core/block-editor"),o=r.getBlockIndex,a=(0,r.getBlockRootClientId)(n);return{index:o(n,a),rootClientId:a}}))((function(e){var t=e.children,n=e.clientId,o=e.blockName,a=e.rootClientId,i=e.blockElementId,c=e.index,l=e.onDragStart,s=e.onDragEnd,u={type:"block",srcIndex:c,srcRootClientId:a,srcClientId:n};return Object(r.createElement)(ot,{blockName:o,elementId:i,transferData:u,onDragStart:l,onDragEnd:s},(function(e){var n=e.onDraggableStart,r=e.onDraggableEnd;return t({onDraggableStart:n,onDraggableEnd:r})}))})),it=function(e){var t=e.children,n=e.blockName,o=e.className,a=e.onDragStart,i=e.onDragEnd,c=e.blockElementId,l=e.clientId;return Object(r.createElement)(at,{clientId:l,blockElementId:c,blockName:n,onDragStart:a,onDragEnd:i},(function(e){var n=e.onDraggableStart,a=e.onDraggableEnd;return Object(r.createElement)("div",{className:o,"aria-hidden":"true",onDragStart:n,onDragEnd:a,draggable:!0},t)}))},ct=n(32),lt=n.n(ct),st=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o))),I()(S()(n),"proxyEvent",(function(e){var t=Boolean(e.nativeEvent._blockHandled);e.nativeEvent._blockHandled=!0;var r=n.eventMap[e.type];t&&(r+="Handled"),n.props[r]&&n.props[r](e)})),n.eventMap={},n}return C()(t,e),O()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.childHandledEvents,o=void 0===n?[]:n,a=t.forwardedRef,i=lt()(t,["childHandledEvents","forwardedRef"]),c=Object(J.reduce)([].concat(Qe()(o),Qe()(Object.keys(i))),(function(t,n){var r=n.match(/^on([A-Z][a-zA-Z]+?)(Handled)?$/);if(r){Boolean(r[2])&&delete i[n];var o="on"+r[1];t[o]=e.proxyEvent,e.eventMap[r[1].toLowerCase()]=o}return t}),{});return Object(r.createElement)("div",s()({ref:a},i,c))}}]),t}(r.Component),ut=function(e,t){return Object(r.createElement)(st,s()({},e,{forwardedRef:t}))};ut.displayName="IgnoreNestedEvents";var pt=Object(r.forwardRef)(ut),dt=(n(73),function(e){function t(){return y()(this,t),k()(this,_()(t).apply(this,arguments))}return C()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.blockName,o=e.isDraggable,a=e.isMovable,i=e.onDragStart,c=e.clientId,l=e.blockElementId;return a&&o?Object(r.createElement)(pt,{childHandledEvents:["onDragStart","onMouseDown"],className:"block-mover"},Object(r.createElement)("div",null,Object(r.createElement)(it,{children:t,clientId:c,blockElementId:l,blockName:n,onDragStart:i}))):t}}]),t}(r.Component)),mt=(n(74),function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("path",{d:"M9 7h7v2H9v7H7V9H0V7h7V0h2v7z",fill:"#FFF"}))});mt.defaultProps={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};var ft=function(){var e=Object(i.useDispatch)("core/block-editor").insertBlock;return Object(r.createElement)("div",{className:"block-editor-inserter"},Object(r.createElement)(o.IconButton,{icon:mt({width:16,height:16}),label:Object(c.__)("Insert Blank Page","amp"),onClick:function(){e(Object(H.createBlock)("amp/amp-story-page"))},className:"editor-inserter__amp-inserter"}))},bt=n(53),gt=n.n(bt),ht=function(e){var t=e.length,n=e.queryLength,o=e.minQueryLength,a=e.selectedOption,i=e.selectedOptionIndex,c=e.tQueryTooShort,l=e.tNoResults,s=e.tSelectedOption,u=e.tResults,p=n<o,d=0===t,m=a?s(a,t,i):"",f=null;return f=p?c(o):d?l():u(t,m),Object(r.createElement)("div",{"aria-atomic":"true","aria-live":"polite",role:"status",style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},f,p&&",".repeat(n))},yt=(n(76),n(77),function(e){function t(){return y()(this,t),k()(this,_()(t).apply(this,arguments))}return C()(t,e),O()(t,[{key:"handleInputBlur",value:function(){}},{key:"handleClearClick",value:function(){this.state.query="",this.forceUpdate(),this.props.onConfirm(null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cssNamespace,a=t.displayMenu,i=t.id,l=t.minLength,s=t.name,u=t.placeholder,p=t.required,d=t.tNoResults,m=t.tStatusQueryTooShort,f=t.tStatusSelectedOption,b=t.tStatusResults,g=t.ariaLabelBy,h=this.state,y=h.focused,v=h.hovered,O=h.menuOpen,j=h.options,k=h.query,w=h.selected,_=this.hasAutoselect(),E=-1===y,S=0===j.length,x=k?k.length:0,C=0!==x,P=x>=l,I=this.props.showNoOptionsFound&&E&&S&&C&&P,A="".concat(n,"__wrapper"),B="".concat(n,"__input"),T=null!==y?" ".concat(B,"--focused"):"",N=this.props.showAllValues?" ".concat(B,"--show-all-values"):" ".concat(B,"--default"),D=-1!==y&&null!==y,R="".concat(n,"__menu"),M="".concat(R,"--").concat(a),F=O||I,L="".concat(R,"--").concat(F?"visible":"hidden"),H="".concat(n,"__option"),z="".concat(n,"__hint"),U=this.templateInputValue(j[w]),q=U&&0===U.toLowerCase().indexOf(k.toLowerCase())&&_?k+U.substr(x):"";return Object(r.createElement)("div",{className:A,onKeyDown:this.handleKeyDown,role:"combobox",tabIndex:"-1","aria-expanded":O?"true":"false"},Object(r.createElement)(ht,{length:j.length,queryLength:x,minQueryLength:l,selectedOption:this.templateInputValue(j[w]),selectedOptionIndex:w,tQueryTooShort:m,tNoResults:d,tSelectedOption:f,tResults:b}),q&&Object(r.createElement)("span",null,Object(r.createElement)("input",{className:z,readOnly:!0,tabIndex:"-1",value:q})),Object(r.createElement)("input",{"aria-activedescendant":D?"".concat(i,"__option--").concat(y):"","aria-owns":"".concat(i,"__listbox"),autoComplete:"off",className:"".concat(B).concat(T).concat(N),id:i,onClick:function(t){return e.handleInputClick(t)},onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,name:s,placeholder:u,ref:function(t){e.elementReferences[-1]=t},type:"text",required:p,value:k}),k&&!O&&P&&Object(r.createElement)(o.IconButton,{icon:"no",label:Object(c.__)("Clear Font","amp"),onClick:function(t){return e.handleClearClick(t)},className:"autocomplete__icon"}),Object(r.createElement)("ul",{className:"".concat(R," ").concat(M," ").concat(L),onMouseLeave:function(t){return e.handleListMouseLeave(t)},id:"".concat(i,"__listbox"),"aria-labelledby":g,role:"listbox"},j.map((function(t,n){var o=(-1===y?w===n:y===n)&&null===v?" ".concat(H,"--focused"):"",a=n%2?" ".concat(H,"--odd"):"";return Object(r.createElement)("li",{"aria-selected":y===n,className:"".concat(H).concat(o).concat(a),dangerouslySetInnerHTML:{__html:e.templateSuggestion(t)},id:"".concat(i,"__option--").concat(n),key:n,onBlur:function(t){return e.handleOptionBlur(t,n)},onClick:function(t){return e.handleOptionClick(t,n)},onKeyDown:function(t){return e.handleOptionClick(t,n)},onMouseEnter:function(t){return e.handleOptionMouseEnter(t,n)},ref:function(t){e.elementReferences[n]=t},role:"option",tabIndex:"-1"})})),I&&Object(r.createElement)("li",{className:"".concat(H," ").concat(H,"--no-results"),role:"option",tabIndex:"-1"},d())))}}]),t}(gt.a));var vt=Object(a.withInstanceId)((function(e){var t=e.fonts,n=void 0===t?[]:t,a=e.onChange,i=void 0===a?function(){}:a,l=e.value,s=void 0===l?"":l,u=e.instanceId,p=n,d="amp-stories-font-family-picker-".concat(u);return Object(r.createElement)(o.BaseControl,{label:Object(c.__)("Font Family","amp"),id:d,help:Object(c.__)("Type to search for fonts","amp")},Object(r.createElement)(yt,{id:d,name:d,source:function(e,t){t(e?p.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())})):[])},templates:{suggestion:function(e){Object(g.B)(e.name);var t=e.fallbacks?", "+e.fallbacks.join(", "):"";return e&&"<span style='font-family: ".concat(e.name).concat(t,"'>").concat(e.name,"</span>")},inputValue:function(e){return e&&e.name}},ariaLabelBy:"".concat(d,"__help"),minLength:2,onConfirm:i,showAllValues:!1,confirmOnBlur:!1,defaultValue:s||"",dropdownArrow:function(){return""},preserveNullOptions:!0,placeholder:Object(c.__)("None","amp"),displayMenu:"overlay",tNoResults:function(){return Object(c.__)("No font found","amp")},tStatusQueryTooShort:function(e){// translators: %d: the number characters required to initiate a font search.
return Object(c.sprintf)(Object(c.__)("Type in %s or more characters for results","amp"),e)},tStatusSelectedOption:function(e,t){// translators: 1: the index of the selected result. 2: The total number of results.
return Object(c.sprintf)(Object(c.__)("%s (1 of %s) is selected","amp"),e,t)},tStatusResults:function(e,t){return Object(c.sprintf)(// translators: %d: The total number of results.
Object(c._n)("%d font is available. %s","%d fonts are available. %s",e,"amp"),e,t)}}))})),Ot=(n(78),function(e){function t(e){var n;return y()(this,t),n=k()(this,_()(t).call(this,e)),I()(S()(n),"onKeyUp",(function(e){if(n.state.isRotating){e.preventDefault();var t=e.keyCode;if(V.ESCAPE===t)n.elementRef.classList.remove("is-rotating"),n.elementRef.style.transform="rotate(".concat(n.props.initialAngle,"deg)"),n.setState({isRotating:!1,angle:n.props.initialAngle},(function(){return n.props.onRotateStop&&n.props.onRotateStop(e,n.props.initialAngle)}));else if(V.LEFT===t||V.RIGHT===t){var r=V.LEFT===t?n.state.angle-30:n.state.angle+30;r>360?r-=360:r<=-360&&(r+=360),n.elementRef.style.transform="rotate(".concat(r,"deg)"),
/* translators: %s: degrees */
n.props.speak(Object(c.sprintf)(Object(c.__)("Rotating block by %s degrees","amp"),r)),n.setState({angle:r},(function(){return n.props.onRotate&&n.props.onRotate(e,r)}))}else V.ENTER===t&&(
/* translators: %s: degrees */
n.props.speak(Object(c.sprintf)(Object(c.__)("Saving block rotation of %s degrees","amp"),n.state.angle)),n.onRotateStop(e))}})),I()(S()(n),"onRotateStart",(function(e){n.state.isRotating||(e.button&&2===e.button||(e.preventDefault(),n.elementRef.classList.add("is-rotating"),n.setState({isRotating:!0},(function(){return n.props.onRotateStart&&n.props.onRotateStart(e)}))))})),I()(S()(n),"onRotate",(function(e){if(n.state.isRotating){e.preventDefault(),n.elementRef.classList.add("is-rotating");var t=n.elementRef.getBoundingClientRect(),r=t.top,o=t.left+t.width/2,a=r+t.height/2,i=e.clientX-o,c=e.clientY-a,l=180/Math.PI,s=Math.ceil(-l*Math.atan2(i,c));s=Object(g.j)(s,n.props.snap,n.props.snapGap),n.state.angle!==s&&(n.elementRef.style.transform="rotate(".concat(s,"deg)"),n.setState({angle:s},(function(){return n.props.onRotate&&n.props.onRotate(e,s)})))}})),I()(S()(n),"onRotateStop",(function(e){n.state.isRotating&&(e.preventDefault(),n.elementRef.classList.remove("is-rotating"),n.elementRef.style.transform="rotate(".concat(n.state.angle,"deg)"),n.setState({isRotating:!1},(function(){return n.props.onRotateStop&&n.props.onRotateStop(e,n.state.angle)})))})),n.state={isRotating:!1,angle:e.angle},n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.elementRef=document.getElementById(this.props.blockElementId)}},{key:"render",value:function(){var e=B()(this.props.className,{"is-rotating":this.state.isRotating});return Object(r.createElement)("div",{className:e},Object(r.createElement)("div",{className:"rotatable-box-wrap"},Object(r.createElement)(o.Button,{role:"switch","aria-checked":this.state.isRotating,onMouseDown:this.onRotateStart,className:"rotatable-box-wrap__handle"},Object(r.createElement)("span",{className:"screen-reader-text"},Object(c.__)("Rotate Block","amp")))),this.props.children)}}]),t}(r.Component));Ot.defaultProps={angle:0,initialAngle:0,snapGap:0};var jt=Object(a.compose)(o.withSpokenMessages,Object(a.withGlobalEvents)({mousemove:"onRotate",mouseup:"onRotateStop",keyup:"onKeyUp"}))(Ot),kt=n(28),wt=n.n(kt),_t=(n(79),function(e,t){function n(n){e.current&&!e.current.contains(n.target)&&t()}Object(r.useEffect)((function(){return e.current&&e.current.innerHTML&&document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}))}),Et="amp-story-right-click-menu__popover block-editor-block-settings-menu__popover editor-block-settings-menu__popover",St="bottom left",xt=Object(i.withSelect)((function(e){var t=e("core/block-editor");return{getBlock:t.getBlock,getBlockOrder:t.getBlockOrder,getBlockRootClientId:t.getBlockRootClientId,getSettings:t.getSettings,getCopiedMarkup:e("amp/story").getCopiedMarkup}})),Ct=Object(i.withDispatch)((function(e,t){var n=t.getBlock,r=t.getBlockOrder,o=t.getBlockRootClientId,a=t.getCopiedMarkup,i=t.getSettings,c=e("core/block-editor"),l=c.removeBlock,s=c.insertBlock,u=c.insertBlocks,d=c.updateBlockAttributes,m=e("amp/story").setCopiedMarkup,f=i().__experimentalCanUserUseUnfilteredHTML,b=function(e){var t=n(e),r=Object(H.serialize)(t);m(r),Object(g.e)(r)},h=function(e,t,a,i){var c,l=Object(H.pasteHandler)({HTML:"",plainText:e,mode:"BLOCKS",tagName:null,canUserUseUnfilteredHTML:f}),s=n(t);if((c="amp/amp-story-page"===s.name?s.clientId:o(t))&&l.length){var m=0===r().indexOf(c);u(Object(g.g)(l,c,m),null,c).then((function(e){var t=e.blocks,n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var s=c.value;p.c.includes(s.name)&&d(s.clientId,{positionTop:a,positionLeft:i})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}})).catch((function(){}))}};return{removeBlock:l,duplicateBlock:function(e){var t=n(e);if(!p.l.includes(t.name)){var r=o(e),a=Object(H.cloneBlock)(t);s(a,null,r)}},copyBlock:b,cutBlock:function(e){b(e),l(e)},pasteBlock:function(e,t,n){var r=window.navigator;if(r.clipboard&&r.clipboard.readText)r.clipboard.readText().then((function(r){h(r,e,t,n)})).catch((function(){var r=a();h(r,e,t,n)}));else{var o=a();h(o,e,t,n)}}}})),Pt=Object(a.compose)(xt,Ct)((function(e){var t=e.clientIds,n=e.clientX,a=e.clientY,i=e.insidePercentageX,l=e.insidePercentageY,s=e.copyBlock,u=e.cutBlock,d=e.getBlock,m=e.getCopiedMarkup,f=e.removeBlock,b=e.duplicateBlock,h=e.pasteBlock,y=Object(r.useState)(!0),v=wt()(y,2),O=v[0],j=v[1];Object(r.useEffect)((function(){j(!0)}),[t,n,a]);var k=Object(J.castArray)(t)[0],w=d(k),_=function(){j(!1)},E=Object(r.useRef)(null);_t(E,_);var S={top:a,left:n},x=[];return Object(g.z)(k)||(x=[{name:Object(c.__)("Copy Block","amp"),blockAction:s,icon:"admin-page",className:"right-click-copy"},{name:Object(c.__)("Cut Block","amp"),blockAction:u,icon:"clipboard",className:"right-click-cut"}],w&&!p.l.includes(w.name)&&x.push({name:Object(c.__)("Duplicate Block","amp"),blockAction:b,icon:"admin-page",className:"right-click-duplicate"}),x.push({name:Object(c.__)("Remove Block","amp"),blockAction:f,icon:"trash",className:"right-click-remove"})),!m().length&&Object(g.z)(k)?"":(m().length&&x.push({name:Object(c.__)("Paste","amp"),blockAction:h,icon:"pressthis",className:"right-click-paste"}),Object(r.createElement)("div",{ref:E,className:"amp-right-click-menu__container",style:S},O&&Object(r.createElement)(o.Popover,{className:Et,position:St,onClose:_,focusOnMount:"firstElement"},Object(r.createElement)(o.NavigableMenu,{role:"menu"},x.map((function(e){return Object(r.createElement)(o.MenuGroup,{key:"action-".concat(e.name)},Object(r.createElement)(o.MenuItem,{className:B()(e.className,"editor-block-settings-menu__control block-editor-block-settings-menu__control"),onClick:function(){_(),e.blockAction(k,l,i)},icon:e.icon},e.name))}))))))}));n(80);var It=function(e){var t=e.value,n=e.options,a=e.defaultOption,i=e.onChange,c=e.label,l=e.id,s=e.renderToggle,u=e.renderOption,p=e.ariaLabel,d=n.find((function(e){return t&&e.value===t}))||a;return Object(r.createElement)(o.BaseControl,{label:c,id:l},Object(r.createElement)("div",{className:"components-preview-picker__buttons"},Object(r.createElement)(o.Dropdown,{className:"components-preview-picker__dropdown",contentClassName:"components-preview-picker__dropdown-content",position:"bottom",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(o.Button,{className:"components-preview-picker__selector",isLarge:!0,onClick:n,"aria-expanded":t,"aria-label":p(d),id:l},s(d))},renderContent:function(){return Object(r.createElement)(o.NavigableMenu,null,[a].concat(Qe()(n)).map((function(e){var t=e.value===d.value;return Object(r.createElement)(o.Button,{key:e.value,onClick:function(){return i(e)},role:"menuitemradio","aria-checked":t},t&&Object(r.createElement)(o.Dashicon,{icon:"saved"}),u(e))})))}})))};var At=function(e){var t=e.icon,n=e.hasChildBlocksWithInserterSupport,o=e.onClick,a=e.isDisabled,i=e.title,c=e.className,l=lt()(e,["icon","hasChildBlocksWithInserterSupport","onClick","isDisabled","title","className"]),u=t?{backgroundColor:t.background,color:t.foreground}:{},p=t&&t.shadowColor?{backgroundColor:t.shadowColor}:{};return Object(r.createElement)("li",{className:"editor-block-types-list__list-item block-editor-block-types-list__list-item"},Object(r.createElement)("button",s()({className:B()("editor-block-types-list__item block-editor-block-types-list__item",c,{"editor-block-types-list__item-has-children block-editor-block-types-list__item-has-children":n}),onClick:function(e){e.preventDefault(),o()},disabled:a,"aria-label":i},l),Object(r.createElement)("span",{className:"editor-block-types-list__item-icon block-editor-block-types-list__item-icon",style:u},Object(r.createElement)(z.BlockIcon,{icon:t,showColors:!0}),n&&Object(r.createElement)("span",{className:"editor-block-types-list__item-icon-stack block-editor-block-types-list__item-icon-stack",style:p})),Object(r.createElement)("span",{className:"editor-block-types-list__item-title block-editor-block-types-list__item-title"},i)))};var Bt,Tt,Nt,Dt,Rt,Mt,Ft,Lt,Ht,zt=function(e){var t=e.items,n=e.onSelect,o=e.onHover,a=void 0===o?function(){}:o,i=e.children;return Object(r.createElement)("ul",{role:"list",className:"editor-block-types-list block-editor-block-types-list"},t&&t.map((function(e){return Object(r.createElement)(At,{key:e.id,className:Object(H.getBlockMenuDefaultClassName)(e.id),icon:e.icon,hasChildBlocksWithInserterSupport:e.hasChildBlocksWithInserterSupport,onClick:function(){n(e),a(null)},onFocus:function(){return a(e)},onMouseEnter:function(){return a(e)},onMouseLeave:function(){return a(null)},onBlur:function(){return a(null)},isDisabled:e.isDisabled,title:e.title})})),i)},Ut=function(e){return e.stopPropagation()},qt=function(e,t){var n=Wt(t),r=function(e){return-1!==Wt(e).indexOf(n)},o=Object(H.getCategories)();return e.filter((function(e){var t=Object(J.find)(o,{slug:e.category});return r(e.title)||Object(J.some)(e.keywords,r)||t&&r(t.title)}))},Wt=function(e){return e=(e=(e=(e=Object(J.deburr)(e)).replace(/^\//,"")).toLowerCase()).trim()},Vt=function(e){function t(){var e,n;y()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(a))),I()(S()(n),"onChangeSearchInput",(function(e){n.filter(e.target.value)})),I()(S()(n),"onHover",(function(e){n.setState({hoveredItem:e});var t=n.props,r=t.showInsertionPoint,o=t.hideInsertionPoint;e?r():o()})),n.state={childItems:[],filterValue:"",hoveredItem:null,suggestedItems:[],reusableItems:[],itemsPerCategory:{},openPanels:["suggested"]},n.panels={},n.inserterResults=Object(r.createRef)(),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.filter()}},{key:"componentDidUpdate",value:function(e){e.items!==this.props.items&&this.filter(this.state.filterValue)}},{key:"bindPanel",value:function(e){var t=this;return function(n){t.panels[e]=n}}},{key:"onTogglePanel",value:function(e){var t=this;return function(){-1!==t.state.openPanels.indexOf(e)?t.setState({openPanels:Object(J.without)(t.state.openPanels,e)}):(t.setState({openPanels:[].concat(Qe()(t.state.openPanels),[e])}),t.props.setTimeout((function(){xe(t.panels[e],t.inserterResults.current,{alignWithTop:!0})})))}}},{key:"filterOpenPanels",value:function(e,t,n,r){if(e===this.state.filterValue)return this.state.openPanels;if(!e)return["suggested"];var o=[];return r.length>0&&o.push("reusable"),n.length>0&&(o=o.concat(Object.keys(t))),o}},{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,n=t.debouncedSpeak,r=t.items,o=t.rootChildBlocks,a=qt(r,e),i=Object(J.filter)(a,(function(e){var t=e.name;return Object(J.includes)(o,t)})),l=[];if(!e){var s=this.props.maxSuggestedItems||9;l=Object(J.filter)(r,(function(e){return e.utility>0})).slice(0,s)}var u=Object(J.filter)(a,{category:"reusable"}),p=function(e){return Object(J.findIndex)(Object(H.getCategories)(),(function(t){return t.slug===e.category}))},d=Object(J.flow)((function(e){return Object(J.filter)(e,(function(e){return"reusable"!==e.category}))}),(function(e){return Object(J.sortBy)(e,p)}),(function(e){return Object(J.groupBy)(e,"category")}))(a);this.setState({hoveredItem:null,childItems:i,filterValue:e,suggestedItems:l,reusableItems:u,itemsPerCategory:d,openPanels:this.filterOpenPanels(e,d,a,u)});var m=Object.keys(d).reduce((function(e,t){return e+d[t].length}),0),f=Object(c.sprintf)(Object(c._n)("%d result found.","%d results found.",m,"amp"),m);n(f)}},{key:"onKeyDown",value:function(e){Object(J.includes)([V.LEFT,V.DOWN,V.RIGHT,V.UP,V.BACKSPACE,V.ENTER],e.keyCode)&&e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,a=t.onSelect,i=this.state,l=i.hoveredItem,s=i.itemsPerCategory,u=i.openPanels,p=i.reusableItems,d=i.suggestedItems,m=function(e){return-1!==u.indexOf(e)};return Object(r.createElement)("div",{className:"editor-inserter__menu block-editor-inserter__menu amp__block-editor-inserter__menu",onKeyPress:Ut,onKeyDown:this.onKeyDown},Object(r.createElement)("label",{htmlFor:"block-editor-inserter__search-".concat(n),className:"screen-reader-text"},Object(c.__)("Search for an element","amp")),Object(r.createElement)("input",{id:"block-editor-inserter__search-".concat(n),type:"search",placeholder:Object(c.__)("Search for an element","amp"),className:"editor-inserter__search block-editor-inserter__search amp__block-editor-inserter__search",autoFocus:!0,onChange:this.onChangeSearchInput}),Object(r.createElement)("div",{className:"editor-inserter__results amp__block-editor-inserter__results block-editor-inserter__results",ref:this.inserterResults,tabIndex:"0",role:"region","aria-label":Object(c.__)("Available block types","amp")},Boolean(d.length)&&Object(r.createElement)(o.PanelBody,{title:Object(c._x)("Most Used","blocks","amp"),opened:m("suggested"),onToggle:this.onTogglePanel("suggested"),ref:this.bindPanel("suggested")},Object(r.createElement)(zt,{items:d,onSelect:a,onHover:this.onHover})),Object(J.map)(Object(H.getCategories)(),(function(t){var n=s[t.slug];return n&&n.length?Object(r.createElement)(o.PanelBody,{key:t.slug,title:t.title,icon:t.icon,opened:m(t.slug),onToggle:e.onTogglePanel(t.slug),ref:e.bindPanel(t.slug)},Object(r.createElement)(zt,{items:n,onSelect:a,onHover:e.onHover})):null})),Boolean(p.length)&&Object(r.createElement)(o.PanelBody,{className:"editor-inserter__reusable-blocks-panel block-editor-inserter__reusable-blocks-panel",title:Object(c.__)("Reusable","amp"),opened:m("reusable"),onToggle:this.onTogglePanel("reusable"),icon:"controls-repeat",ref:this.bindPanel("reusable")},Object(r.createElement)(zt,{items:p,onSelect:a,onHover:this.onHover}),Object(r.createElement)("a",{className:"editor-inserter__manage-reusable-blocks block-editor-inserter__manage-reusable-blocks",href:Object(Ie.addQueryArgs)("edit.php",{post_type:"wp_block"})},Object(c.__)("Manage All Reusable Blocks","amp"))),Object(J.isEmpty)(d)&&Object(J.isEmpty)(p)&&Object(J.isEmpty)(s)&&Object(r.createElement)("p",{className:"editor-inserter__no-results block-editor-inserter__no-results"},Object(c.__)("No blocks found.","amp"))),l&&Object(H.isReusableBlock)(l)&&Object(r.createElement)(U,{name:l.name,attributes:l.initialAttributes}))}}]),t}(r.Component),Kt=Object(a.compose)(Object(i.withSelect)((function(e,t){var n=t.clientId,r=t.isAppender,o=t.rootClientId,a=e("core/block-editor"),i=a.getInserterItems,c=a.getBlockName,l=a.getBlockRootClientId,s=a.getBlockSelectionEnd,u=a.canInsertBlockType,d=a.getBlockListSettings,m=e("core/blocks").getChildBlockNames,f=e("amp/story").getCurrentPage,b=o;if(!b&&!n&&!r){var g=s();g&&(b=l(g)||void 0)}b||(b=f());var h=c(b),y=[].concat(Qe()(i()),Qe()(i(b))).filter((function(e){var t=e.name;if(p.d.includes(t))return!0;var n=d(b);return u(t,f())&&n&&n.allowedBlocks.includes(t)}));return{rootChildBlocks:m(h),items:Qe()(new Set(y)),destinationRootClientId:b,currentPage:f()}})),Object(i.withDispatch)((function(e,t,n){var r=n.select;return{showInsertionPoint:function(){},hideInsertionPoint:function(){},onSelect:function(n){var o=e("core/block-editor"),a=o.replaceBlocks,i=o.insertBlock,c=r("core/block-editor").getSelectedBlock,l=t.isAppender,s=n.name,u=n.initialAttributes,d=c(),m=Object(H.createBlock)(s,u);if(!l&&d&&Object(H.isUnmodifiedDefaultBlock)(d))a(d.clientId,m);else{var f=p.d.includes(s)?void 0:t.destinationRootClientId;i(m,function(e){var n=r("core/block-editor"),o=n.getBlockIndex,a=n.getBlockSelectionEnd,i=n.getBlockOrder,c=t.clientId,l=t.destinationRootClientId,s=t.isAppender,u=t.currentPage;if(c)return o(c,l);if(p.d.includes(e))return i().indexOf(u)+1;var d=a();return!s&&d?o(d,l)+1:i(l).length}(s),f)}t.onSelect()}}})),o.withSpokenMessages,a.withInstanceId,a.withSafeTimeout)(Vt),Gt=(n(81),function(e){var t=e.onToggle,n=e.disabled,a=e.isOpen;return Object(r.createElement)(o.IconButton,{icon:"insert",label:Object(c.__)("Add element","amp"),labelPosition:"bottom",onClick:t,className:"editor-inserter__toggle block-editor-inserter__toggle","aria-haspopup":"true","aria-expanded":a,disabled:n})}),$t=function(e){function t(){var e,n;y()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(a))),I()(S()(n),"onToggle",(function(e){var t=n.props.onToggle;t&&t(e)})),I()(S()(n),"renderToggle",(function(e){var t=e.onToggle,r=e.isOpen,o=n.props,a=o.disabled,i=o.renderToggle;return(void 0===i?Gt:i)({onToggle:t,isOpen:r,disabled:a})})),I()(S()(n),"renderContent",(function(e){var t=e.onClose,o=n.props,a=o.rootClientId,i=o.clientId,c=o.isAppender;return Object(r.createElement)(Kt,{onSelect:t,rootClientId:a,clientId:i,isAppender:c})})),n}return C()(t,e),O()(t,[{key:"render",value:function(){var e=this.props.position;return Object(r.createElement)(o.Dropdown,{className:"editor-inserter block-editor-inserter",contentClassName:"editor-inserter__popover block-editor-inserter__popover",position:e,onToggle:this.onToggle,expandOnMobile:!0,headerTitle:Object(c.__)("Add element","amp"),renderToggle:this.renderToggle,renderContent:this.renderContent})}}]),t}(r.Component),Yt=Object(i.withSelect)((function(e){var t=e("amp/story").isReordering,n="visual"===e("core/edit-post").getEditorMode()&&e("core/editor").getEditorSettings().richEditingEnabled;return{isReordering:t(),disabled:!n}})),Qt=Object(a.compose)(Yt,Object(a.ifCondition)((function(e){return!e.isReordering})))($t),Xt={position:"bottom right"},Jt=function(e,t,n){var r,o=wp.media({title:e,button:{text:Object(c.__)("Select","amp")},multiple:!1,library:{type:t}});o.on("select",(function(){r=o.state().get("selection").first().toJSON(),n(r)})),o.open()},Zt=Object(i.withSelect)((function(e){var t=e("amp/story").getCurrentPage,n=e("core/block-editor"),r=n.canInsertBlockType,o=n.getBlockListSettings,a=n.getBlock,i=e("amp/story"),c=i.isReordering,l=i.getSettings,s=t(),u=a(s),p=u&&u.attributes.mediaType?u.attributes.mediaType:"",d=l().allowedVideoMimeTypes;return{isReordering:c(),canInsertBlockType:function(e){var t=o(s);return r(e,s)&&t&&t.allowedBlocks.includes(e)},showInserter:"visual"===e("core/edit-post").getEditorMode()&&e("core/editor").getEditorSettings().richEditingEnabled,mediaType:p,allowedVideoMimeTypes:d}})),en=Object(i.withDispatch)((function(e,t,n){var r=n.select,o=r("amp/story").getCurrentPage,a=r("core/block-editor").getBlockOrder,i=e("core/block-editor").insertBlock;return{insertBlock:function(e){var t=o(),n=a(t).length,r=Object(H.createBlock)(e,{});i(r,n,t)},updateBlock:function(t){var n=o(),r=e("core/block-editor"),a=r.updateBlockAttributes,i=r.selectBlock;n&&(a(n,Object(g.M)(t)),i(n))}}})),tn=Object(a.compose)(Zt,en,Object(a.ifCondition)((function(e){return!e.isReordering})))((function(e){for(var t=e.insertBlock,n=e.updateBlock,a=e.canInsertBlockType,i=e.showInserter,l=e.mediaType,s=e.allowedVideoMimeTypes,u="image"===l?Object(c.__)("Update Background Image","amp"):Object(c.__)("Insert Background Image","amp"),d="video"===l?Object(c.__)("Update Background Video","amp"):Object(c.__)("Insert Background Video","amp"),m=[{title:u,icon:Object(r.createElement)(z.BlockIcon,{icon:"format-image"}),onClick:function(){return Jt(Object(c.__)("Select or Upload Media","amp"),p.m,n)},disabled:!i},{title:d,icon:Object(r.createElement)(z.BlockIcon,{icon:"media-video"}),onClick:function(){return Jt(Object(c.__)("Select or Upload Media","amp"),s,n)},disabled:!i}],f=function(){var e=g[b];if(!a(e))return"continue";var n=Object(H.getBlockType)(e),o={title:Object(c.sprintf)(Object(c.__)("Insert %s","amp"),n.title),onClick:function(){return t(e)},disabled:!i,icon:Object(r.createElement)(z.BlockIcon,{icon:n.icon})};m.unshift(o)},b=0,g=["core/video","core/image"];b<g.length;b++)f();return Object(r.createElement)(o.DropdownMenu,{icon:"admin-media",label:Object(c.__)("Insert Media","amp"),className:"amp-story-media-inserter-dropdown",controls:m,hasArrowIndicator:!0,popoverProps:Xt,toggleProps:{labelPosition:"bottom"}})})),nn=(n(82),function(e){return e*Math.PI/180}),rn=function(e,t,n,r,o){var a=e.clientY-r,i=e.clientX-n,c=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}(i,a),l=Math.atan2(a,i)-nn(t),s=o.toLowerCase().includes("left")||o.toLowerCase().includes("right"),u=o.toLowerCase().includes("top")||o.toLowerCase().includes("bottom"),d=s?c*Math.cos(l):0,m=u?c*Math.sin(l):0;return{deltaW:p.t.includes(o)?-d:d,deltaH:p.s.includes(o)?-m:m}},on=function(e,t,n,r){var o,a,i=-e/2,c=t/2;return"topRight"===r||"bottomLeft"===r?(o=c*-Math.sin(n)+i*Math.cos(n),a=c*Math.cos(n)-i*-Math.sin(n)):(o=c*Math.sin(n)+i*Math.cos(n),a=c*Math.cos(n)-i*Math.sin(n)),{left:o-i,top:a-c}},an=0,cn=0,ln=null,sn=function(e){function t(){var e,n;y()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=k()(this,(e=_()(t)).call.apply(e,[this].concat(o)))).state={isResizing:!1},n}return C()(t,e),O()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.angle,a=t.blockName,i=t.ampFitText,c=t.minWidth,l=t.minHeight,u=t.onResizeStart,d=t.onResizeStop,m=t.children,f=lt()(t,["angle","blockName","ampFitText","minWidth","minHeight","onResizeStart","onResizeStop","children"]),b=this.props,h=b.width,y=b.height,v=this.state.isResizing,O="core/image"===a,j="amp/amp-story-text"===a;return Object(r.createElement)(o.ResizableBox,s()({},f,{className:B()("amp-story-resize-container",{"is-resizing":v}),size:{height:y,width:h},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},onResizeStop:function(t,r){var o=rn(t,n,an,cn,r),a=o.deltaW,i=o.deltaH,c=h+a,l=y+i;Lt&&(Lt.style.height="100%"),c=c<Bt?Bt:c,l=l<Tt?Tt:l;var s=parseFloat(ln.style.top),u=parseFloat(ln.style.left),p=Number(s.toFixed(2)),m=Number(u.toFixed(2));e.setState({isResizing:!1}),d({width:parseInt(c),height:parseInt(l),positionTop:p,positionLeft:m})},onResizeStart:function(t,n,r){an=t.clientX,cn=t.clientY,Bt=h,Tt=y,Rt=null,Mt=null,ln=r.closest(".wp-block").parentNode,Nt=ln.style.top,Dt=ln.style.left,O&&(Ft=ln.querySelector("figure .components-resizable-box__container")),Ht=i?null:function(e,t){if(!(p.i.includes(e)||"core/code"===e))return null;switch(e){case"amp/amp-story-text":return t.querySelector(".block-editor-rich-text__editable.editor-rich-text__editable");case"amp/amp-story-post-title":return t.querySelector(".wp-block-amp-amp-story-post-title");case"amp/amp-story-post-author":return t.querySelector(".wp-block-amp-amp-story-post-author");case"amp/amp-story-post-date":return t.querySelector(".wp-block-amp-amp-story-post-date");case"core/code":return t.querySelector(".wp-block-code");default:return null}}(a,ln),Lt=i&&j?ln.querySelector(".with-line-height"):null,e.setState({isResizing:!0}),u()},onResize:function(e,t,r){var o=rn(e,n,an,cn,t),a=o.deltaW,s=o.deltaH;!O||h||y||(h=ln.clientWidth,y=ln.clientHeight);var u=c<=h+a?h+a:c,d=l<=y+s?y+s:l;if(Ht&&(0>a||0>s)){n&&(j?j&&!i&&(Ht.style.width="initial"):(Ht.style.width=u+"px",Ht.style.height=d+"px")),j&&(Ht.style.height="auto");var m=Ht.scrollWidth,f=Ht.scrollHeight;(u<m||d<f)&&(u=Bt,d=Tt),n&&(j?j&&!i&&(Ht.style.width="100%"):(Ht.style.width="initial",Ht.style.height="100%")),j&&(Ht.style.height="")}if(l<d&&(Mt=s),c<u&&(Rt=a),n){var b,v,k=nn(n);j?(b=on(h-2*p.w,y-2*p.w,k,t),v=on(u-2*p.w,d-2*p.w,k,t)):(b=on(h,y,k,t),v=on(u,d,k,t));var w={left:v.left-b.left,top:v.top-b.top},_=function(e,t,n){switch(e){case"topRight":return{left:t.left-n.left,top:t.top-n.top};case"bottomLeft":return{left:t.left+n.left,top:t.top+n.top};case"left":case"topLeft":case"top":return{left:t.left+n.left,top:t.top-n.top};default:return{left:t.left-n.left,top:t.top+n.top}}}(t,function(e,t,n,r,o){var a=Object(g.t)("x",parseFloat(t)),i=Object(g.t)("y",parseFloat(n));switch(e){case"topRight":return{left:a,top:i-o};case"bottomLeft":return{left:a-r,top:i};case"left":case"topLeft":case"top":return{left:a-r,top:i-o};default:return{left:a,top:i}}}(t,Dt,Nt,Rt,Mt),w);ln.style.left=Object(g.s)("x",_.left)+"%",ln.style.top=Object(g.s)("y",_.top)+"%"}else{if(p.t.includes(t)){var E=Object(g.t)("x",parseFloat(Dt));ln.style.left=Object(g.s)("x",E-Rt)+"%"}if(p.s.includes(t)){var S=Object(g.t)("y",parseFloat(Nt));ln.style.top=Object(g.s)("y",S-Mt)+"%"}}r.style.width=u+"px",r.style.height=d+"px",Bt=u,Tt=d,Lt&&(i&&(Lt.style.lineHeight=d+"px"),Lt.style.height=d+"px"),Ft&&O&&(Ft.style.width=u+"px",Ft.style.height=d+"px")}}),m)}}]),t}(r.Component),un=n(13),pn=function(e){function t(){return y()(this,t),k()(this,_()(t).apply(this,arguments))}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.props.isLoading||Object(g.K)(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.attributes,r=t.fontSize,o=t.blockContent,a=n.height,i=n.width,c=n.ampFitText,l=n.ampFontFamily;c&&(e.attributes.ampFitText!==c||e.attributes.ampFontFamily!==l||e.attributes.width!==i||e.attributes.height!==a||e.blockContent!==o)&&!this.props.isLoading&&Object(g.K)(this.props),!(c||Object(J.isEqual)(e.fontSize,r)&&e.attributes.ampFitText===c&&e.attributes.ampFontFamily===l&&e.blockContent===o)&&Object(g.J)(this.props)}},{key:"render",value:function(){var e,t=this.props,n=t.blockContent,o=t.placeholder,a=t.attributes,i=t.setAttributes,c=t.className,l=t.fontSize,s=t.colors,u=t.backgroundColor,p=t.customBackgroundColor,d=t.textColor,m=t.tagName,f=a.align,b=a.opacity,g=a.ampFitText,h=a.autoFontSize,y=l&&l.size&&l.size+"px",v=Object(un.d)(s,u,p,b),O=m;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.BlockControls,null,Object(r.createElement)(z.AlignmentToolbar,{value:f,onChange:function(e){return i({align:e})}})),Object(r.createElement)(O,{style:{backgroundColor:v,color:d.color,fontSize:g?h+"px":y,textAlign:f},className:B()(c,(e={"has-text-color":d.color,"has-background":u.color},I()(e,u.class,u.class),I()(e,d.class,d.class),I()(e,l.class,l.class),I()(e,"is-empty",!n),I()(e,"is-amp-fit-text",g),e))},n||o))}}]),t}(r.Component),dn=function(e){var t=e.attribute,n=e.placeholder,o=e.tagName,l=e.isEditable;return Object(a.compose)(Object(i.withSelect)((function(e){var r,o=e("core/editor").getEditedPostAttribute,a=e("core").getAuthors,i=e("core/block-editor").getSettings,l=o(t),s=!1;switch(t){case"date":var u=Object(q.__experimentalGetSettings)().formats.date,p=l||new Date;r=Object(q.dateI18n)(u,p);break;case"author":var d=a().find((function(e){return e.id===l}));r=d?d.name:Object(c.__)("Anonymous","amp"),s=!d;break;default:r=l}var m=i().colors;return{blockContent:r,placeholder:n,colors:m,isLoading:s}})),Object(i.withDispatch)((function(e){var n=e("core/editor").editPost;return{onChange:function(e){return n(I()({},t,e))}}})))((function(e){return Object(r.createElement)(pn,s()({tagName:o,isEditable:l},e))}))},mn=function(e){var t=e.tagName;return function(e){var n=e.attributes,o=n.ampFitText,a=Object(g.n)(n),i=Object(g.v)(n);if(!o)return Object(r.createElement)(z.RichText.Content,{tagName:t,style:i,className:a,value:"{content}"});var c=t;return Object(r.createElement)(c,{style:i,className:a},Object(r.createElement)("amp-fit-text",{layout:"flex-item",className:"amp-text-content"},"{content}"))}},fn=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("g",{transform:"translate(3 5)"},Object(r.createElement)("path",{d:"M11.2 4h.8a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-.8c0-.11.09-.2.2-.2H10a1 1 0 0 0 1-1V4.2c0-.11.09-.2.2-.2z",opacity:".3"}),Object(r.createElement)("rect",{width:"9",height:"9",rx:"1"})),Object(r.createElement)("path",{d:"M20.808 7.145c1.41 1.74 1.283 4.365-1.165 6.348.44-1.348.575-2.628-1.011-4.586L17 10.229l.517-4.923 4.923.517-1.632 1.322z"}))};fn.defaultProps={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};var bn=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("g",{transform:"translate(7.65 5)"},Object(r.createElement)("path",{d:"M11.2 4h.8a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-.8c0-.11.09-.2.2-.2H10a1 1 0 0 0 1-1V4.2c0-.11.09-.2.2-.2z",opacity:".3"}),Object(r.createElement)("rect",{width:"9",height:"9",rx:"1"})),Object(r.createElement)("path",{d:"M3.632 17.653c-1.41-1.74-1.283-4.365 1.165-6.348-.44 1.348-.575 2.628 1.011 4.586l1.632-1.322-.517 4.923L2 18.975l1.632-1.322z"}))};bn.defaultProps={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};var gn=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("g",{transform:"translate(5.65 5)"},Object(r.createElement)("path",{d:"M11.2 4h.8a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-.8c0-.11.09-.2.2-.2H10a1 1 0 0 0 1-1V4.2c0-.11.09-.2.2-.2z",opacity:".3"}),Object(r.createElement)("rect",{width:"9",height:"9",rx:"1"})))};gn.defaultProps={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};var hn=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("g",{transform:"translate(6 5)"},Object(r.createElement)("path",{d:"M11.2 4h.8a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-.8c0-.11.09-.2.2-.2H10a1 1 0 0 0 1-1V4.2c0-.11.09-.2.2-.2z"}),Object(r.createElement)("rect",{opacity:".3",width:"9",height:"9",rx:"1"})))};hn.defaultProps={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};var yn=window,vn=yn.getComputedStyle,On=yn.ampStoriesFonts,jn=Object(o.withFallbackStyles)((function(e,t){var n=t.textColor,r=t.backgroundColor,o=t.fontSize,a=t.customFontSize,i=e.querySelector('[contenteditable="true"]'),c=i?vn(i):null;return{fallbackBackgroundColor:r||!c?void 0:c.backgroundColor,fallbackTextColor:n||!c?void 0:c.color,fallbackFontSize:o||a||!c?void 0:parseInt(c.fontSize)||void 0}})),kn=Object(i.withSelect)((function(e,t){var n=e("core/block-editor"),r=n.getSelectedBlockClientId,o=n.getBlockRootClientId,a=n.getBlock,i=n.getBlockOrder,c=n.getBlockIndex,l=e("amp/story"),s=l.getAnimatedBlocks,u=l.isValidAnimationPredecessor,p=r(),d=o(p),m=(s()[d]||[]).find((function(e){return e.id===t.clientId})),f=o(t.clientId),b=i(f),h=c(t.clientId,f);return{currentBlockPosition:b.length-1-h+1,numberOfBlocks:b.length,isFirst:0===h,isLast:Object(g.m)(f)?h===b.length-2:h===b.length-1,parentBlock:a(f),rootClientId:f,animationAfter:m?m.parent:void 0,getAnimatedBlocks:function(){return(s()[d]||[]).filter((function(e){return e.id!==p})).filter((function(e){var t=e.id,n=a(t);return n&&n.attributes.ampAnimationType&&u(d,p,t)})).map((function(e){var t=e.id,n=a(t);return{value:t,label:n.name,block:n,blockType:Object(H.getBlockType)(n.name)}}))}}})),wn=Object(i.withDispatch)((function(e,t,n){var r=t.clientId,o=t.rootClientId,a=t.toggleSelection,i=(0,n.select)("core/block-editor"),c=i.getSelectedBlockClientId,l=i.getBlockRootClientId,s=i.getBlockOrder,u=e("core/block-editor"),p=u.moveBlocksDown,d=u.moveBlocksUp,m=u.moveBlockToPosition,f=u.selectBlock,b=c(),g=l(b),h=e("amp/story"),y=h.addAnimation,v=h.changeAnimationType,O=h.changeAnimationDuration,j=h.changeAnimationDelay;return{onAnimationTypeChange:function(e){v(g,b,e)},onAnimationOrderChange:function(e){y(g,b,e)},onAnimationDurationChange:function(e){O(g,b,e)},onAnimationDelayChange:function(e){j(g,b,e)},startBlockActions:function(){return a(!1)},stopBlockActions:function(){a(!0),f(r)},bringForward:function(){return p(r,o)},sendBackward:function(){return d(r,o)},moveFront:function(){var e=s(o).length-1;m(r,o,o,e)},moveBack:function(){m(r,o,o,0)}}})),_n=Object(a.compose)(Object(z.withColors)("backgroundColor",{textColor:"color"}),Object(z.withFontSizes)("fontSize"),jn,kn,wn),En=Object(a.createHigherOrderComponent)((function(e){return _n((function(t){var n=t.clientId,a=t.rootClientId,i=t.name,l=t.attributes,s=t.isLast,u=t.isFirst,d=t.currentBlockPosition,m=t.numberOfBlocks,f=t.fontSize,h=t.setFontSize,y=t.setAttributes,v=t.backgroundColor,O=t.setBackgroundColor,j=t.textColor,k=t.setTextColor,w=t.fallbackBackgroundColor,_=t.fallbackTextColor,E=t.onAnimationTypeChange,S=t.onAnimationOrderChange,x=t.onAnimationDurationChange,C=t.onAnimationDelayChange,P=t.getAnimatedBlocks,A=t.animationAfter,B=t.startBlockActions,T=t.stopBlockActions,N=t.bringForward,D=t.sendBackward,R=t.moveFront,M=t.moveBack;if(!p.b.includes(i))return Object(r.createElement)(e,t);var F,L=Object(H.getBlockType)(i),U="core/image"===i,q="core/video"===i,W="amp/amp-story-text"===i,V="amp/amp-story-page-attachment"===i,K=p.i.includes(i),G=p.g.includes(i),$=p.h.includes(i),Y=l.ampFontFamily,Q=l.ampFitText,X=l.height,J=l.width,Z=l.opacity,ee=l.type,te=l.ampAnimationType,ne=l.ampAnimationDuration,re=l.ampAnimationDelay,oe=l.rotationAngle,ae=U&&(!l.url||!l.url.length);if("core/table"===i){var ie=l.body.length;l.foot&&l.foot.length&&ie++,l.head&&l.head.length&&ie++,F=45*ie}else F=p.p[i]||p.p.default;var ce=parseInt(String(ne).replace("ms","")),le=parseInt(String(re).replace("ms","")),se=q?"ampShowCaption":"ampShowImageCaption";return Object(r.createElement)(r.Fragment,null,!Object(g.y)(i)&&Object(r.createElement)(e,t),Object(g.y)(i)&&!ae&&$&&Object(r.createElement)(sn,{width:J,height:X,angle:oe,minHeight:F,minWidth:p.q,onResizeStop:function(e){y(e),T()},blockName:i,ampFitText:Q,onResizeStart:function(){B()}},Object(r.createElement)(jt,{blockElementId:"block-".concat(n),initialAngle:oe,className:"amp-story-editor__rotate-container",angle:oe,onRotateStart:function(){B()},onRotateStop:function(e,t){y({rotationAngle:t}),T()},snap:p.j,snapGap:p.k},W&&Object(r.createElement)(e,t),!W&&Object(r.createElement)(dt,{clientId:t.clientId,blockName:i,blockElementId:"block-".concat(t.clientId),isDraggable:!t.isPartOfMultiSelection,isMovable:Object(g.y)(i)},Object(r.createElement)(e,t)))),Object(g.y)(i)&&(!$||ae)&&Object(r.createElement)(jt,{blockElementId:"block-".concat(n),initialAngle:oe,className:"amp-story-editor__rotate-container",angle:oe,onRotateStart:function(){B()},onRotateStop:function(e,t){y({rotationAngle:t}),T()},snap:p.j,snapGap:p.k},Object(r.createElement)(dt,{clientId:t.clientId,blockName:i,blockElementId:"block-".concat(t.clientId),isDraggable:!t.isPartOfMultiSelection,isMovable:Object(g.y)(i)},Object(r.createElement)(e,t))),!(s&&u)&&Object(g.y)(i)&&Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(o.PanelBody,{className:"amp-story-order-controls",title:Object(c.__)("Block Position","amp")},Object(r.createElement)("div",{className:"amp-story-order-controls-wrap"},Object(r.createElement)(o.IconButton,{className:"amp-story-controls-bring-front",onClick:R,icon:gn({width:24,height:24}),label:Object(c.__)("Send to front","amp"),"aria-describedby":"amp-story-controls-bring-front-description-".concat(n),"aria-disabled":s},Object(c.__)("Front","amp")),Object(r.createElement)(o.IconButton,{className:"amp-story-controls-bring-forward",onClick:N,icon:fn({width:24,height:24}),label:Object(c.__)("Send Forward","amp"),"aria-describedby":"amp-story-controls-bring-forward-description-".concat(n),"aria-disabled":s},Object(c.__)("Forward","amp")),Object(r.createElement)(o.IconButton,{className:"amp-story-controls-send-backwards",onClick:D,icon:bn({width:24,height:24}),label:Object(c.__)("Send Backward","amp"),"aria-describedby":"amp-story-controls-send-backward-description-".concat(n),"aria-disabled":u},Object(c.__)("Backward","amp")),Object(r.createElement)(o.IconButton,{className:"amp-story-controls-send-back",onClick:M,icon:hn({width:24,height:24}),label:Object(c.__)("Send to back","amp"),"aria-describedby":"amp-story-controls-send-back-description-".concat(n),"aria-disabled":u},Object(c.__)("Back","amp"))),Object(r.createElement)("span",{className:"amp-story-controls-description",id:"amp-story-controls-bring-front-description-".concat(n)},Object(g.l)(L&&L.title,d,1,u,s,-1)),Object(r.createElement)("span",{className:"amp-story-controls-description",id:"amp-story-controls-bring-forward-description-".concat(n)},Object(g.l)(L&&L.title,d,d-1,u,s,-1)),Object(r.createElement)("span",{className:"amp-story-controls-description",id:"amp-story-controls-send-backward-description-".concat(n)},Object(g.l)(L&&L.title,d,d+1,u,s,1)),Object(r.createElement)("span",{className:"amp-story-controls-description",id:"amp-story-controls-send-back-description-".concat(n)},Object(g.l)(L&&L.title,d,m,u,s,1)))),K&&Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(o.PanelBody,{title:Object(c.__)("Text Settings","amp")},Object(r.createElement)(vt,{fonts:On,value:Y,onChange:function(e){e?(Object(g.B)(e.name),y({ampFontFamily:e.name})):y({ampFontFamily:""})}}),Object(r.createElement)(o.ToggleControl,{label:Object(c.__)("Automatically fit text to container","amp"),checked:Q,onChange:function(){y({ampFitText:!Q})}}),!Q&&Object(r.createElement)(z.FontSizePicker,{value:f.size,onChange:h}),W&&Object(r.createElement)(o.SelectControl,{label:Object(c.__)("Select text type","amp"),value:ee,onChange:function(e){return y({type:e})},options:[{value:"auto",label:Object(c.__)("Automatic","amp")},{value:"p",label:Object(c.__)("Paragraph","amp")},{value:"h1",label:Object(c.__)("Heading 1","amp")},{value:"h2",label:Object(c.__)("Heading 2","amp")}]}))),G&&Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(z.PanelColorSettings,{title:Object(c.__)("Color Settings","amp"),initialOpen:!1,colorSettings:[{value:v.color,onChange:O,label:Object(c.__)("Background Color","amp")},{value:j.color,onChange:k,label:Object(c.__)("Text Color","amp")}]},Object(r.createElement)(z.ContrastChecker,{textColor:j.color,backgroundColor:v.color,fallbackTextColor:_,fallbackBackgroundColor:w,fontSize:f.size}),!V&&Object(r.createElement)(o.RangeControl,{label:Object(c.__)("Opacity","amp"),value:Z,onChange:function(e){return y({opacity:e})},min:5,max:100,step:5}))),Object(g.y)(i)&&Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(o.PanelBody,{title:Object(c.__)("Animation","amp")},Object(r.createElement)(b,{clientId:n,page:a,animatedBlocks:P,animationType:te,animationDuration:ce,animationDelay:le,animationAfter:A,onAnimationTypeChange:E,onAnimationDurationChange:x,onAnimationDelayChange:C,onAnimationAfterChange:S}))),(U||q)&&Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(o.PanelBody,{title:Object(c.__)("Story Settings","amp")},Object(r.createElement)(o.ToggleControl,{label:Object(c.__)("Display Caption","amp"),checked:l[se],onChange:function(){t.setAttributes(I()({},se,!l[se])),l[se]||t.setAttributes({caption:""})},help:Object(c.__)("Note: If you turn this off, the current caption text will be removed.","amp")}))))}))}),"withAmpStorySettings"),Sn=Object(a.createHigherOrderComponent)(Object(i.withSelect)((function(e,t){var n,r=e("core/block-editor").getBlockAttributes;return t.block&&t.block.attributes?n=t.block.attributes:r&&(n=r(t.clientId)),{attributes:n}})),"withAttributes"),xn=Object(a.createHigherOrderComponent)(Object(i.withSelect)((function(e,t){return{blockName:(0,e("core/block-editor").getBlockName)(t.clientId)}})),"withBlockName"),Cn=n(35),Pn=window.wp,In=Pn.media.controller.Cropper.extend({doCrop:function(e){var t=e.get("cropDetails"),n=this.imgSelect.getOptions();return Math.abs(t.width-n.minWidth)<10&&(t.width=n.minWidth),Math.abs(t.height-n.minHeight)<10&&(t.height=n.minHeight),t.dst_width=t.width,t.dst_height=t.height,Pn.ajax.post("crop-image",{nonce:e.get("nonces").edit,id:e.get("id"),context:"featured-image",cropDetails:t})}}),An=window.wp,Bn=function(e){Object(i.dispatch)("core/editor").editPost({featured_media:e})},Tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.width,o=t.height,a=n.width,i=n.height;return function(e){function t(){var e,n;y()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(i))),I()(S()(n),"initFeaturedImage",(function(){var e=Object(Cn.c)(Cn.b);n.frame=new e({allowedTypes:n.props.allowedTypes,button:{text:Object(c.__)("Select","amp"),close:!1},states:[new An.media.controller.Library({title:Object(c.__)("Choose image","amp"),library:An.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:r,suggestedHeight:o}),new In({imgSelectOptions:n.calculateImageSelectOptions,control:S()(n)})]}),An.media.frame=n.frame,n.frame.on("select",n.onSelectImage,S()(n)),n.frame.on("cropped",n.onCropped,S()(n)),n.frame.on("skippedcrop",n.onSkippedCrop,S()(n)),n.frame.on("close",(function(){n.initFeaturedImage()}),S()(n))})),"editor-post-featured-image__media-modal"===n.props.modalClass&&n.initFeaturedImage(),n}return C()(t,e),O()(t,[{key:"calculateImageSelectOptions",value:function(e,t){var n=e.get("width"),c=e.get("height"),l=a&&n>=a&&c>=i&&Object(un.c)(n,c)===Object(un.c)(a,i),s=l?parseInt(a):parseInt(r),u=l?parseInt(i):parseInt(o),p=s/u,d=s,m=u;t.set("canSkipCrop",!0),n/c>p?s=(u=c)*p:u=(s=n)/p;var f=(n-s)/2,b=(c-u)/2;return{aspectRatio:s+":"+u,handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:n,imageHeight:c,minWidth:d>s?s:d,minHeight:m>u?u:m,x1:f,y1:b,x2:s+f,y2:u+b}}},{key:"onSelectImage",value:function(){var e=this.frame.state().get("selection").first().toJSON();if(r===e.width&&o===e.height||a&&a===e.width&&i===e.height){var t=e.url,n=e.id,c=e.width,l=e.height,s=this.props.onSelect;Object(un.l)({url:t,id:n,width:c,height:l,onSelect:s,dispatchImage:Bn}),this.frame.close()}else this.frame.setState("cropper")}},{key:"doAllowCrop",value:function(e){return e.width&&e.height&&e.width>=r&&e.height>=o}},{key:"mustBeCropped",value:function(e,t,n,r){return!(e===n&&t===r||n<=e)}},{key:"onCropped",value:function(e){var t=e.url,n=e.id,r=e.width,o=e.height,a=this.props.onSelect;Object(un.l)({url:t,id:n,width:r,height:o,onSelect:a,dispatchImage:Bn})}},{key:"onSkippedCrop",value:function(e){var t=e.get("url"),n=e.get("width"),r=e.get("height"),o=e.id,a=this.props.onSelect;Object(un.l)({url:t,id:o,width:n,height:r,onSelect:a,dispatchImage:Bn})}}]),t}(e)},Nn=Object(a.createHigherOrderComponent)(Object(i.withSelect)((function(e,t){return{hasSelectedInnerBlock:(0,e("core/block-editor").hasSelectedInnerBlock)(t.clientId,!0)}})),"withHasSelectedInnerBlock"),Dn=Object(i.withSelect)((function(e,t){var n=e("core/block-editor"),r=n.getBlockOrder;if(""!==(0,n.getBlockRootClientId)(t.clientId))return{pageNumber:void 0};var o=e("amp/story").isReordering;return{pageNumber:r().indexOf(t.clientId)+1,isReordering:o()}})),Rn=Object(a.compose)(Dn,xn),Mn=Object(a.createHigherOrderComponent)((function(e){return Rn((function(t){var n=t.blockName,o=t.pageNumber,a=t.isReordering;return p.d.includes(n)&&o?a?Object(r.createElement)(e,t):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"amp-story-page-number"},
/* translators: %s: Page number */
Object(c.sprintf)(Object(c.__)("Page %s","amp"),o)),Object(r.createElement)(e,t)):Object(r.createElement)(e,t)}))}),"withPageNumber"),Fn=Object(i.withSelect)((function(e,t){var n=e("amp/story"),o=n.isReordering,a=n.getCopiedMarkup,i=n.getCurrentPage,c=e("core/block-editor"),l=c.getSelectedBlockClientIds,s=c.hasMultiSelection,u=t.name;return{onContextMenu:function(e){var t=l();if(0!==t.length&&("amp/amp-story-page"!==u||a().length)){var n=window.getSelection().toString();if(!s()&&!n.length){var o=document.querySelector(".edit-post-layout");if(!document.getElementById("amp-story-right-click-menu")){var c=document.createElement("div");c.id="amp-story-right-click-menu",o.appendChild(c)}var p=o.getBoundingClientRect(),d=document.querySelector(".edit-post-header"),m=0;d&&(m=d.clientHeight);var f=e.clientX-p.left,b=e.clientY-p.top-m,h=i(),y=0,v=0,O=Object(g.k)(h);if(O){var j=O.getBoundingClientRect(),k=e.clientY-j.top,w=e.clientX-j.left;y=Object(g.s)("y",k),v=Object(g.s)("x",w)}Object(r.render)(Object(r.createElement)(Pt,{clientIds:t,clientX:f,clientY:b,insidePercentageX:v,insidePercentageY:y}),document.getElementById("amp-story-right-click-menu")),e.preventDefault()}}},isReordering:o()}})),Ln=Object(a.createHigherOrderComponent)((function(e){return Fn((function(t){var n=t.name,o=t.onContextMenu,a=t.isReordering;return"amp/amp-story-page"===n||p.b.includes(n)?a?Object(r.createElement)(e,t):Object(r.createElement)("div",{onContextMenu:o},Object(r.createElement)(e,t)):Object(r.createElement)(e,t)}))}),"withRightClickHandler"),Hn=Object(a.createHigherOrderComponent)((function(e){return function(t){var n=t.media,a=Object(un.m)(n,Object(g.q)(),!0);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.Notice,{status:"warning",isDismissible:!1},a.map((function(e,t){return Object(r.createElement)("p",{key:"error-".concat(t)},e)}))),Object(r.createElement)(e,t)):Object(r.createElement)(e,t)}}),"withStoryFeaturedImageNotice"),zn=function(e){return Object(i.withSelect)((function(e,t){var n=(0,e("core/editor").getEditedPostAttribute)("featured_media"),r="core/image"===t.name||"amp/amp-story-page"===t.name;if(!n&&r&&t.attributes){var o=e("core/block-editor").getSelectedBlock,a=t.attributes.mediaId||t.attributes.id,c=o();if(a&&c&&c.attributes){var l=c.attributes.mediaId||c.attributes.id;if(l&&l===a){var s=e("core").getMedia,u=Object(i.dispatch)("core/editor").editPost,p=s(a);p&&p.media_details&&Object(un.i)(p.media_details,Object(un.f)())&&Object(un.i)(p.media_details,Object(g.q)())&&u({featured_media:a})}}}}))(e)},Un=function(e){return function(t){return"core/video"===t.name?Object(r.createElement)(Gn,t):Object(r.createElement)(e,t)}},qn=n(33),Wn=n(24),Vn=Object(r.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(o.Path,{fill:"none",d:"M0 0h24v24H0V0z"}),Object(r.createElement)(o.Path,{d:"M4 6.47L5.76 10H20v8H4V6.47M22 4h-4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z"})),Kn=function(e){function t(){var e,n;y()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=k()(this,(e=_()(t)).call.apply(e,[this].concat(a))),I()(S()(n),"toggleAttribute",(function(e){return function(t){n.props.setAttributes(I()({},e,t))}})),I()(S()(n),"onSelectURL",(function(e){var t=n.props,r=t.attributes,o=t.setAttributes;e!==r.src&&(o({src:e,id:void 0,poster:void 0}),n.setState({extractingPoster:!0}),Object(g.T)({src:e}).then((function(e){o({poster:Object(g.u)(e)}),n.setState({extractingPoster:!1})})).catch((function(){return n.setState({extractingPoster:!1})}))),n.setState({editing:!1,duration:null,videoSize:null})})),I()(S()(n),"onUploadError",(function(e){var t=n.props.noticeOperations;t.removeAllNotices(),t.createErrorNotice(e)})),I()(S()(n),"onLoadedMetadata",(function(e){var t=Math.round(e.currentTarget.duration);n.setState({duration:t})})),n.state={editing:!n.props.attributes.src,extractingPoster:!1},n.videoPlayer=Object(r.createRef)(),n}return C()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.attributes,r=t.mediaUpload,o=t.noticeOperations,a=t.setAttributes,i=t.allowedVideoMimeTypes,c=n.id,l=n.src,s=void 0===l?"":l;if(!c&&Object(qn.isBlobURL)(s)){var u=Object(qn.getBlobByURL)(s);u&&r({filesList:[u],onFileChange:function(t){var n=wt()(t,1)[0],r=n.id,o=n.url;e.setState({duration:null,videoSize:null}),a({id:r,src:o})},onError:function(t){e.setState({editing:!0}),o.createErrorNotice(t)},allowedTypes:i})}s&&!Object(qn.isBlobURL)(s)&&Object(un.e)(s).then((function(t){e.setState({videoSize:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.attributes,o=n.setAttributes,a=n.videoFeaturedImage,i=n.media,c=r.poster,l=r.src,s=r.id;if(c!==e.attributes.poster&&this.videoPlayer.current&&this.videoPlayer.current.load(),l===e.attributes.src||Object(qn.isBlobURL)(l)||Object(un.e)(l).then((function(e){t.setState({videoSize:e})})),!c){if(i&&i!==e.media&&!r.ampAriaLabel){var u=i.alt_text||i.title&&i.title.raw||"";o({ampAriaLabel:u})}a?o({poster:a.source_url}):!i||i===e.media||i.featured_media||this.state.extractingPoster||(this.setState({extractingPoster:!0}),Object(g.T)({id:s,src:l}).then((function(e){o({poster:Object(g.u)(e)}),t.setState({extractingPoster:!1})})).catch((function(){return t.setState({extractingPoster:!1})})))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.instanceId,i=t.isSelected,l=t.noticeUI,s=t.attributes,u=t.setAttributes,d=t.allowedVideoMimeTypes,m=s.caption,f=s.loop,b=s.poster,g=s.src,h=s.width,y=s.height,v=s.ampAriaLabel,O=this.state.editing,j=function(){e.setState({editing:!0})};if(O)return Object(r.createElement)(z.MediaPlaceholder,{icon:Object(r.createElement)(z.BlockIcon,{icon:Vn}),className:n,onSelect:function(t){if(!t||!t.url)return u({src:void 0,id:void 0,poster:void 0}),void j();u({src:t.url,id:t.id,poster:void 0}),e.setState({src:t.url,editing:!1,duration:null,videoSize:null})},onSelectURL:this.onSelectURL,accept:d.join(","),allowedTypes:d,value:this.props.attributes,notices:l,onError:this.onUploadError});var k=this.state.duration&&this.state.videoSize?this.state.videoSize/this.state.duration:0,w="video-block__poster-image-".concat(a),_=k?Object(un.j)(k):null;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z.BlockControls,null,Object(r.createElement)(o.Toolbar,null,Object(r.createElement)(o.IconButton,{className:"components-icon-button components-toolbar__control",label:Object(c.__)("Edit video","amp"),onClick:j,icon:"edit"}))),Object(r.createElement)(z.InspectorControls,null,Object(r.createElement)(o.PanelBody,{title:Object(c.__)("Video Settings","amp")},Object(r.createElement)(o.ToggleControl,{label:Object(c.__)("Loop","amp"),onChange:this.toggleAttribute("loop"),checked:f}),Object(r.createElement)(o.TextControl,{label:Object(c.__)("Assistive Text","amp"),help:Object(c.__)("Used to inform visually impaired users about the video content.","amp"),value:v,onChange:function(e){return u({ampAriaLabel:e})}}),(!this.state.extractingPoster||b)&&Object(r.createElement)(z.MediaUploadCheck,null,Object(r.createElement)(o.BaseControl,{id:w,label:Object(c.__)("Poster Image","amp"),className:"editor-video-poster-control"},!b&&Object(r.createElement)(o.Notice,{status:"error",isDismissible:!1},Object(c.__)("A poster image must be set.","amp")),Object(r.createElement)(z.MediaUpload,{title:Object(c.__)("Select Poster Image","amp"),onSelect:function(e){u({poster:e.url})},allowedTypes:p.r,render:function(e){var t=e.open;return Object(r.createElement)(o.Button,{id:w,className:B()("video-block__poster-image",{"editor-post-featured-image__toggle":!b,"editor-post-featured-image__preview":b}),onClick:t,"aria-label":b?Object(c.__)("Replace Poster Image","amp"):null},b&&Object(r.createElement)(o.ResponsiveWrapper,{naturalWidth:h,naturalHeight:y},Object(r.createElement)("img",{src:b,alt:""})),!b&&Object(c.__)("Set Poster Image","amp"))}}))),_&&Object(r.createElement)(o.Notice,{status:"warning",isDismissible:!1},Object(c.sprintf)(
/* translators: %d: the number of recommended megabytes per second */
Object(c.__)("A video size of less than %d MB per second is recommended.","amp"),Wn.g)," ",Object(c.sprintf)(
/* translators: %d: the number of actual megabytes per second */
Object(c.__)("The selected video is %d MB per second.","amp"),Math.round(k/Wn.d))))),Object(r.createElement)("figure",{className:"wp-block-video"},Object(r.createElement)("video",{autoPlay:!0,muted:!0,"aria-label":v,loop:f,controls:!f,poster:b,ref:this.videoPlayer,src:g,onLoadedMetadata:this.onLoadedMetadata}),(!z.RichText.isEmpty(m)||i)&&Object(r.createElement)(z.RichText,{tagName:"figcaption",placeholder:Object(c.__)("Write caption…","amp"),value:m,onChange:function(e){return u({caption:e})},inlineToolbar:!0})))}}]),t}(r.Component),Gn=Object(a.compose)([Object(i.withSelect)((function(e,t){var n,r=t.attributes,o=e("core").getMedia,a=e("amp/story").getSettings,i=r.id,c=r.poster,l=i?o(i):void 0;return l&&l.featured_media&&!c&&(n=o(l.featured_media)),{media:l,videoFeaturedImage:n,allowedVideoMimeTypes:a().allowedVideoMimeTypes}})),o.withNotices,a.withInstanceId])(Kn),$n=Object(a.createHigherOrderComponent)(Object(i.withSelect)((function(e){return{isReordering:(0,e("amp/story").isReordering)()}})),"withIsReordering"),Yn=Object(a.createHigherOrderComponent)(Object(i.withSelect)((function(e){return{selectedBlock:(0,e("core/block-editor").getSelectedBlock)()}})),"withSelectedBlock");function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(n,!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn=Object(a.compose)(Sn,xn,Nn),Zn=function(e){return Jn((function(t){var n,o=t.clientId,a=t.blockName,i=t.hasSelectedInnerBlock,c=t.attributes;if(-1===p.a.indexOf(a))return Object(r.createElement)(e,t);if(i&&"amp/amp-story-page"===a)return n=Xn({},t.wrapperProps,{"data-amp-selected":"parent"}),Object(r.createElement)(e,s()({},t,{wrapperProps:n}));var l="core/image"===a&&!c.ampShowImageCaption||"core/video"===a&&!c.ampShowCaption;if(n=Xn({},t.wrapperProps,{"data-amp-caption":l?"noCaption":void 0,"data-font-family":c.ampFontFamily||void 0}),p.b.includes(a)){var u={transform:"scale(var(--preview-scale)) translateX(var(--preview-translateX)) translateY(var(--preview-translateY)) rotate(".concat(c.rotationAngle||0,"deg)")};"amp/amp-story-cta"===a&&(u.transform="scale(var(--preview-scale))"),n=Xn({},n,{style:Xn({},n.style,{},u)});var d={top:"".concat(c.positionTop,"%"),left:"".concat(c.positionLeft,"%")};return Object(r.createElement)("div",{className:"amp-page-child-block","data-block":o,"data-type":a,style:d},Object(r.createElement)(e,s()({},t,{wrapperProps:n,enableAnimation:!1})))}return Object(r.createElement)(e,s()({},t,{wrapperProps:n,enableAnimation:!1}))}))};function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(n,!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nr=function(e){return Object(i.withSelect)((function(e,t){var n=t.clientId,r=e("core/block-editor").getBlockRootClientId,o=e("amp/story"),a=o.getCurrentPage,i=o.isPlayingAnimation,c=a()===n;return{isActivePage:c,isTopLevelBlock:""===r(n),isPlayingAnimation:c&&i()}}))((function(t){var n=t.isTopLevelBlock,o=t.isActivePage,a=t.isPlayingAnimation;if(!n)return Object(r.createElement)(e,t);var c=tr({},t,{className:tr({},t.className,{"amp-page-active":n&&o,"amp-page-inactive":n&&!o,"amp-page-is-animating":a}),isLocked:!o}),l=Object(i.dispatch)("amp/story").setCurrentPage,u=Object(i.dispatch)("core/block-editor").selectBlock;return o?Object(r.createElement)(e,c):Object(r.createElement)(e,s()({},c,{onSelect:function(){l(t.clientId),u(t.clientId)}}))}))},rr=Object(a.compose)(xn,Nn,Yn,$n),or=function(){return rr((function(e){var t=e.blockName,n=e.hasSelectedInnerBlock,o=e.isReordering,a=e.selectedBlock;return o?null:"amp/amp-story-page"===t&&n&&a?Object(r.createElement)($e,{srcClientId:a.clientId,srcBlockName:a.name}):null}))},ar=Object(a.compose)(Object(i.withSelect)((function(e,t){var n=e("core/block-editor"),r=n.getBlockRootClientId,o=n.getBlock,a=n.getBlockOrder,i=n.getBlocksByClientId;if("amp/amp-story-cta"!==t.name)return{};var c=o(r(t.clientId));if(!c)return{};var l=0===a().indexOf(c.clientId),s=i(a(c.clientId)).find((function(e){return e.name===t.name})),u=s&&s.clientId!==t.clientId;return{isInvalid:l||u,originalBlockClientId:u&&s.clientId}})),Object(i.withDispatch)((function(e,t){var n=t.originalBlockClientId;return{selectFirst:function(){return e("core/block-editor").selectBlock(n)}}}))),ir=Object(a.createHigherOrderComponent)((function(e){return ar((function(t){var n=t.isInvalid,a=t.originalBlockClientId,i=t.selectFirst,l=lt()(t,["isInvalid","originalBlockClientId","selectFirst"]);if(!n||"amp/amp-story-cta"!==l.name)return Object(r.createElement)(e,l);var s=Object(H.getBlockType)(l.name),u=[Object(r.createElement)(o.Button,{key:"remove",isLarge:!0,onClick:function(){return l.onReplace([])}},Object(c.__)("Remove","amp"))];return a&&u.unshift(Object(r.createElement)(o.Button,{key:"find-original",isLarge:!0,onClick:i},Object(c.__)("Find original","amp"))),Object(r.createElement)(z.Warning,{actions:u},Object(r.createElement)("strong",null,s.title,": "),a?Object(c.__)("This block can only be used once per page.","amp"):Object(c.__)("This block can not be used on the first page.","amp"))}))}),"withCallToActionValidation");n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return U})),n.d(t,"e",(function(){return W})),n.d(t,"g",(function(){return K})),n.d(t,"h",(function(){return X})),n.d(t,"m",(function(){return Ne})),n.d(t,"o",(function(){return He})),n.d(t,"v",(function(){return Ue})),n.d(t,"s",(function(){return Ve})),n.d(t,"t",(function(){return $e})),n.d(t,"u",(function(){return dt})),n.d(t,"l",(function(){return ft})),n.d(t,"b",(function(){return yt})),n.d(t,"i",(function(){return vt})),n.d(t,"r",(function(){return jt})),n.d(t,"q",(function(){return Pt})),n.d(t,"n",(function(){return It})),n.d(t,"j",(function(){return Qt})),n.d(t,"k",(function(){return tn})),n.d(t,"p",(function(){return sn})),n.d(t,"G",(function(){return dn})),n.d(t,"H",(function(){return mn})),n.d(t,"x",(function(){return En})),n.d(t,"y",(function(){return Sn})),n.d(t,"z",(function(){return xn})),n.d(t,"B",(function(){return Tn})),n.d(t,"E",(function(){return Nn})),n.d(t,"I",(function(){return Mn})),n.d(t,"J",(function(){return Ln})),n.d(t,"M",(function(){return Hn})),n.d(t,"D",(function(){return zn})),n.d(t,"C",(function(){return Un})),n.d(t,"f",(function(){return Gn})),n.d(t,"F",(function(){return $n})),n.d(t,"K",(function(){return Yn})),n.d(t,"N",(function(){return Zn})),n.d(t,"w",(function(){return nr})),n.d(t,"L",(function(){return or})),n.d(t,"A",(function(){return ir}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),o=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{deprecated:"migrated"})}},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var r=6,o=72,a=1200,i=1e6,c=1,l="select-file-type-error",s="select-file-size-error"},function(e,t){!function(){e.exports=this.wp.hooks}()},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){!function(){e.exports=this.React}()},function(e,t,n){var r=n(41),o=n(56),a=n(42);e.exports=function(e,t){return r(e)||o(e,t)||a()}},function(e,t){!function(){e.exports=this.wp.richText}()},function(e,t){!function(){e.exports=this.regeneratorRuntime}()},function(e,t){!function(){e.exports=this.wp.editPost}()},function(e,t,n){var r=n(72);e.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},function(e,t){!function(){e.exports=this.wp.blob}()},function(e,t){function n(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,l,"next",e)}function l(e){n(i,o,a,c,l,"throw",e)}c(void 0)}))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return g}));var r=n(4),o=n.n(r),a=n(10),i=n(1),c=n(13);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s,u=window.wp,p=u.media.View.extend({className:"notice notice-warning notice-alt inline",template:(s=Object(i.sprintf)(
/* translators: 1: image width in pixels. 2: image height in pixels. 3: required minimum width in pixels. 4: required minimum height in pixels. */
Object(i.__)("The selected image is too small (%1$s by %2$s pixels). It should have a size of at least %3$s by %4$s pixels.","amp"),"{{width}}","{{height}}","{{minWidth}}","{{minHeight}}"),Object(c.g)(s))}),d=u.media.View.extend({className:"notice notice-warning notice-alt inline",template:function(){var e=Object(i.sprintf)(
/* translators: 1: the selected file type. */
Object(i.__)("The selected file mime type, %1$s, is not allowed.","amp"),"{{mimeType}}");return Object(c.g)(e)}()}),m=u.media.View.extend({className:"notice notice-warning notice-alt inline",template:function(){var e=Object(i.sprintf)(
/* translators: 1: the recommended max MB per second for videos. 2: the actual MB per second of the video. */
Object(i.__)("A video size of less than %1$s MB per second is recommended. The selected video is %2$s MB per second.","amp"),"{{maxVideoMegabytesPerSecond}}","{{actualVideoMegabytesPerSecond}}");return Object(c.g)(e)}()}),f=u.media.view.Toolbar.Select.extend({refresh:function(){u.media.view.Toolbar.Select.prototype.refresh.call(this);var e=this.controller.state(),t=e.get("selection").models[0],n=e.collection.get("library").get("suggestedWidth"),r=e.collection.get("library").get("suggestedHeight");!t||"image"!==t.get("type")||!t.get("width")||t.get("width")>=n&&t.get("height")>=r?this.secondary.unset("select-error"):this.secondary.set("select-error",new p({minWidth:n,minHeight:r,width:t.get("width"),height:t.get("height")})),c.b.call(this,t,d)}}),b=u.media.view.Toolbar.Select.extend({refresh:function(){u.media.view.Toolbar.Select.prototype.refresh.call(this);var e=this.controller.state().get("selection").models[0];c.b.call(this,e,d),c.a.call(this,e,m);var t=this.$el.parents(".media-frame");t&&t.toggleClass("has-two-notices",c.k.call(this))}}),g=function(e){return u.media.view.MediaFrame.Select.extend({createSelectToolbar:function(t,n){(n=n||this.options.button||{}).controller=this,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{allowedTypes:Object(a.get)(this,["options","allowedTypes"],null)}),t.view=new e(n)}})}},function(e,t){!function(){e.exports=this.wp.date}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t,n){"use strict";var r=n(0),o=(n(9),n(2)),a=n(31),i=n(5),c=n(1),l=n(13),s=Object(i.withSelect)((function(e){var t=e("core/editor").getCurrentPost(),n=e("core/editor").getEditedPostAttribute("featured_media"),r=t.featured_media||n;return{featuredMedia:r?e("core").getMedia(r):null}}))((function(e){var t=e.featuredMedia,n=e.dimensions,i=e.required,s=Object(l.m)(t,n,i);return s?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.PluginPrePublishPanel,{title:Object(c.__)("Featured Image","amp"),initialOpen:"true"},Object(r.createElement)(o.Notice,{status:i?"warning":"notice",isDismissible:!1},s.map((function(e,t){return Object(r.createElement)("p",{key:"error-".concat(t)},e)}))))):null})),u=n(8),p=(Object(u.createHigherOrderComponent)((function(e){return function(t){var n=t.media,a=Object(l.m)(n,Object(l.f)(),!1);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.Notice,{status:"notice",isDismissible:!1},a.map((function(e,t){return Object(r.createElement)("p",{key:"error-".concat(t)},e)}))),Object(r.createElement)(e,t)):Object(r.createElement)(e,t)}}),"withFeaturedImageNotice"),n(14)),d=n.n(p),m=n(15),f=n.n(m),b=n(16),g=n.n(b),h=n(12),y=n.n(h),v=n(17),O=n.n(v),j=n(4),k=n.n(j),w=n(10),_=n(35),E=window.wp,S=function(e){return function(e){function t(){var e,n;d()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=f()(this,(e=g()(t)).call.apply(e,[this].concat(o))),k()(y()(n),"initFileTypeMedia",(function(){var e=Object(_.c)(_.a),t=n.onSelect,r=Object(w.isEqual)(["video"],n.props.allowedTypes)?"video/mp4":n.props.allowedTypes;n.frame=new e({allowedTypes:n.props.allowedTypes,button:{text:Object(c.__)("Select","amp"),close:!1},states:[new E.media.controller.Library({title:Object(c.__)("Select or Upload Media","amp"),library:E.media.query({type:r}),multiple:!1,date:!1,priority:20})]}),E.media.frame=n.frame,n.frame.on("close",(function(){n.initFileTypeMedia()}),y()(n)),n.frame.on("select",(function(){t&&t(),n.frame.close()}),y()(n))})),("story-background-media"===n.props.id||Object(w.isEqual)(["video/mp4"],n.props.allowedTypes))&&n.initFileTypeMedia(),n}return O()(t,e),t}(e)};n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return S}))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"getAnimatedBlocks",(function(){return p})),n.d(r,"getAnimatedBlocksPerPage",(function(){return d})),n.d(r,"getAnimationEntry",(function(){return m})),n.d(r,"getAnimationSuccessors",(function(){return f})),n.d(r,"isPlayingAnimation",(function(){return b})),n.d(r,"isValidAnimationPredecessor",(function(){return g})),n.d(r,"getCurrentPage",(function(){return h})),n.d(r,"getBlockOrder",(function(){return y})),n.d(r,"getBlockIndex",(function(){return v})),n.d(r,"isReordering",(function(){return O})),n.d(r,"getCopiedMarkup",(function(){return j})),n.d(r,"getSettings",(function(){return k}));var o={};n.r(o),n.d(o,"addAnimation",(function(){return S})),n.d(o,"changeAnimationType",(function(){return x})),n.d(o,"changeAnimationDuration",(function(){return C})),n.d(o,"changeAnimationDelay",(function(){return P})),n.d(o,"playAnimation",(function(){return I})),n.d(o,"finishAnimation",(function(){return A})),n.d(o,"stopAnimation",(function(){return B})),n.d(o,"setCurrentPage",(function(){return T})),n.d(o,"startReordering",(function(){return N})),n.d(o,"movePageToPosition",(function(){return D})),n.d(o,"saveOrder",(function(){return R})),n.d(o,"resetOrder",(function(){return M})),n.d(o,"setCopiedMarkup",(function(){return F})),n.d(o,"clearCopiedMarkup",(function(){return L}));var a=n(4),i=n.n(a),c=n(5),l=n(20),s=n.n(l),u=Object.freeze({stopped:1,prepared:2,playing:3,finished:4});function p(e){return e.animations&&e.animations.animationOrder?e.animations.animationOrder:{}}function d(e,t){return p(e)&&p(e)[t]?e.animations.animationOrder[t]:[]}function m(e,t,n){return d(e,t).find((function(e){return e.id===n}))}function f(e,t,n){return d(e,t).filter((function(e){return e.parent===n}))}function b(e,t,n){if(t&&n){var r=m(e,t,n);return!(!r||!r.status)&&r.status!==u.stopped}if(t)return Boolean(d(e,t).find((function(e){var t=e.status;return t&&t!==u.stopped})));for(var o=0,a=Object.keys(p(e));o<a.length;o++){if(b(e,a[o]))return!0}return!1}function g(e,t,n,r){if(e.animations=e.animations||{},e.animations.animationOrder=e.animations.animationOrder||{},void 0===r)return!0;var o=e.animations.animationOrder[t]||[],a=function(e){return o.find((function(t){return t.id===e}))};if(!a(r))return!1;return!function(e,t){for(var n=t;void 0!==n;){if(n===e)return!0;var r=a(n);n=r?r.parent:void 0}return!1}(n,r)}function h(e){return e.currentPage}function y(e){return e.blocks.order||[]}function v(e,t){return e.blocks.order?e.blocks.order.indexOf(t):null}function O(e){return e.blocks.isReordering||!1}function j(e){return e.copiedMarkup||""}function k(e){return e.editorSettings||window.ampStoriesEditorSettings||{}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=Object(c.combineReducers)({animations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ANIMATION":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=t.predecessor,c=n[r]||[],l=function(e){return c.findIndex((function(t){return t.id===e}))},s=g({animations:e},r,o,a)?a:void 0;return-1!==l(o)?c[l(o)].parent=s:c.push({id:o,parent:s}),_({},e,{animationOrder:_({},n,i()({},r,c))})}(e,t);case"CHANGE_ANIMATION_TYPE":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=t.animationType,c=n[r]||[],l=function(e){return c.findIndex((function(t){return t.id===e}))};if(-1!==l(o)){if(c[l(o)].animationType=a,!a){var s=c[l(o)].parent,u=c.filter((function(e){return e.parent===o}));for(var p in u)-1!==l(p)&&(c[l(p)].parent=s.parent)}}else c.push({id:o,animationType:a});return _({},e,{animationOrder:_({},n,i()({},r,c))})}(e,t);case"CHANGE_ANIMATION_DURATION":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=t.duration,c=n[r]||[],l=function(e){return c.findIndex((function(t){return t.id===e}))};return-1!==l(o)&&(c[l(o)].duration=a),_({},e,{animationOrder:_({},n,i()({},r,c))})}(e,t);case"CHANGE_ANIMATION_DELAY":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=t.delay,c=n[r]||[],l=function(e){return c.findIndex((function(t){return t.id===e}))};return-1!==l(o)&&(c[l(o)].delay=a),_({},e,{animationOrder:_({},n,i()({},r,c))})}(e,t);case"PLAY_ANIMATION":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=n[r]||[],c=function(e){return a.findIndex((function(t){return t.id===e}))};return o?-1!==c(o)&&(a[c(o)].status=u.playing):a.forEach((function(e,t){a[t]=_({},e,{status:void 0===e.parent?u.playing:u.prepared})})),_({},e,{animationOrder:_({},n,i()({},r,a))})}(e,t);case"FINISH_ANIMATION":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=n[r]||[],c=function(e){return a.findIndex((function(t){return t.id===e}))};return-1!==c(o)&&(a[c(o)].status=u.finished),_({},e,{animationOrder:_({},n,i()({},r,a))})}(e,t);case"STOP_ANIMATION":return function(e,t){var n=_({},e.animationOrder),r=t.page,o=t.item,a=n[r]||[],c=function(e){return a.findIndex((function(t){return t.id===e}))};return o?-1!==c(o)&&(a[c(o)].status=u.stopped):a.forEach((function(e,t){a[t]=_({},e,{status:u.stopped})})),_({},e,{animationOrder:_({},n,i()({},r,a))})}(e,t);default:return e}},currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=t.page;switch(t.type){case"SET_CURRENT_PAGE":return n;default:return e}},blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.order;switch(t.type){case"START_REORDERING":return _({},e,{order:n,isReordering:!0});case"STOP_REORDERING":return _({},e,{isReordering:!1});case"MOVE_PAGE":var r=t.page,o=t.index,a=e.order.indexOf(r),i=s()(e.order);return i.splice.apply(i,[o,0].concat(s()(i.splice(a,1)))),_({},e,{order:i});case"RESET_ORDER":return _({},e,{order:n,isReordering:!1});default:return e}},copiedMarkup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COPIED_MARKUP":var n=t.markup;return"string"==typeof n?n:e;case"CLEAR_COPIED_MARKUP":return""===e?e:"";default:return e}}});function S(e,t,n){return{type:"ADD_ANIMATION",page:e,item:t,predecessor:n}}function x(e,t,n){return{type:"CHANGE_ANIMATION_TYPE",page:e,item:t,animationType:n}}function C(e,t,n){return{type:"CHANGE_ANIMATION_DURATION",page:e,item:t,duration:n}}function P(e,t,n){return{type:"CHANGE_ANIMATION_DELAY",page:e,item:t,delay:n}}function I(e,t){return{type:"PLAY_ANIMATION",page:e,item:t}}function A(e,t){return{type:"FINISH_ANIMATION",page:e,item:t}}function B(e,t){return{type:"STOP_ANIMATION",page:e,item:t}}function T(e){return{type:"SET_CURRENT_PAGE",page:e}}function N(e){return{type:"START_REORDERING",order:e}}function D(e,t){return{type:"MOVE_PAGE",page:e,index:t}}function R(){return{type:"STOP_REORDERING"}}function M(e){return{type:"RESET_ORDER",order:e}}function F(e){return{type:"SET_COPIED_MARKUP",markup:e}}function L(){return{type:"CLEAR_COPIED_MARKUP"}}var H=n(50),z=n.n(H),U=n(51),q=n.n(U),W=n(10),V=n(3),K={PLAY_ANIMATION:function(e,t){var n=t.getState,r=t.dispatch,o=Object(c.select)("core/block-editor").getBlock,a=n(),i=e.page,l=e.item;if(l){var s=m(a,i,l),u=s.id,p=s.animationType,b=o(u);Object(V.P)(b,p)}else d(a,i).forEach((function(e){var t=e.id,n=e.animationType,r=o(t);Object(V.P)(r,n)}));(l?[m(a,i,l)]:f(a,i,void 0)).forEach((function(e){var t=e.id,n=e.animationType,a=e.duration,c=e.delay,l=o(t);Object(V.S)(l,n,a?parseInt(a):0,c?parseInt(c):0,(function(){return r(A(i,t))}))}))},STOP_ANIMATION:function(e,t){var n=t.getState,r=Object(c.select)("core/block-editor").getBlock,o=n(),a=e.page,i=e.item;(i?[m(o,a,i)]:d(o,a)).forEach((function(e){var t=e.id,n=e.animationType,o=r(t);o&&n&&Object(V.O)(o,n)}))},FINISH_ANIMATION:function(e,t){var n=t.getState,r=t.dispatch,o=n(),a=e.page,i=e.item;(f(o,a,i).filter((function(e){var t=e.status;return t&&t===u.prepared})).forEach((function(e){r(I(a,e.id))})),d(o,a).find((function(e){var t=e.status;return t&&(t===u.prepared||t===u.playing)})))||d(o,a).forEach((function(e){var t=e.id;r(B(a,t))}))},SET_CURRENT_PAGE:function(e,t){var n=t.getState,r=t.dispatch,o=n();Object.keys(p(o)).forEach((function(e){r(B(e))}))}};var G=function(e){var t,n=[z()(K),q.a],r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:e.getState,dispatch:function(){return r.apply(void 0,arguments)}};return t=n.map((function(e){return e(o)})),r=W.flowRight.apply(void 0,s()(t))(e.dispatch),e.dispatch=r,e};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Y=Object(c.registerStore)("amp/story",{reducer:E,selectors:r,actions:o,initialState:{animations:{animationOrder:{}},editorSettings:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},window.ampStoriesEditorSettings),blocks:{order:[],isReordering:!1},copiedMarkup:""}});G(Y);t.a=Y},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){!function(){e.exports=this.wp.domReady}()},function(e,t){!function(){e.exports=this.wp.plugins}()},function(e,t,n){var r=n(41),o=n(43),a=n(42);e.exports=function(e){return r(e)||o(e)||a()}},function(e,t,n){var r=n(64),o=n(65);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var c=0;c<16;++c)t[a+c]=i[c];return t||o(i)}},function(e,t,n){e.exports=function(e,t){var n,r,o,a=0;function i(){var t,i,c=r,l=arguments.length;e:for(;c;){if(c.args.length===arguments.length){for(i=0;i<l;i++)if(c.args[i]!==arguments[i]){c=c.next;continue e}return c!==r&&(c===o&&(o=c.prev),c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.next=r,c.prev=null,r.prev=c,r=c),c.val}c=c.next}for(t=new Array(l),i=0;i<l;i++)t[i]=arguments[i];return c={args:t,val:e.apply(null,t)},r?(r.prev=c,c.next=r):o=c,a===n?(o=o.prev).next=null:a++,r=c,c.val}return t&&t.maxSize&&(n=t.maxSize),i.clear=function(){r=null,o=null,a=0},i}},function(e,t){!function(){e.exports=this.wp.wordcount}()},function(e,t,n){"use strict";e.exports=function(e){var t,n={};return function e(t,n){var r;if(Array.isArray(n))for(r=0;r<n.length;r++)e(t,n[r]);else for(r in n)t[r]=(t[r]||[]).concat(n[r])}(n,e),(t=function(e){return function(t){return function(r){var o,a,i=n[r.type],c=t(r);if(i)for(o=0;o<i.length;o++)(a=i[o](r,e))&&e.dispatch(a);return c}}}).effects=n,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.dispatch;return function(e){return function(n){return Array.isArray(n)?n.filter(Boolean).map(t):e(n)}}}},function(e,t){!function(){e.exports=this.wp.htmlEntities}()},function(e,t,n){e.exports=n(75)},function(e,t){!function(){e.exports=this.wp.dom}()},function(e,t,n){"use strict";n.r(t);var r=n(28),o=n.n(r),a=n(30),i=n.n(a),c=n(34),l=n.n(c),s=n(10),u=n(25),p=n(1),d=n(44),m=n.n(d),f=n(5),b=n(45),g=n(29),h=n(11),y=(n(57),n(39)),v=n(22),O=n(3),j=n(6),k=n(40),w=Object(f.select)("core/block-editor"),_=w.getSelectedBlock,E=w.getBlocksByClientId,S=w.getClientIdsWithDescendants,x=w.getBlockRootClientId,C=w.getBlockOrder,P=w.getBlock,I=w.getBlocks,A=w.getBlockAttributes,B=Object(f.dispatch)("core/block-editor"),T=B.moveBlockToPosition,N=B.updateBlockAttributes,D=Object(f.select)("core/edit-post"),R=D.getEditorMode,M=D.isFeatureActive,F=Object(f.dispatch)("core/edit-post").toggleFeature,L=Object(f.select)("amp/story"),H=L.isReordering,z=L.getBlockOrder,U=L.getCurrentPage,q=L.getAnimatedBlocks,W=Object(f.dispatch)("amp/story").setCurrentPage;m()((function(){Object(h.setDefaultBlockName)("amp/amp-story-page");var e=Object(h.getBlockTypes)().filter((function(e){var t=e.name;return!j.a.includes(t)})),t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;Object(h.unregisterBlockType)(i.name)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var c=E(S()),l=c.find((function(e){return"amp/amp-story-page"===e.name}));W(l?l.clientId:void 0);var s=!0,u=!1,d=void 0;try{for(var m,f=c[Symbol.iterator]();!(s=(m=f.next()).done);s=!0){var b=m.value;b.attributes.ampFontFamily&&Object(O.B)(b.attributes.ampFontFamily),Object(O.D)(b)}}catch(e){u=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}M("fixedToolbar")||F("fixedToolbar"),Object(O.N)();for(var g=0,y=["amp/amp-story-text","amp/amp-story-post-author","amp/amp-story-post-date","amp/amp-story-post-title"];g<y.length;g++){var v=y[g];Object(h.registerBlockStyle)(v,{name:"rounded",label:Object(p.__)("Rounded","amp")})}Object(h.registerBlockStyle)("amp/amp-story-text",{name:"half-rounded",label:Object(p.__)("Half Rounded","amp")}),Object(h.registerBlockStyle)("core/image",{name:"rounded",label:Object(p.__)("Rounded","amp")}),Object(h.registerBlockStyle)("core/quote",{name:"white",label:Object(p.__)("White","amp")}),Object(h.unregisterBlockStyle)("core/quote","large")}));var V,K=C(),G=S(),$=R();Object(f.subscribe)(l()(i.a.mark((function e(){var t,n,r,o,a,c,l,s,u,p,d,m,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(Object(O.C)(),t=Object(h.getDefaultBlockName)(),(n=_())?"amp/amp-story-page"===n.name&&"amp/amp-story-page"!==t?Object(h.setDefaultBlockName)("amp/amp-story-page"):"amp/amp-story-page"!==n.name&&"amp/amp-story-text"!==t&&Object(h.setDefaultBlockName)("amp/amp-story-text"):"amp/amp-story-page"!==t&&Object(h.setDefaultBlockName)("amp/amp-story-page"),V!==n&&(r=document.querySelector(".edit-post-layout"))&&r.setAttribute("data-block-name",n?n.name:""),V=n,o=C(),a=o.find((function(e){return!K.includes(e)})),K.filter((function(e){return!o.includes(e)})).includes(U())&&(c=Math.max(0,K.indexOf(U())-1),W((K=o)[c])),K=o,a&&W(a),l=!0,s=!1,u=void 0,e.prev=15,p=G[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)m=d.value,Object(O.F)(m),Object(O.E)(m),Object(O.I)(m),Object(O.H)(m),Object(O.G)(m);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),s=!0,u=e.t0;case 23:e.prev=23,e.prev=24,l||null==p.return||p.return();case 26:if(e.prev=26,!s){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(23);case 31:if(G=S(),"visual"!==(f=R())||f===$){e.next=40;break}case 34:if(document.querySelector(".editor-block-list__layout")){e.next=39;break}return e.next=37,new Promise((function(e){return setTimeout(e,200)}));case 37:e.next=34;break;case 39:Object(O.N)();case 40:$=f;case 41:case"end":return e.stop()}}),e,null,[[15,19,23,31],[24,,26,30]])})))),k.a.subscribe((function(){var e=C(),t=z();if(!H()&&t.length>0&&e!==t){var n=!0,r=!1,a=void 0;try{for(var i,c=t.entries()[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=o()(i.value,2),u=l[0],p=l[1];T(p,"","",u)}}catch(e){r=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}var d=q(),m=function(e){if(!d.hasOwnProperty(e)||!P(e))return"continue";var t=A(e),n=d[e].filter((function(t){var n=t.id;return e===x(n)})),r=Object(O.w)(n),o=Math.ceil(r/1e3);"time"===t.autoAdvanceAfter?o>t.autoAdvanceAfterDuration&&N(e,{autoAdvanceAfterDuration:o}):N(e,{autoAdvanceAfterDuration:o});var a=!0,i=!1,c=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var u=l.value,p=u.id,m=u.parent,f=u.animationType,b=u.duration,g=u.delay;Object(O.A)(m);var h=m?P(m):void 0;N(p,{ampAnimationAfter:h?h.attributes.anchor:void 0,ampAnimationType:f,ampAnimationDuration:b?"".concat(b,"ms"):void 0,ampAnimationDelay:g?"".concat(g,"ms"):void 0})}}catch(e){i=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw c}}};for(var p in d)m(p);var f,b=I(),g=!0,h=!1,y=void 0;try{for(var v,j=b[Symbol.iterator]();!(g=(v=j.next()).done);g=!0){var k=v.value;f=k,Object(s.has)(f,["attributes","anchor"])&&f.attributes.anchor!==f.clientId&&N(f.clientId,{anchor:f.clientId})}}catch(e){h=!0,y=e}finally{try{g||null==j.return||j.return()}finally{if(h)throw y}}}));var Y=n(83);Y.keys().forEach((function(e){var t=Y(e),n=t.name,r=t.render,o=t.icon,a=t.isActive;(void 0===a||a)&&Object(b.registerPlugin)(n,{render:r,icon:o})})),Object(u.addFilter)("blocks.registerBlockType","ampStoryEditorBlocks/setBlockParent",O.Q),Object(u.addFilter)("blocks.registerBlockType","ampStoryEditorBlocks/addAttributes",O.a),Object(u.addFilter)("blocks.registerBlockType","ampStoryEditorBlocks/filterBlockTransforms",O.i),Object(u.addFilter)("blocks.registerBlockType","ampStoryEditorBlocks/deprecateCoreBlocks",O.f),Object(u.addFilter)("editor.BlockEdit","ampStoryEditorBlocks/addStorySettings",v.x),Object(u.addFilter)("editor.BlockEdit","ampStoryEditorBlocks/addPageNumber",v.I),Object(u.addFilter)("editor.BlockEdit","ampStoryEditorBlocks/rightClickHandler",v.J),Object(u.addFilter)("editor.BlockEdit","ampStoryEditorBlocks/addEditFeaturedImage",v.D),Object(u.addFilter)("editor.BlockEdit","ampEditorBlocks/addVideoBlockPreview",v.C,9),Object(u.addFilter)("editor.PostFeaturedImage","ampStoryEditorBlocks/addFeaturedImageNotice",v.M),Object(u.addFilter)("editor.BlockListBlock","ampStoryEditorBlocks/withActivePageState",v.w),Object(u.addFilter)("editor.BlockListBlock","ampStoryEditorBlocks/addWrapperProps",v.N),Object(u.addFilter)("editor.MediaUpload","ampStoryEditorBlocks/addEnforcedFileType",(function(e){return Object(y.b)(e)})),Object(u.addFilter)("editor.MediaUpload","ampStoryEditorBlocks/addCroppedFeaturedImage",(function(e){return Object(v.B)(e,Object(O.q)())})),Object(u.addFilter)("blocks.getSaveContent.extraProps","ampStoryEditorBlocks/addExtraAttributes",O.b),Object(u.addFilter)("blocks.getSaveElement","ampStoryEditorBlocks/wrapBlocksInGridLayer",O.U),Object(u.addFilter)("blocks.getSaveElement","ampStoryEditorBlocks/addVideoAriaLabel",O.d),Object(u.addFilter)("editor.BlockDropZone","ampStoryEditorBlocks/withStoryBlockDropZone",v.L),Object(u.addFilter)("editor.BlockEdit","ampStoryEditorBlocks/withCallToActionValidation",v.A),Object(u.addFilter)("blocks.getBlockAttributes","ampStoryEditorBlocks/filterBlockAttributes",O.h);var Q=n(88);Q.keys().forEach((function(e){var t=Q(e),n=t.name,r=t.settings;Object(h.registerBlockType)(n,r)}));var X=n(99);X.keys().sort((function(e,t){return e.priority>t.priority?1:-1})).forEach((function(e){var t=X(e),n=t.name,r=t.settings;Object(g.registerFormatType)(n,r)}))},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}},function(e,t,n){},function(e,t,n){"use strict";var r=n(59);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t){!function(){e.exports=this.wp.coreData}()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},function(e,t,n){},function(e,t,n){},function(e,t,n){var r;window,r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=31)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(0),o=n(5),a=n(6),i=n(14),c=n(16),l="prototype",s=function(e,t,n){var u,p,d,m,f=e&s.F,b=e&s.G,g=e&s.S,h=e&s.P,y=e&s.B,v=b?r:g?r[t]||(r[t]={}):(r[t]||{})[l],O=b?o:o[t]||(o[t]={}),j=O[l]||(O[l]={});for(u in b&&(n=t),n)d=((p=!f&&v&&void 0!==v[u])?v:n)[u],m=y&&p?c(d,r):h&&"function"==typeof d?c(Function.call,d):d,v&&i(v,u,d,e&s.U),O[u]!=d&&a(O,u,m),h&&j[u]!=d&&(j[u]=d)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(7),o=n(35);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(8),o=n(33),a=n(34),i=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(20);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(t,n){t.exports=e},function(e,t,n){var r=n(2),o=n(0).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(0),o=n(6),a=n(15),i=n(9)("src"),c="toString",l=Function[c],s=(""+l).split(c);n(5).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,c){var l="function"==typeof n;l&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(a(n,i)||o(n,i,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:c?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[i]||l.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(17);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(37),o=n(26);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(10),o=n(11);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(19),o=n(22),a=n(38);e.exports=function(e){return function(t,n,i){var c,l=r(t),s=o(l.length),u=a(i,s);if(e&&n!=n){for(;u<s;)if((c=l[u++])!=c)return!0}else for(;u<s;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(23),o=Math.min;e.exports=function(e){return 0<e?o(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){var r=n(25)("keys"),o=n(9);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(5),o=n(0),a="__core-js_shared__",i=o[a]||(o[a]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(39)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(11);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(42)})},function(e,t,n){var r=n(25)("wks"),o=n(9),a=n(0).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(32),n(28),n(45),n(50),n(51),n(52),n(55);var r=n(12),o=i(n(57)),a=i(n(58));function i(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s,u={13:"enter",27:"escape",32:"space",38:"up",40:"down"},p=((s=document.createElement("x")).style.cssText="pointer-events:auto","auto"===s.style.pointerEvents);function d(){return!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var m=function(e){function t(t){var n;return(n=e.call(this,t)||this).elementReferences={},n.state={focused:null,hovered:null,clicked:null,menuOpen:!1,options:t.defaultValue?[t.defaultValue]:[],query:t.defaultValue,selected:null},n.handleComponentBlur=n.handleComponentBlur.bind(l(l(n))),n.handleKeyDown=n.handleKeyDown.bind(l(l(n))),n.handleUpArrow=n.handleUpArrow.bind(l(l(n))),n.handleDownArrow=n.handleDownArrow.bind(l(l(n))),n.handleEnter=n.handleEnter.bind(l(l(n))),n.handlePrintableKey=n.handlePrintableKey.bind(l(l(n))),n.handleListMouseLeave=n.handleListMouseLeave.bind(l(l(n))),n.handleOptionBlur=n.handleOptionBlur.bind(l(l(n))),n.handleOptionClick=n.handleOptionClick.bind(l(l(n))),n.handleOptionFocus=n.handleOptionFocus.bind(l(l(n))),n.handleOptionMouseEnter=n.handleOptionMouseEnter.bind(l(l(n))),n.handleInputBlur=n.handleInputBlur.bind(l(l(n))),n.handleInputChange=n.handleInputChange.bind(l(l(n))),n.handleInputFocus=n.handleInputFocus.bind(l(l(n))),n.pollInputElement=n.pollInputElement.bind(l(l(n))),n.getDirectInputChanges=n.getDirectInputChanges.bind(l(l(n))),n}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.pollInputElement()},n.componentWillUnmount=function(){clearTimeout(this.$pollInput),clearTimeout(this.$blurInput)},n.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout((function(){e.pollInputElement()}),100)},n.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},n.componentDidUpdate=function(e,t){var n=this.state,r=n.focused,o=n.clicked,a=null===r,i=t.focused!==r;(i&&!a||null!==o)&&this.elementReferences[r].focus();var c=-1===r,l=i&&null===t.focused;if(c&&l){var s=this.elementReferences[r];s.setSelectionRange(0,s.value.length)}},n.hasAutoselect=function(){return!d()&&this.props.autoselect},n.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},n.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},n.handleComponentBlur=function(e){var t,n=this.state,r=n.options,o=n.query,a=n.selected;this.props.confirmOnBlur?(t=e.query||o,this.props.onConfirm(r[a])):t=o,this.setState({focused:null,clicked:null,menuOpen:e.menuOpen||!1,query:t,selected:null})},n.handleListMouseLeave=function(e){this.setState({hovered:null})},n.handleOptionBlur=function(e,t){var n=this.state,r=n.focused,o=n.clicked,a=n.menuOpen,i=n.options,c=n.selected,l=null===e.relatedTarget&&null===o,s=e.relatedTarget===this.elementReferences[-1],u=r!==t&&-1!==r;if(!u&&l||!u&&!s){var p=a&&d();this.handleComponentBlur({menuOpen:p,query:this.templateInputValue(i[c])})}},n.handleInputBlur=function(e){var t=this,n=this.state,r=n.focused,o=n.menuOpen,a=n.options,i=n.query,c=n.selected,l=-1!==r;if(clearTimeout(this.$blurInput),!l){var s=o&&d(),u=d()?i:this.templateInputValue(a[c]);this.$blurInput=setTimeout((function(){return t.handleComponentBlur({menuOpen:s,query:u})}),200)}},n.handleInputChange=function(e){var t=this,n=this.props,r=n.minLength,o=n.source,a=n.showAllValues,i=this.hasAutoselect(),c=e.target.value,l=0===c.length,s=this.state.query.length!==c.length,u=c.length>=r;this.setState({query:c}),a||!l&&s&&u?o(c,(function(e){var n=0<e.length;t.setState({menuOpen:n,options:e,selected:i&&n?0:-1})})):!l&&u||this.setState({menuOpen:!1,options:[]})},n.handleInputClick=function(e){this.handleInputChange(e)},n.handleInputFocus=function(e){this.setState({focused:-1})},n.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},n.handleOptionMouseEnter=function(e,t){d()||this.setState({hovered:t})},n.handleOptionClick=function(e,t){var n=this.state.options[t],r=this.templateInputValue(n);clearTimeout(this.$blurInput),this.props.onConfirm(n),this.setState({focused:-1,clicked:t,hovered:null,menuOpen:!1,query:r,selected:-1}),this.forceUpdate()},n.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,r=t.selected;-1!==r&&n&&this.handleOptionFocus(r-1)},n.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})}));else if(!0===this.state.menuOpen){var n=this.state,r=n.menuOpen,o=n.options,a=n.selected;a!==o.length-1&&r&&this.handleOptionFocus(a+1)}},n.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",(function(e){t.setState({menuOpen:!0,options:e})}))),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},n.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},n.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},n.handleKeyDown=function(e){switch(u[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(function(e){return 47<e&&e<58||32===e||8===e||64<e&&e<91||95<e&&e<112||185<e&&e<193||218<e&&e<223})(e.keyCode)&&this.handlePrintableKey(e)}},n.render=function(){var e,t=this,n=this.props,a=n.cssNamespace,i=n.displayMenu,l=n.id,s=n.minLength,u=n.name,d=n.placeholder,m=n.required,f=n.showAllValues,b=n.tNoResults,g=n.tStatusQueryTooShort,h=n.tStatusNoResults,y=n.tStatusSelectedOption,v=n.tStatusResults,O=n.dropdownArrow,j=this.state,k=j.focused,w=j.hovered,_=j.menuOpen,E=j.options,S=j.query,x=j.selected,C=this.hasAutoselect(),P=-1===k,I=0===E.length,A=0!==S.length,B=S.length>=s,T=this.props.showNoOptionsFound&&P&&I&&A&&B,N=a+"__wrapper",D=a+"__input",R=null!==k?" "+D+"--focused":"",M=this.props.showAllValues?" "+D+"--show-all-values":" "+D+"--default",F=a+"__dropdown-arrow-down",L=-1!==k&&null!==k,H=a+"__menu",z=H+"--"+i,U=H+"--"+(_||T?"visible":"hidden"),q=a+"__option",W=a+"__hint",V=this.templateInputValue(E[x]),K=V&&0===V.toLowerCase().indexOf(S.toLowerCase())&&C?S+V.substr(S.length):"",G=p&&K;return f&&"string"==typeof(e=O({className:F}))&&(e=(0,r.createElement)("div",{className:a+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),(0,r.createElement)("div",{className:N,onKeyDown:this.handleKeyDown,role:"combobox","aria-expanded":_?"true":"false"},(0,r.createElement)(o.default,{length:E.length,queryLength:S.length,minQueryLength:s,selectedOption:this.templateInputValue(E[x]),selectedOptionIndex:x,tQueryTooShort:g,tNoResults:h,tSelectedOption:y,tResults:v}),G&&(0,r.createElement)("span",null,(0,r.createElement)("input",{className:W,readonly:!0,tabIndex:"-1",value:K})),(0,r.createElement)("input",c({"aria-activedescendant":!!L&&l+"__option--"+k,"aria-owns":l+"__listbox",autoComplete:"off",className:""+D+R+M,id:l,onClick:function(e){return t.handleInputClick(e)},onBlur:this.handleInputBlur},function(e){return{onChange:e}}(this.handleInputChange),{onFocus:this.handleInputFocus,name:u,placeholder:d,ref:function(e){t.elementReferences[-1]=e},type:"text",role:"textbox",required:m,value:S})),e,(0,r.createElement)("ul",{className:H+" "+z+" "+U,onMouseLeave:function(e){return t.handleListMouseLeave(e)},id:l+"__listbox",role:"listbox"},E.map((function(e,n){var o=(-1===k?x===n:k===n)&&null===w?" "+q+"--focused":"",a=n%2?" "+q+"--odd":"";return(0,r.createElement)("li",{"aria-selected":k===n,className:""+q+o+a,dangerouslySetInnerHTML:{__html:t.templateSuggestion(e)},id:l+"__option--"+n,key:n,onBlur:function(e){return t.handleOptionBlur(e,n)},onClick:function(e){return t.handleOptionClick(e,n)},onMouseEnter:function(e){return t.handleOptionMouseEnter(e,n)},ref:function(e){t.elementReferences[n]=e},role:"option",tabIndex:"-1"})})),T&&(0,r.createElement)("li",{className:q+" "+q+"--no-results"},b())))},t}(r.Component);(t.default=m).defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},dropdownArrow:a.default}},function(e,t,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(36)})},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(13)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(18),o=n(40),a=n(41),i=n(27),c=n(10),l=Object.assign;e.exports=!l||n(4)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=i(e),l=arguments.length,s=1,u=o.f,p=a.f;s<l;)for(var d,m=c(arguments[s++]),f=u?r(m).concat(u(m)):r(m),b=f.length,g=0;g<b;)p.call(m,d=f[g++])&&(n[d]=m[d]);return n}:l},function(e,t,n){var r=n(15),o=n(19),a=n(21)(!1),i=n(24)("IE_PROTO");e.exports=function(e,t){var n,c=o(e),l=0,s=[];for(n in c)n!=i&&r(c,n)&&s.push(n);for(;t.length>l;)r(c,n=t[l++])&&(~a(s,n)||s.push(n));return s}},function(e,t,n){var r=n(23),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):a(e,t)}},function(e,t){e.exports=!1},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(8),o=n(43),a=n(26),i=n(24)("IE_PROTO"),c=function(){},l="prototype",s=function(){var e,t=n(13)("iframe"),r=a.length;for(t.style.display="none",n(44).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s[l][a[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(c[l]=r(e),n=new c,c[l]=null,n[i]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(7),o=n(8),a=n(18);e.exports=n(3)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),c=i.length,l=0;l<c;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(1),o=n(46)(1);r(r.P+r.F*!n(30)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(16),o=n(10),a=n(27),i=n(22),c=n(47);e.exports=function(e,t){var n=1==e,l=2==e,s=3==e,u=4==e,p=6==e,d=5==e||p,m=t||c;return function(t,c,f){for(var b,g,h=a(t),y=o(h),v=r(c,f,3),O=i(y.length),j=0,k=n?m(t,O):l?m(t,0):void 0;j<O;j++)if((d||j in y)&&(g=v(b=y[j],j,h),e))if(n)k[j]=g;else if(g)switch(e){case 3:return!0;case 5:return b;case 6:return j;case 2:k.push(b)}else if(u)return!1;return p?-1:s||u?u:k}}},function(e,t,n){var r=n(48);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(2),o=n(49),a=n(29)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(20);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(1),o=n(21)(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!n(30)(a)),"Array",{indexOf:function(e){return i?a.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){var r=n(7).f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||n(3)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(53)})},function(e,t,n){"use strict";var r=n(17),o=n(2),a=n(54),i=[].slice,c={};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),l=function(){var r=n.concat(i.call(arguments));return this instanceof l?function(e,t,n){if(!(t in c)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";c[t]=Function("F,a","return new F("+r.join(",")+")")}return c[t](e,n)}(t,r.length,r):a(t,r,e)};return o(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){n(56)("match",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]}))},function(e,t,n){"use strict";var r=n(6),o=n(14),a=n(4),i=n(11),c=n(29);e.exports=function(e,t,n){var l=c(e),s=n(i,l,""[e]),u=s[0],p=s[1];a((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,u),r(RegExp.prototype,l,2==t?function(e,t){return p.call(e,this,t)}:function(e){return p.call(e,this)}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n(28);var r=n(12),o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={bump:!1},t}!function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){e.queryLength!==this.props.queryLength&&this.setState((function(e){return{bump:!e.bump}}))},n.render=function(){var e,t=this.props,n=t.length,o=t.queryLength,a=t.minQueryLength,i=t.selectedOption,c=t.selectedOptionIndex,l=t.tQueryTooShort,s=t.tNoResults,u=t.tSelectedOption,p=t.tResults,d=this.state.bump,m=o<a,f=0===n,b=i?u(i,n,c):"";return e=m?l(a):f?s():p(n,b),(0,r.createElement)("div",{"aria-atomic":"true","aria-live":"polite",role:"status",style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},e,(0,r.createElement)("span",null,d?",":",,"))},t}(r.Component);(t.default=o).defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results."},tNoResults:function(){return"No search results."},tSelectedOption:function(e,t,n){return e+" ("+(n+1)+" of "+t+") is selected."},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(12);t.default=function(e){var t=e.className;return(0,r.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},(0,r.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},(0,r.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))}}])},e.exports=r(n(27))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r={"./export.js":84,"./pre-publish-panel.js":85,"./story-settings-panel.js":86,"./template-menu-item.js":87};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=83},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return f})),n.d(t,"icon",(function(){return b})),n.d(t,"render",(function(){return g}));var r=n(0),o=(n(9),n(10)),a=n(31),i=n(8),c=n(5),l=n(1),s=window,u=s.ampStoriesExport,p=s.fetch,d=s.FormData,m=s.URL,f="amp-story-export",b="media-archive",g=Object(i.compose)([Object(c.withSelect)((function(e){var t=e("core/editor"),n=t.getCurrentPost,r=t.getCurrentPostId;return{hasPublishAction:Object(o.get)(n(),["_links","wp:action-publish"],!1),postId:r()}})),Object(c.withDispatch)((function(e){var t=e("core/notices");return{createErrorNotice:t.createErrorNotice,createSuccessNotice:t.createSuccessNotice,removeNotice:t.removeNotice}})),Object(i.ifCondition)((function(e){return e.hasPublishAction}))])((function(e){var t=e.postId,n=e.createErrorNotice,o=e.createSuccessNotice,i=e.removeNotice;return Object(r.createElement)(a.PluginMoreMenuItem,{onClick:function(){!function(e){var t=e.postId,n=e.createErrorNotice,r=e.createSuccessNotice,o=e.removeNotice,a=new d,i=Object(l.__)("Could not generate story archive.","amp");a.append("action",u.action),a.append("_wpnonce",u.nonce),a.append("post_ID",t);var c="amp-story-export__success-snackbar",s="amp-story-export__error-notice";o(s),r(Object(l.__)("Generating story archive…","amp"),{id:c,type:"snackbar"});var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(c),n(e?e.message:i,{id:s})};p(u.ajaxUrl,{method:"POST",body:a}).then((function(e){e.ok?e.blob().then((function(t){var n=(e.headers.get("Content-Disposition")||"").match(/"(.*?)"/);if(n){o(c);var r=document.createElement("a"),a=m.createObjectURL(t);r.addEventListener("click",(function e(){setTimeout((function(){m.revokeObjectURL(a),r.removeEventListener("click",e)}),150)}),!1),r.href=a,r.download=n[1],r.click()}else f()})).catch(f):e.json().then((function(e){f(e.data&&e.data.errorMessage?new Error(e.data.errorMessage):null)})).catch(f)})).catch(f)}({postId:t,createErrorNotice:n,createSuccessNotice:o,removeNotice:i})}},Object(l.__)("Export Story","amp"))}))},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return i})),n.d(t,"render",(function(){return c}));var r=n(0),o=n(39),a=n(3),i="amp-story-pre-publish-panel",c=function(){return Object(r.createElement)(o.a,{dimensions:Object(a.q)(),required:!0})}},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return b})),n.d(t,"icon",(function(){return g})),n.d(t,"render",(function(){return h}));var r=n(4),o=n.n(r),a=n(0),i=(n(9),n(3)),c=n(31),l=n(1),s=n(8),u=n(5),p=n(2);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(s.compose)(Object(u.withSelect)((function(e){var t=e("core/editor").getEditedPostAttribute,n=((0,e("amp/story").getSettings)().storySettings||{}).autoAdvanceAfterOptions;return{meta:t("meta"),autoAdvanceAfterOptions:n}})),Object(u.withDispatch)((function(e,t){var n=t.meta,r=e("core/editor").editPost;return{updateMeta:function(e){r({meta:m({},n,{},e)})}}})))((function(e){var t=e.meta,n=e.autoAdvanceAfterOptions,r=e.updateMeta,o=Object(i.L)(t),c=o.autoAdvanceAfter,s=o.autoAdvanceAfterDuration,u=n.find((function(e){return e.value===c}))||{};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("p",null,Object(l.__)("These settings are applied to new pages.","amp")),Object(a.createElement)(p.SelectControl,{label:Object(l.__)("Advance to next page","amp"),help:u.description||"",value:c,options:n,onChange:function(e){return r({amp_story_auto_advance_after:e})},className:"amp-story-settings-advance-after"}),"time"===c&&Object(a.createElement)(p.RangeControl,{label:Object(l.__)("Time in seconds","amp"),value:s?parseInt(s):0,onChange:function(e){return r({amp_story_auto_advance_after_duration:e})},min:0,max:100,className:"amp-story-settings-advance-after-duration"}))})),b="amp-story-settings-panel",g="book",h=function(){return Object(a.createElement)(c.PluginDocumentSettingPanel,{name:b,className:b,title:Object(l.__)("Story Settings","amp")},Object(a.createElement)(f,null))}},function(e,t,n){"use strict";n.r(t),n.d(t,"isActive",(function(){return u})),n.d(t,"name",(function(){return p})),n.d(t,"render",(function(){return d}));var r=n(0),o=n(31),a=n(1),i=n(5),c=n(11),l=n(10),s=function(){var e=Object(i.select)("core/block-editor"),t=e.getSelectedBlockClientId,n=e.getBlock,r=Object(i.dispatch)("core/block-editor"),o=r.__experimentalReceiveReusableBlocks,s=r.__experimentalSaveReusableBlock,u=n(t());if("amp/amp-story-page"===u.name){var p=Object(c.cloneBlock)(u),d={id:Object(l.uniqueId)("reusable"),clientId:p.clientId,title:Object(a.__)("Template","amp")};o([{reusableBlock:d,parsedBlock:p}]),s(d.id)}},u=!1,p="amp-story",d=function(){return Object(r.createElement)(o.PluginBlockSettingsMenuItem,{allowedBlocks:["amp/amp-story-page"],icon:"welcome-add-page",label:Object(a.__)("Save as Template","amp"),role:"menuitem",onClick:s})}},function(e,t,n){var r={"./amp-story-cta/index.js":104,"./amp-story-page-attachment/index.js":103,"./amp-story-page/index.js":102,"./amp-story-post-author/index.js":92,"./amp-story-post-date/index.js":94,"./amp-story-post-title/index.js":96,"./amp-story-text/index.js":105};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=88},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return l})),n.d(t,"settings",(function(){return s}));var r=n(4),o=n.n(r),a=n(1),i=n(3);n(93);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l="amp/amp-story-post-author",s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:Object(a.__)("Story Author","amp"),description:Object(a.__)("Display the name of the story’s author. Modify by changing the author in the document settings.","amp"),category:"common",icon:"admin-users",keywords:[Object(a.__)("post","amp"),Object(a.__)("author","amp"),Object(a.__)("name","amp"),Object(a.__)("byline","amp")]},Object(i.p)({tagName:"div",attribute:"author",isEditable:!1}))},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return l})),n.d(t,"settings",(function(){return s}));var r=n(4),o=n.n(r),a=n(1),i=n(3);n(95);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l="amp/amp-story-post-date",s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:Object(a.__)("Story Date","amp"),description:Object(a.__)("Display the publish date of the story. Modify by changing the date in the document settings.","amp"),category:"common",icon:"clock",keywords:[Object(a.__)("publish date","amp")]},Object(i.p)({tagName:"div",attribute:"date",isEditable:!1}))},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return s})),n.d(t,"settings",(function(){return u}));var r=n(4),o=n.n(r),a=n(0),i=n(1),c=n(3);n(97);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s="amp/amp-story-post-title",u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:Object(i.__)("Story Title","amp"),description:Object(i.__)("Display the story title. Modify by changing the overall title of the document.","amp"),category:"common",icon:Object(a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(a.createElement)("path",{d:"M5 4v3h5.5v12h3V7H19V4z"}),Object(a.createElement)("path",{fill:"none",d:"M0 0h24v24H0V0z"})),keywords:[Object(i.__)("post","amp"),Object(i.__)("title","amp")]},Object(c.p)({tagName:"h1",attribute:"title",placeholder:Object(i.__)("Add story title…","amp"),isEditable:!0}))},function(e,t,n){},function(e,t,n){},function(e,t,n){var r={"./background-color/index.js":106,"./text-color/index.js":107};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=99},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(27),n(1)),a=n(11),i=n(4),c=n.n(i),l=(n(9),n(7)),s=n(3),u=n(6);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{anchor:{source:"attribute",selector:"amp-story-page",attribute:"id"},mediaAlt:{type:"string"},mediaId:{type:"number"},mediaUrl:{type:"string",source:"attribute",selector:'amp-story-grid-layer[template="fill"] > amp-img, amp-story-grid-layer[template="fill"] > amp-video',attribute:"src"},mediaType:{type:"string"},poster:{type:"string"},focalPoint:{type:"object"},autoAdvanceAfter:{type:"string"},autoAdvanceAfterDuration:{type:"number"},autoAdvanceAfterMedia:{type:"string"},backgroundColors:{default:"[]"},overlayOpacity:{default:100}},{deprecated:{default:"1.2.0"}}),save:function(e){var t,n=e.attributes,o=n.anchor,a=n.focalPoint,i=n.overlayOpacity,c=n.mediaUrl,p=n.mediaType,d=n.poster,m=n.autoAdvanceAfter,f=n.autoAdvanceAfterDuration,b=n.autoAdvanceAfterMedia,g=JSON.parse(n.backgroundColors);["auto","time"].includes(m)&&f?t=parseInt(f)+"s":"media"===m&&(t=b);var h={};0<g.length&&((h=Object(s.c)(h,g)).opacity=i/100);var y={objectPosition:u.m===p&&a?"".concat(100*a.x,"% ").concat(100*a.y,"%"):"initial"};return Object(r.createElement)("amp-story-page",{style:{backgroundColor:"#ffffff"},id:o,"auto-advance-after":t},c&&Object(r.createElement)("amp-story-grid-layer",{template:"fill"},u.m===p&&Object(r.createElement)("amp-img",{layout:"fill",src:c,style:y}),u.x===p&&Object(r.createElement)("amp-video",{layout:"fill",src:c,poster:d,muted:!0,autoplay:!0,loop:!0})),Object(r.createElement)("amp-story-grid-layer",{template:"fill",style:h}),Object(r.createElement)(l.InnerBlocks.Content,null))}}],m=n(20),f=n.n(m),b=n(28),g=n.n(b),h=n(14),y=n.n(h),v=n(15),O=n.n(v),j=n(16),k=n.n(j),w=n(19),_=n.n(w),E=n(17),S=n.n(E),x=n(5),C=n(8),P=n(54);var I=Object(x.withDispatch)((function(e,t,n){var r=n.select,o=r("core/block-editor"),i=o.getBlocksByClientId,c=o.getSelectedBlockClientIds,l=o.hasMultiSelection,u=r("amp/story").getCurrentPage,p=e("amp/story"),d=p.clearCopiedMarkup,m=p.setCopiedMarkup,f=e("core/block-editor"),b=f.removeBlock,g=f.selectBlock;return{onCopy:function(e){var t=c();if(0!==t.length)if(l()||!Object(P.documentHasSelection)()){var n=!0,r=!1,o=void 0;try{for(var p,f=t[Symbol.iterator]();!(n=(p=f.next()).done);n=!0){var h=p.value;if(Object(s.z)(h))return void d()}}catch(e){r=!0,o=e}finally{try{n||null==f.return||f.return()}finally{if(r)throw o}}var y=i(t),v=Object(a.serialize)(y),O="cut"===e.type;m(v).then((function(){if(Object(s.e)(v),O){var e=u(),n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;g(e),b(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}}))}else d();else d()}}}))((function(e){var t=e.children,n=e.onCopy,o=e.clientId,i=e.isSelected,c=Object(x.useSelect)((function(e){var t=e("core/block-editor"),n=t.getBlockOrder,r=(0,t.getSettings)().__experimentalCanUserUseUnfilteredHTML,a=e("amp/story").getCopiedMarkup;return{isFirstPage:0===n().indexOf(o),canUserUseUnfilteredHTML:r,getCopiedMarkupState:a}}),[o]),l=c.isFirstPage,u=c.canUserUseUnfilteredHTML,p=c.getCopiedMarkupState,d=Object(x.useDispatch)("core/block-editor").insertBlocks;return Object(r.createElement)("div",{onCopy:n,onPaste:function(e){if(i){var t=e.clipboardData,n="",r="";try{n=t.getData("text/plain"),r=t.getData("text/html")}catch(e){try{r=t.getData("Text")}catch(e){n=p(),r=p()}}e.preventDefault();var c=Object(a.pasteHandler)({HTML:r,plainText:n,mode:"BLOCKS",canUserUseUnfilteredHTML:u});c.length>0&&d(Object(s.g)(c,o,l),null,o)}},onCut:n},t)})),A=(n(91),n(2)),B=function(e){var t=e.backgroundColors,n=e.setAttributes,a=e.overlayOpacity,i=function(e,r){t[r]={color:e},n({backgroundColors:JSON.stringify(t)})};return Object(r.createElement)(l.PanelColorSettings,{title:Object(o.__)("Background Color","amp"),colorSettings:function(){if(!t.length)return[{value:void 0,onChange:function(e){i(e,0)},label:Object(o.__)("Color","amp")}];var e=[],n=t.length>1;return t.forEach((function(t,r){e[r]={value:t?t.color:void 0,onChange:function(e){i(e,r)},
/* translators: %s: color number */
label:n?Object(o.sprintf)(Object(o.__)("Color %s","amp"),r+1):Object(o.__)("Color","amp")}})),e}()},Object(r.createElement)("p",null,t.length<2&&Object(r.createElement)(A.Button,{onClick:function(){return i(null,1)},isSmall:!0},Object(o.__)("Add Gradient","amp")),t.length>1&&Object(r.createElement)(A.Button,{onClick:function(){return e=t.length-1,t.splice(e,1),void n({backgroundColors:JSON.stringify(t)});var e},isLink:!0,isDestructive:!0},Object(o.__)("Remove Gradient","amp"))),Object(r.createElement)(A.RangeControl,{label:Object(o.__)("Opacity","amp"),value:a,onChange:function(e){return n({overlayOpacity:e})},min:0,max:100,step:5,required:!0}))},T=function(e){var t=e.autoAdvanceAfter,n=e.autoAdvanceAfterDuration,a=e.autoAdvanceAfterOptions,i=e.setAttributes,c=e.clientId,l=Object(x.useSelect)((function(e){var t=e("core/block-editor").getBlockRootClientId,n=((0,e("amp/story").getAnimatedBlocks)()[c]||[]).filter((function(e){var n=e.id;return c===t(n)})),r=Object(s.w)(n);return Math.ceil(r/1e3)})),u=a.find((function(e){return e.value===t}))||{};return Object(r.createElement)(A.PanelBody,{title:Object(o.__)("Page Settings","amp")},Object(r.createElement)(A.SelectControl,{label:Object(o.__)("Advance to next page","amp"),help:u.description||"",value:t,options:a,onChange:function(e){i({autoAdvanceAfter:e}),"auto"===e&&i({autoAdvanceAfterDuration:l})}}),"time"===t&&Object(r.createElement)(A.RangeControl,{label:Object(o.__)("Time in seconds","amp"),value:n?parseInt(n):0,onChange:function(e){return i({autoAdvanceAfterDuration:e})},min:Math.max(l,1),initialPosition:l,help:l>1?Object(o.__)("A minimum time is enforced because there are animated blocks on this page.","amp"):void 0}))},N=n(10),D=n(18),R=n.n(D),M=n(13),F=n(24),L=function(e){var t=e.allowedBackgroundMediaTypes,n=e.media,a=e.mediaId,i=e.mediaType,c=e.mediaAlt,p=e.mediaUrl,d=e.poster,m=e.focalPoint,f=e.videoFeaturedImage,b=e.setAttributes,h=Object(r.createElement)("p",null,Object(o.__)("To edit the background image or video, you need permission to upload media.","amp")),y=u.x===i&&Object(M.j)(Object(M.h)(n)),v=u.x===i?Object(M.h)(n):null,O=Object(r.useState)(!1),j=g()(O,2),k=j[0],w=j[1];return Object(r.useEffect)((function(){u.x===i&&(d||(f?b({poster:f.source_url}):!n||n.featured_media||k||(w(!0),Object(s.T)({id:a,src:p}).then((function(e){b({poster:Object(s.u)(e)}),w(!1)})).catch((function(){return w(!1)})))))}),[n,i,f]),Object(r.createElement)(A.PanelBody,{title:Object(o.__)("Background Media","amp")},Object(r.createElement)(r.Fragment,null,y&&Object(r.createElement)(A.Notice,{status:"warning",isDismissible:!1},Object(o.sprintf)(
/* translators: %d: the number of recommended megabytes per second */
Object(o.__)("A video size of less than %d MB per second is recommended.","amp"),F.g),v&&" "+Object(o.sprintf)(
/* translators: %d: the number of actual megabytes per second */
Object(o.__)("The selected video is %d MB per second.","amp"),Math.round(v/F.d))),Object(r.createElement)(A.BaseControl,null,Object(r.createElement)(l.MediaUploadCheck,{fallback:h},Object(r.createElement)(l.MediaUpload,{onSelect:function(e){var t=Object(s.M)(e);b(t)},allowedTypes:t,value:a,render:function(e){var t=e.open;return Object(r.createElement)(A.Button,{isDefault:!0,isLarge:!0,onClick:t,className:"editor-amp-story-page-background"},p?Object(o.__)("Change Media","amp"):Object(o.__)("Select Media","amp"))},id:"story-background-media"}),p&&Object(r.createElement)(A.Button,{onClick:function(){return b({mediaUrl:void 0,mediaId:void 0,mediaType:void 0})},isLink:!0,isDestructive:!0},Object(o._x)("Remove","background media","amp")))),u.x===i&&(!k||d)&&Object(r.createElement)(l.MediaUploadCheck,null,Object(r.createElement)(A.BaseControl,{id:"editor-amp-story-page-poster",label:Object(o.__)("Poster Image","amp"),help:Object(o.sprintf)(
/* translators: 1: 720p. 2: 720w. 3: 1280h */
Object(o.__)("The recommended dimensions for a poster image are: %1$s (%2$s x %3$s)","amp"),"720p","720w","1080h")},!d&&Object(r.createElement)(A.Notice,{status:"error",isDismissible:!1},Object(o.__)("A poster image must be set.","amp")),Object(r.createElement)(l.MediaUpload,{title:Object(o.__)("Select Poster Image","amp"),onSelect:function(e){var t=Object(N.has)(e,["sizes",u.n,"url"])?e.sizes[u.n].url:e.url;b({poster:t})},allowedTypes:u.r,modalClass:"editor-amp-story-background-video-poster__media-modal",render:function(e){var t=e.open;return Object(r.createElement)(A.Button,{id:"editor-amp-story-page-poster",className:R()("editor-amp-story-page-background",{"editor-post-featured-image__toggle":!d,"editor-post-featured-image__preview":d}),onClick:t,"aria-label":d?Object(o.__)("Replace Poster Image","amp"):null},d&&Object(r.createElement)(A.ResponsiveWrapper,{naturalWidth:960,naturalHeight:1280},Object(r.createElement)("img",{src:d,alt:""})),!d&&Object(o.__)("Set Poster Image","amp"))}}))),u.m===i&&p&&A.FocalPointPicker&&Object(r.createElement)(A.FocalPointPicker,{label:Object(o.__)("Focal Point Picker","amp"),url:p,value:m,onChange:function(e){return b({focalPoint:e})}}),i&&Object(r.createElement)(A.TextControl,{label:Object(o.__)("Assistive Text","amp"),help:Object(o.__)("This text is used to inform visually impaired users about the background content.","amp"),value:c,onChange:function(e){return b({mediaAlt:e})}})))},H=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("path",{d:"M15 15H5V5h10v10z"}))};H.defaultProps={width:"20",height:"20",viewBox:"0 0 20 20"};var z=function(e){var t=e.clientId,n=Object(x.useDispatch)("amp/story"),a=n.playAnimation,i=n.stopAnimation,c=Object(x.useSelect)((function(e){return(0,e("amp/story").isPlayingAnimation)(t)})),l=Object(x.useSelect)((function(e){var n=e("core/block-editor").getBlock;return(0,e("amp/story").getAnimatedBlocksPerPage)(t).filter((function(e){var t=e.id;return e.animationType&&n(t)}))}));if(!l.length)return null;var s=c?Object(o.__)("Stop All Animations","amp"):Object(o.sprintf)(Object(o._n)("Play %s Animation","Play %s Animations",l.length,"amp"),l.length);return Object(r.createElement)(A.PanelBody,{title:Object(o.__)("Animation","amp")},Object(r.createElement)(A.IconButton,{icon:c?H({width:20,height:20}):"controls-play",className:"is-button is-default",onClick:c?function(){return i(t)}:function(){return a(t)}},s))},U=function(e){function t(e){var n;return y()(this,t),n=O()(this,k()(t).call(this,e)),e.attributes.anchor||n.props.setAttributes({anchor:Object(s.x)()}),e.storySettingsAttributes&&Object.entries(e.storySettingsAttributes).forEach((function(t){var r=g()(t,2),o=r[0],a=r[1];e.attributes.hasOwnProperty(o)||n.props.setAttributes(c()({},o,a))})),n.state={extractingPoster:!1},n.videoPlayer=Object(r.createRef)(),n}return S()(t,e),_()(t,[{key:"shouldComponentUpdate",value:function(){return this.ensureCorrectBlockOrder(),!0}}]),_()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.attributes,n=t.mediaType,r=t.mediaUrl;u.x===n&&e.attributes.mediaUrl!==r&&this.videoPlayer.current&&this.videoPlayer.current.load()}},{key:"ensureCorrectBlockOrder",value:function(){var e=this.props,t=e.getBlockOrder,n=e.moveBlockToPosition,r=e.clientId,o=t(r);if(!(1>=o.length)){var a=Object(s.m)(r),i=Object(s.r)(r),c=null;a?c=a:i&&(c=i),c&&o[o.length-1]!==c.clientId&&n(c.clientId,r,r,o.length-1)}}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.autoAdvanceAfterOptions,o=e.clientId,a=e.isSelected,i=e.media,c=e.setAttributes,p=e.allowedBlocks,d=e.allowedBackgroundMediaTypes,m=e.videoFeaturedImage,f=t.mediaId,b=t.mediaType,g=t.mediaUrl,h=t.mediaAlt,y=t.focalPoint,v=void 0===y?{x:.5,y:.5}:y,O=t.overlayOpacity,j=t.poster,k=t.autoAdvanceAfter,w=t.autoAdvanceAfterDuration,_={backgroundImage:u.m===b&&g?"url(".concat(g,")"):void 0,backgroundPosition:u.m===b?"".concat(100*v.x,"% ").concat(100*v.y,"%"):void 0,backgroundRepeat:"no-repeat",backgroundSize:"cover"};u.x===b&&j&&(_.backgroundImage="url(".concat(j,")"));var E={width:"100%",height:"100%",position:"absolute"},S=JSON.parse(t.backgroundColors);return(E=Object(s.c)(E,S)).opacity=O/100,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.InspectorControls,null,Object(r.createElement)(B,{backgroundColors:JSON.parse(t.backgroundColors),setAttributes:c,overlayOpacity:O}),Object(r.createElement)(L,{allowedBackgroundMediaTypes:d,media:i,mediaId:f,mediaType:b,mediaAlt:h,mediaUrl:g,poster:j,focalPoint:v,videoFeaturedImage:m,setAttributes:c}),Object(r.createElement)(T,{autoAdvanceAfter:k,autoAdvanceAfterDuration:w,autoAdvanceAfterOptions:n,clientId:o,setAttributes:c}),Object(r.createElement)(z,{clientId:o})),Object(r.createElement)(I,{clientId:o,isSelected:a},Object(r.createElement)("div",{style:_},u.x===b&&i&&Object(r.createElement)("div",{className:"editor-amp-story-page-video-wrap"},Object(r.createElement)("video",{autoPlay:!0,muted:!0,loop:!0,className:"editor-amp-story-page-video",poster:j,ref:this.videoPlayer},Object(r.createElement)("source",{src:g,type:i.mime_type}))),S.length>0&&Object(r.createElement)("div",{style:E}),Object(r.createElement)(l.InnerBlocks,{allowedBlocks:p}))))}}]),t}(r.Component),q=Object(C.compose)(Object(x.withDispatch)((function(e){return{moveBlockToPosition:e("core/block-editor").moveBlockToPosition}})),Object(x.withSelect)((function(e,t){var n,r=t.clientId,o=t.attributes,a=e("core").getMedia,i=e("core/block-editor").getBlockOrder,c=e("amp/story").getSettings,l=!(0===i().indexOf(r))&&!Object(s.m)(r)&&!Object(s.r)(r),p=!Object(s.m)(r)&&!Object(s.r)(r),d=o.mediaType,m=o.mediaId,b=o.poster,g=m?a(m):void 0;u.x===d&&g&&g.featured_media&&!b&&(n=a(g.featured_media));var h=u.c;l&&(h=[].concat(f()(h),["amp/amp-story-cta"])),p&&(h=[].concat(f()(h),["amp/amp-story-page-attachment"]));var y=(0,e("core/editor").getEditedPostAttribute)("meta")||{},v=Object(s.L)(y),O=c(),j=O.allowedVideoMimeTypes;return{media:g,videoFeaturedImage:n,allowedBlocks:h,getBlockOrder:i,storySettingsAttributes:v,autoAdvanceAfterOptions:(O.storySettings||{}).autoAdvanceAfterOptions,allowedBackgroundMediaTypes:[u.m].concat(f()(j))}})))(U),W=function(e){var t,n=e.attributes,o=n.anchor,a=n.focalPoint,i=n.overlayOpacity,c=n.mediaId,p=n.mediaUrl,d=n.mediaType,m=n.mediaAlt,f=n.poster,b=n.autoAdvanceAfter,g=n.autoAdvanceAfterDuration,h=n.autoAdvanceAfterMedia,y=JSON.parse(n.backgroundColors);["auto","time"].includes(b)&&g?t=parseInt(g)+"s":"media"===b&&(t=h);var v={};0<y.length&&((v=Object(s.c)(v,y)).opacity=i/100);var O=u.m===d&&a?"".concat(100*a.x,"% ").concat(100*a.y,"%"):"initial";return Object(r.createElement)("amp-story-page",{style:{backgroundColor:"#ffffff"},id:o,"auto-advance-after":t},p&&Object(r.createElement)("amp-story-grid-layer",{template:"fill"},u.m===d&&Object(r.createElement)("img",{layout:"fill",src:p,alt:m,className:c?"wp-image-".concat(c):null,"object-position":O}),u.x===d&&Object(r.createElement)("amp-video",{layout:"fill","aria-label":m,src:p,poster:f,muted:!0,autoplay:!0,loop:!0})),Object(r.createElement)("amp-story-grid-layer",{template:"fill",style:v}),Object(r.createElement)(l.InnerBlocks.Content,null))};n.d(t,"name",(function(){return K})),n.d(t,"settings",(function(){return G}));var V=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("g",{fill:"#181D21"},Object(r.createElement)("path",{d:"M18.4 21H5.6V3h7.8l5 4.9V21zM7.1 19.5h9.8V8.6l-4-4.1H7.1v15z"}),Object(r.createElement)("path",{d:"M11.5 5.4v4.3h4.4"})))};V.defaultProps={viewBox:"0 0 24 24"};var K="amp/amp-story-page",G={title:Object(o.__)("Page","amp"),category:"layout",icon:V({width:24,height:24}),attributes:{anchor:{source:"attribute",selector:"amp-story-page",attribute:"id"},mediaId:{type:"number"},mediaUrl:{type:"string",source:"attribute",selector:'amp-story-grid-layer[template="fill"] > img, amp-story-grid-layer[template="fill"] > amp-img, amp-story-grid-layer[template="fill"] > amp-video',attribute:"src"},mediaType:{type:"string"},mediaAlt:{type:"string"},poster:{type:"string"},focalPoint:{type:"object"},autoAdvanceAfter:{type:"string"},autoAdvanceAfterDuration:{type:"number"},autoAdvanceAfterMedia:{type:"string"},backgroundColors:{default:"[]"},overlayOpacity:{default:100}},supports:{reusable:!0},edit:q,save:W,deprecated:d,transforms:{from:[{type:"raw",priority:20,selector:"amp-story-page",transform:function(e){var t=e.outerHTML,n=Object(a.getBlockAttributes)(K,t);return Object(a.createBlock)(K,n)}}]}}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(4),a=n.n(o),i=n(14),c=n.n(i),l=n(19),s=n.n(l),u=n(15),p=n.n(u),d=n(16),m=n.n(d),f=n(12),b=n.n(f),g=n(17),h=n.n(g),y=n(0),v=(n(9),n(18)),O=n.n(v),j=n(5),k=(n(90),n(13)),w=(n(27),n(7)),_=n(21),E=function(e){var t=e.setAttributes,n=e.toggleAttachment,o=e.openText;return Object(y.createElement)("div",{className:"open-attachment-wrapper"},Object(y.createElement)("span",{role:"button",tabIndex:"0",onClick:function(){n(!0)},onKeyDown:function(e){_.ENTER!==e.keyCode&&_.SPACE!==e.keyCode||(n(!0),e.stopPropagation())},className:"amp-story-page-open-attachment-icon"},Object(y.createElement)("span",{className:"amp-story-page-open-attachment-bar amp-story-page-open-attachment-bar-left"}),Object(y.createElement)("span",{className:"amp-story-page-open-attachment-bar amp-story-page-open-attachment-bar-right"})),Object(y.createElement)(w.RichText,{value:o,tagName:"div",wrapperClassName:"amp-story-page-attachment__text",onChange:function(e){return t({openText:e})},placeholder:Object(r.__)("Swipe Up","amp")}))},S=n(28),x=n.n(S),C=n(37),P=n.n(C),I=n(2),A=n(22),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function r(r){e.current&&e.current.contains(r.target)&&(t&&t(),n&&e.current.click())}Object(y.useEffect)((function(){return e.current&&document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}))},T=function(e){var t,n,o=Object(y.useState)(null),a=x()(o,2),i=a[0],c=a[1],l=Object(y.useState)(!1),s=x()(l,2),u=s[0],p=s[1],d=Object(y.useState)(""),m=x()(d,2),f=m[0],b=m[1],g=Object(y.useState)(!1),h=x()(g,2),v=h[0],O=h[1],k=e.attributes,E=e.setAttributes,S=e.toggleAttachment,C=k.attachmentClass,T=k.postId,N=k.postType,D=k.title,R=k.wrapperStyle,M=Object(j.useSelect)((function(e){return(0,e("amp/story").getSettings)().allowedPageAttachmentPostTypes})),F=function(){var e=M[N]||"".concat(N,"s");if(n=!0,T){O(!0);var r=t=P()({path:"/wp/v2/".concat(e,"/").concat(T)}).then((function(e){n&&t===r&&(c(e),p(!1),O(!1))})).catch((function(){n&&t===r&&(c(null),p(!0),O(!1))}))}};Object(y.useEffect)((function(){return function(){n=!1}}),[]),Object(y.useEffect)((function(){F()}),[T]);var L=Object(y.useRef)(null),H=Object(y.useRef)(null);return B(H,(function(){S(!1)})),B(L,null,!0),Object(y.createElement)("div",{className:"attachment-container"},Object(y.createElement)("div",{className:"attachment-wrapper"},Object(y.createElement)("div",{className:"attachment-header"},Object(y.createElement)("span",{tabIndex:"0",className:"amp-story-page-attachment-close-button",role:"button",onKeyDown:function(e){_.ENTER!==e.keyCode&&_.SPACE!==e.keyCode||(S(!1),e.stopPropagation())},ref:H}),Object(y.createElement)(w.RichText,{value:D,tagName:"div",wrapperClassName:"amp-story-page-attachment-title",onChange:function(e){return E({title:e})},placeholder:Object(r.__)("Write Title","amp"),onClick:function(e){return e.stopPropagation()}}),T&&Object(y.createElement)(I.Button,{className:"remove-attachment-post",onClick:function(e){e.stopPropagation(),p(!1),E({postId:null}),c(null)},isLink:!0,isDestructive:!0,ref:L},Object(r.__)("Remove Post","amp"))),Object(y.createElement)("div",{className:C,style:R},v&&Object(y.createElement)(I.Spinner,null),!v&&i&&i.content&&Object(y.createElement)(y.RawHTML,null,"<h2>".concat(i.title.rendered,"</h2>").concat(i.content.rendered)),!v&&(!T||u)&&Object(y.createElement)(y.Fragment,null,u&&Object(y.createElement)("div",null,Object(y.createElement)("p",{className:"failed-message"},Object(r.__)("The selected post failed to load, please select a new post or try loading again.","amp"),Object(y.createElement)(I.Button,{className:"refetch-attachment-post",onClick:function(e){e.stopPropagation(),F()},isLink:!0},Object(r.__)(" Try again","amp")))),Object(y.createElement)(A.m,{labelText:Object(r.__)("Attachment Content","amp"),placeholder:Object(r.__)("Search for content ...","amp"),value:f,onSelect:function(e,t){E({postId:e,postType:t}),b("")},onChange:function(e){return b(e)},searchablePostTypes:Object.keys(M)})))))},N=function(e){function t(e){var n;return c()(this,t),(n=p()(this,m()(t).call(this,e))).state={isOpen:!1},n.toggleAttachment=n.toggleAttachment.bind(b()(n)),n}return h()(t,e),s()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.backgroundColor,r=t.customBackgroundColor,o=t.textColor,a=t.setAttributes;if(n!==e.backgroundColor||r!==e.customBackgroundColor||o!==e.textColor){var i=this.getWrapperAttributes(),c=i.style,l=i.attachmentClass,s={wrapperStyle:c};o!==e.textColor&&(s.attachmentClass=l),a(s)}}},{key:"toggleAttachment",value:function(e){e!==this.state.isOpen&&this.setState({isOpen:e})}},{key:"getWrapperAttributes",value:function(){var e=this.props,t=e.attributes,n=e.backgroundColor,r=e.customBackgroundColor,o=e.textColor,i=t.opacity,c=Object(j.select)("core/block-editor").getSettings().colors,l=Object(k.d)(c,n,r,i),s=O()("amp-page-attachment-content",a()({"has-text-color":o.color},o.class,o.class));return{style:{color:o.color,backgroundColor:l},attachmentClass:s}}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=t.openText;return Object(y.createElement)(y.Fragment,null,this.state.isOpen&&Object(y.createElement)(T,{setAttributes:n,attributes:t,toggleAttachment:this.toggleAttachment}),!this.state.isOpen&&Object(y.createElement)(E,{setAttributes:n,toggleAttachment:this.toggleAttachment,openText:r}))}}]),t}(y.Component);n.d(t,"name",(function(){return R})),n.d(t,"settings",(function(){return M}));var D={postId:{type:"number"},postType:{type:"string",default:"post"},title:{type:"string"},openText:{type:"string",default:Object(r.__)("Swipe Up","amp")},wrapperStyle:{default:{}},attachmentClass:{type:"string",default:"amp-page-attachment-content"}},R="amp/amp-story-page-attachment",M={title:Object(r.__)("Page Attachment","amp"),description:Object(r.__)("Attach additional content to a story page.","amp"),icon:"media-document",category:"layout",keywords:[Object(r.__)("attachment","amp"),Object(r.__)("content","amp"),Object(r.__)("embed","amp")],attributes:D,edit:N,save:function(){return null}}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(27),n(1)),a=n(11),i=n(14),c=n.n(i),l=n(19),s=n.n(l),u=n(15),p=n.n(u),d=n(16),m=n.n(d),f=n(12),b=n.n(f),g=n(17),h=n.n(g),y=n(4),v=n.n(y),O=n(18),j=n.n(O),k=(n(9),n(2)),w=n(7),_=(n(89),n(5)),E=n(3),S=n(13),x=n(22),C=function(e){function t(e){var n;return c()(this,t),n=p()(this,m()(t).call(this,e)),v()(b()(n),"bindRef",(function(e){e&&(n.nodeRef=e)})),v()(b()(n),"toggleIsEditing",(function(e){e!==n.state.isEditing&&n.setState({isEditing:!n.state.isEditing})})),v()(b()(n),"toggleOverlay",(function(e){e!==n.state.hasOverlay&&n.setState({hasOverlay:!n.state.hasOverlay})})),e.attributes.anchor||n.props.setAttributes({anchor:Object(E.x)()}),n.state={isEditing:!1,hasOverlay:!0},n.nodeRef=null,n}return h()(t,e),s()(t,[{key:"componentDidUpdate",value:function(e,t){!this.props.isSelected&&e.isSelected&&(this.toggleIsEditing(!1),this.toggleOverlay(!0)),this.state.isEditing&&!t.isEditing&&Object(E.R)(".is-selected .amp-block-story-cta__link")}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.backgroundColor,a=e.className,i=e.clientId,c=e.fontSize,l=e.isSelected,s=e.name,u=e.setAttributes,p=e.textColor,d=t.text,m=t.url,f=t.customBackgroundColor,b=t.opacity,g=t.btnPositionTop,h=t.btnPositionLeft,y=this.state,O=y.isEditing,E=y.hasOverlay,C=Object(_.select)("core/block-editor").getSettings().colors,P=Object(S.d)(C,n,f,b),I=Object(o.__)("Add text…","amp"),A=j()("amp-block-story-cta__link",v()({"has-background":n.color,"has-text-color":p.color},p.class,p.class)),B={color:p.color,fontSize:c.size?c.size+"px":void 0};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"amp-story-cta-button",id:"amp-story-cta-button-".concat(i),style:{top:"".concat(g,"%"),left:"".concat(h,"%")}},Object(r.createElement)("div",{className:a,ref:this.bindRef,style:{backgroundColor:P}},O&&Object(r.createElement)(w.RichText,{placeholder:I,value:d,onChange:function(e){return u({text:e})},className:A,style:B}),!O&&Object(r.createElement)(x.g,{blockElementId:"amp-story-cta-button-".concat(i),clientId:i,name:s,isDraggable:!0,isEditing:O,isSelected:l,hasOverlay:E,toggleIsEditing:this.toggleIsEditing,toggleOverlay:this.toggleOverlay,text:d,textStyle:B,textWrapperClass:A,placeholder:I})),l&&O&&Object(r.createElement)("form",{className:"amp-block-story-cta__inline-link",onSubmit:function(e){return e.preventDefault()}},Object(r.createElement)(k.Dashicon,{icon:"admin-links"}),Object(r.createElement)(w.URLInput,{value:m,onChange:function(e){return u({url:e})},autoFocus:!1}),Object(r.createElement)(k.IconButton,{icon:"editor-break",label:Object(o.__)("Apply","amp"),type:"submit"}))))}}]),t}(r.Component);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=function(e){var t=e.attributes,n=t.anchor,o=t.btnPositionLeft,a=t.btnPositionTop,i=t.text,c=t.url,l=Object(E.n)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{className:"amp-block-story-cta__link"})),s=Object(E.v)(t);return s.top=a?"".concat(a,"%"):void 0,s.left=o?"".concat(o,"%"):void 0,Object(r.createElement)("amp-story-cta-layer",{id:n||Object(E.x)()},Object(r.createElement)(w.RichText.Content,{tagName:"a",className:l,href:c,style:s,value:i}))},A=n(10);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=[{attributes:T({align:{type:"string",default:"center"}},{url:{type:"string",source:"attribute",selector:"a",attribute:"href"},text:{type:"string",source:"html",selector:"a"},customTextColor:{type:"string",default:"#ffffff"},customBackgroundColor:{type:"string",default:"#32373c"}}),supports:{align:!0,alignWide:!1},save:function(e){var t=e.attributes,n=t.anchor,o=t.url,a=t.text,i=Object(E.n)(T({},t,{className:"amp-block-story-cta__link"})),c=Object(E.v)(t);return Object(r.createElement)("amp-story-cta-layer",{id:n},Object(r.createElement)(w.RichText.Content,{tagName:"a",className:i,href:o,style:c,value:a}))},migrate:function(e){return T({},Object(A.omit)(e,"align"),{btnPositionTop:0,btnPositionLeft:30})}}];n.d(t,"name",(function(){return R})),n.d(t,"settings",(function(){return M}));var D=function(e){return Object(r.createElement)("svg",e,Object(r.createElement)("path",{d:"M7 14v2H5a3 3 0 0 1-3-3V8a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v5a3.001 3.001 0 0 1-2 2.83V8a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h2z"}),Object(r.createElement)("path",{d:"M18.31 15.442a.563.563 0 0 0-.202-.636l-6.631-4.808a.562.562 0 0 0-.891.415l-.58 8.17a.564.564 0 0 0 .359.565c.236.1.49.018.644-.175l1.646-2.074 1.632 3.5a.561.561 0 0 0 .748.273L16.477 20a.562.562 0 0 0 .272-.748l-1.633-3.5 2.647.072a.563.563 0 0 0 .548-.382z"}))};D.defaultProps={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};var R="amp/amp-story-cta",M={title:Object(o.__)("Call to Action","amp"),description:Object(o.__)("Prompt visitors to take action with a button-style link.","amp"),icon:D,category:"layout",keywords:[Object(o.__)("cta","amp"),Object(o.__)("button","amp")],attributes:{url:{type:"string",source:"attribute",selector:"a",attribute:"href"},text:{type:"string",source:"html",selector:"a"},customTextColor:{type:"string",default:"#ffffff"},customBackgroundColor:{type:"string",default:"#32373c"},btnPositionTop:{type:"number",default:0},btnPositionLeft:{type:"number",default:30}},edit:C,save:I,deprecated:N,transforms:{from:[{type:"raw",priority:20,selector:"amp-story-cta-layer",transform:function(e){var t=e.outerHTML,n=Object(a.getBlockAttributes)(R,t);return Object(a.createBlock)(R,n)}}]}}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),a=n(11),i=n(14),c=n.n(i),l=n(19),s=n.n(l),u=n(15),p=n.n(u),d=n(16),m=n.n(d),f=n(12),b=n.n(f),g=n(17),h=n.n(g),y=n(4),v=n.n(y),O=n(18),j=n.n(O),k=(n(9),n(10)),w=n(7),_=n(5),E=n(3),S=n(13),x=(n(98),n(22));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){function t(){var e,n;c()(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(o))),v()(b()(n),"onReplace",(function(e){var t=n.props,r=t.attributes,o=t.onReplace,a=t.name;(e=e.filter((function(e){return void 0!==e}))).length&&o(e.map((function(e,t){return 0===t&&e.name===a?P({},e,{attributes:P({},r,{},e.attributes)}):e})))})),v()(b()(n),"toggleIsEditing",(function(e){e!==n.state.isEditing&&n.setState({isEditing:!n.state.isEditing})})),v()(b()(n),"toggleOverlay",(function(e){e!==n.state.hasOverlay&&n.setState({hasOverlay:!n.state.hasOverlay})})),n.state={isEditing:!1,hasOverlay:!0},n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){Object(E.K)(this.props)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.attributes,o=n.fontSize,a=n.isSelected,i=r.height,c=r.width,l=r.content,s=r.ampFitText,u=r.ampFontFamily;!a&&e.isSelected&&(this.toggleIsEditing(!1),this.toggleOverlay(!0)),s&&(e.attributes.ampFitText!==s||e.attributes.ampFontFamily!==u||e.attributes.width!==c||e.attributes.height!==i||e.attributes.content!==l)&&Object(E.K)(this.props),!(s||Object(k.isEqual)(e.fontSize,o)&&e.attributes.ampFitText===s&&e.attributes.ampFontFamily===u&&e.attributes.content===l)&&Object(E.J)(this.props),this.state.isEditing&&!t.isEditing&&Object(E.R)(".is-selected .wp-block-amp-amp-story-text")}},{key:"render",value:function(){var e,t=this.state,n=t.isEditing,a=t.hasOverlay,i=this.props,c=i.attributes,l=i.setAttributes,s=i.className,u=i.clientId,p=i.fontSize,d=i.isPartOfMultiSelection,m=i.isSelected,f=i.backgroundColor,b=i.customBackgroundColor,g=i.textColor,h=i.name,y=c.placeholder,O=c.content,k=c.align,E=c.ampFitText,C=c.autoFontSize,P=c.height,I=c.opacity,A=p&&p.size?p.size+"px":void 0,B=Object(_.select)("core/block-editor").getSettings().colors,T={backgroundColor:Object(S.d)(B,f,b,I)};E&&O.length&&(T.lineHeight=P+"px");var N=[],D="wp-block-amp-story-text-wrapper";c.className&&c.className.length&&c.className.split(" ").forEach((function(e){e.includes("is-style")&&N.push(e)}));N.length&&(D+=" "+N.join(" "));var R=(e={"has-text-color":g.color},v()(e,g.class,g.class),v()(e,p.class,E?void 0:p.class),v()(e,"is-amp-fit-text",E),e),M={color:g.color,fontSize:E?C+"px":A,textAlign:k,position:E&&O.length?"static":void 0};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(w.BlockControls,null,Object(r.createElement)(w.AlignmentToolbar,{value:k,onChange:function(e){return l({align:e})}})),Object(r.createElement)("div",{className:j()(D,{"with-line-height":E,"is-empty-draggable-text":!n&&!O.length}),style:T},n&&Object(r.createElement)(w.RichText,{wrapperClassName:"wp-block-amp-story-text",tagName:"p",value:O,onChange:function(e){return l({content:e})},onReplace:this.onReplace,onSplit:function(){},style:M,className:j()(s,R),placeholder:y||Object(o.__)("Write text…","amp")}),!n&&Object(r.createElement)(x.g,{blockClass:"wp-block-amp-story-text",blockElementId:"block-".concat(u),clientId:u,name:h,isEditing:n,isDraggable:!d,isSelected:m,hasOverlay:a,toggleIsEditing:this.toggleIsEditing,toggleOverlay:this.toggleOverlay,text:O,textStyle:M,textWrapperClass:j()(s+" block-editor-rich-text__editable editor-rich-text__editable",R),placeholder:y||Object(o.__)("Write text…","amp")})))}}]),t}(r.Component),A=function(e){var t=e.attributes,n=t.content,o=t.ampFitText,a=t.tagName,i=Object(E.n)(t),c=Object(E.v)(t);if(!o)return Object(r.createElement)(w.RichText.Content,{tagName:a,style:c,className:i,value:n,format:"string"});var l=a;return c.display="flex",Object(r.createElement)(l,{style:c,className:i},Object(r.createElement)("amp-fit-text",{layout:"flex-item",className:"amp-text-content"},Object(r.createElement)(r.RawHTML,null,n)))},B=n(23);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=[{attributes:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{placeholder:{type:"string"},content:{type:"string",source:"html",selector:".amp-text-content",default:""},type:{type:"string",default:"auto"},tagName:{type:"string",default:"p"},align:{type:"string"}},{deprecated:{default:"1.2.0"}}),save:function(e){var t=e.attributes,n=t.content,o=t.ampFitText,a=t.tagName,i=Object(E.n)(t),c=Object(E.v)(t);if(!o)return Object(r.createElement)(w.RichText.Content,{tagName:a,style:c,className:i,value:n,format:"string"});var l=a;return c.display="flex",Object(r.createElement)(l,{style:c,className:i},Object(r.createElement)("amp-fit-text",{layout:"flex-item",className:"amp-text-content"},Object(r.createElement)(r.RawHTML,null,n)))},migrate:B.a}];n.d(t,"name",(function(){return D})),n.d(t,"settings",(function(){return R}));var D="amp/amp-story-text",R={title:Object(o.__)("Text","amp"),description:Object(o.__)("Add free-form text to your story.","amp"),icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M11 5v7H9.5C7.6 12 6 10.4 6 8.5S7.6 5 9.5 5H11m8-2H9.5C6.5 3 4 5.5 4 8.5S6.5 14 9.5 14H11v7h2V5h2v16h2V5h2V3z"})),category:"common",keywords:[Object(o.__)("title","amp"),Object(o.__)("heading","amp"),Object(o.__)("paragraph","amp")],supports:{anchor:!0,reusable:!0,className:!0},attributes:{placeholder:{type:"string"},content:{type:"string",source:"html",selector:".amp-text-content",default:""},type:{type:"string",default:"auto"},tagName:{type:"string",default:"p"},align:{type:"string"}},edit:I,save:A,deprecated:N,transforms:{from:[{type:"raw",priority:20,selector:"p,h1,h2",transform:function(e){var t=e.outerHTML,n=Object(a.getBlockAttributes)(D,t);return n.content||(n.content=e.textContent,n.tagName=e.nodeName,n.ampFitText=!1),Object(a.createBlock)(D,n)}}]}}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),a=(n(27),n(9),n(7)),i=n(2),c=n(29),l=(n(100),function(e){return Object(o.createElement)("svg",e,Object(o.createElement)("path",{d:"M18.5 1.15c-.53 0-1.04.19-1.43.58l-5.81 5.82 5.65 5.65 5.82-5.81c.77-.78.77-2.04 0-2.83l-2.84-2.83c-.39-.39-.89-.58-1.39-.58M10.3 8.5l-5.96 5.96c-.78.78-.78 2.04.02 2.85C3.14 18.54 1.9 19.77.67 21h5.66l.86-.86c.78.76 2.03.75 2.81-.02l5.95-5.96"}))});l.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};var s=function(e){var t,n=e.isActive,s=e.value,u=e.onChange;if(n){var d=Object(c.getActiveFormat)(s,p).attributes.style;t=d.replace(new RegExp("^background-color:\\s*"),"")}return Object(o.createElement)(a.BlockControls,null,Object(o.createElement)(i.Toolbar,null,Object(o.createElement)(i.Dropdown,{position:"bottom right",renderToggle:function(e){var n=e.isOpen,a=e.onToggle;return Object(o.createElement)(i.IconButton,{icon:l({width:16,height:16,viewBox:"0 0 24 24"}),tooltip:Object(r.__)("Highlight Color","amp"),onClick:a,"aria-expanded":n},Object(o.createElement)("span",{className:"components-background-color-indicator",style:{backgroundColor:t}}))},renderContent:function(){return Object(o.createElement)("div",{className:"components-background-color-popover-content"},Object(o.createElement)(a.ColorPalette,{value:t,onChange:function(e){u(e?Object(c.applyFormat)(s,{type:p,attributes:{style:"background-color:".concat(e)}}):Object(c.removeFormat)(s,p))}}))}})))};n.d(t,"priority",(function(){return u})),n.d(t,"name",(function(){return p})),n.d(t,"settings",(function(){return d}));var u=20,p="amp/background-color",d={title:Object(r.__)("Inline Background Color","amp"),tagName:"span",className:"amp-background-color",attributes:{style:"style"},edit:s}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),a=(n(9),n(7)),i=n(2),c=n(29),l=(n(101),function(e){var t,n=e.isActive,l=e.value,s=e.onChange;if(n){var p=Object(c.getActiveFormat)(l,u).attributes.style;t=p.replace(new RegExp("^color:\\s*"),"")}return Object(o.createElement)(a.BlockControls,null,Object(o.createElement)(i.Toolbar,null,Object(o.createElement)(i.Dropdown,{position:"bottom right",renderToggle:function(e){var n=e.isOpen,a=e.onToggle;return Object(o.createElement)(i.IconButton,{icon:"editor-textcolor",tooltip:Object(r.__)("Text Color","amp"),onClick:a,"aria-expanded":n},Object(o.createElement)("span",{className:"components-text-color-indicator",style:{backgroundColor:t}}))},renderContent:function(){return Object(o.createElement)("div",{className:"components-text-color-popover-content"},Object(o.createElement)(a.ColorPalette,{value:t,onChange:function(e){s(e?Object(c.applyFormat)(l,{type:u,attributes:{style:"color:".concat(e)}}):Object(c.removeFormat)(l,u))}}))}})))});n.d(t,"priority",(function(){return s})),n.d(t,"name",(function(){return u})),n.d(t,"settings",(function(){return p}));var s=10,u="amp/text-color",p={title:Object(r.__)("Inline Text Color","amp"),tagName:"span",className:"amp-text-color",attributes:{style:"style"},edit:l}}]);